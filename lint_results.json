[{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Profile' is defined but never used.","line":34,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport { AuthProvider } from './context/AuthContext';\r\nimport { DataProvider } from './context/DataContext';\r\nimport { CartProvider } from './context/CartContext';\r\nimport { FavoritesProvider } from './context/FavoritesContext';\r\nimport { WalletProvider } from './context/WalletContext';\r\nimport { LanguageProvider } from './context/LanguageContext';\r\n\r\nimport Navigation from './components/Navbar';\r\nimport ScrollToTop from './components/ScrollToTop';\r\nimport Home from './pages/Home';\r\nimport Login from './pages/Login';\r\nimport Register from './pages/Register';\r\n\r\n// Admin Imports\r\nimport AdminLayout from './pages/admin/AdminLayout';\r\nimport AdminDashboard from './pages/admin/AdminDashboard';\r\nimport AdminProducts from './pages/admin/AdminProducts';\r\nimport { AdminOrders, AdminSupport } from './pages/admin/AdminViews';\r\nimport AdminUsers from './pages/admin/AdminUsers';\r\nimport AdminFinance from './pages/admin/AdminFinance';\r\nimport AdminWalletManagement from './pages/admin/AdminWalletManagement';\r\n\r\n// Placeholder components\r\nimport Shop from './pages/Shop';\r\nimport ProductDetails from './pages/ProductDetails';\r\nimport Help from './pages/Help';\r\n\r\n\r\n// Placeholder components\r\nimport Cart from './pages/Cart';\r\nimport Checkout from './pages/Checkout';\r\nimport Favorites from './pages/Favorites';\r\nimport Profile from './pages/Profile';\r\nimport Orders from './pages/Orders';\r\nimport OrderDetails from './pages/OrderDetails';\r\nimport Addresses from './pages/Addresses';\r\nimport UserInfo from './pages/UserInfo';\r\nimport Cards from './pages/Cards';\r\nimport Reorder from './pages/Reorder';\r\nimport Coupons from './pages/Coupons';\r\nimport Messages from './pages/Messages';\r\nimport Wallet from './pages/Wallet';\r\nconst NotFound = () => <div className=\"container mt-5\"><h2>Page non trouvÃ©e</h2></div>;\r\n\r\n\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nfunction App() {\r\n    return (\r\n        <LanguageProvider>\r\n            <AuthProvider>\r\n                <DataProvider>\r\n                    <CartProvider>\r\n                        <FavoritesProvider>\r\n                            <WalletProvider>\r\n                                <Router>\r\n                                    <ScrollToTop />\r\n                                    <div className=\"min-vh-100 d-flex flex-column\">\r\n                                        <ToastContainer position=\"top-right\" autoClose={3000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover theme=\"colored\" />\r\n                                        <Navigation />\r\n                                        <main className=\"flex-grow-1\">\r\n                                            <Routes>\r\n                                                {/* Public Routes */}\r\n                                                <Route path=\"/\" element={<Home />} />\r\n                                                <Route path=\"/shop\" element={<Shop />} />\r\n                                                <Route path=\"/product/:id\" element={<ProductDetails />} />\r\n                                                <Route path=\"/help\" element={<Help />} />\r\n                                                <Route path=\"/cart\" element={<Cart />} />\r\n                                                <Route path=\"/checkout\" element={<Checkout />} />\r\n                                                <Route path=\"/favorites\" element={<Favorites />} />\r\n                                                <Route path=\"/login\" element={<Login />} />\r\n                                                <Route path=\"/register\" element={<Register />} />\r\n                                                <Route path=\"/profile\" element={<Navigate to=\"/profile/orders\" replace />} />\r\n                                                <Route path=\"/profile/info\" element={<UserInfo />} />\r\n                                                <Route path=\"/profile/orders\" element={<Orders />} />\r\n                                                <Route path=\"/profile/orders/:orderId\" element={<OrderDetails />} />\r\n                                                <Route path=\"/profile/addresses\" element={<Addresses />} />\r\n                                                <Route path=\"/profile/cards\" element={<Cards />} />\r\n                                                <Route path=\"/profile/reorder\" element={<Reorder />} />\r\n                                                <Route path=\"/profile/coupons\" element={<Coupons />} />\r\n                                                <Route path=\"/profile/messages\" element={<Messages />} />\r\n                                                <Route path=\"/profile/wallet\" element={<Wallet />} />\r\n\r\n                                                {/* Admin Routes */}\r\n                                                <Route path=\"/admin\" element={<AdminLayout />}>\r\n                                                    <Route index element={<AdminDashboard />} />\r\n                                                    <Route path=\"products\" element={<AdminProducts />} />\r\n                                                    <Route path=\"orders\" element={<AdminOrders />} />\r\n                                                    <Route path=\"users\" element={<AdminUsers />} />\r\n                                                    <Route path=\"finance\" element={<AdminFinance />} />\r\n                                                    <Route path=\"wallet\" element={<AdminWalletManagement />} />\r\n                                                    <Route path=\"support\" element={<AdminSupport />} />\r\n                                                </Route>\r\n\r\n                                                <Route path=\"*\" element={<NotFound />} />\r\n                                            </Routes>\r\n                                        </main>\r\n                                        <footer className=\"bg-dark text-white py-2 mt-4 text-center\">\r\n                                            <div className=\"container\">\r\n                                                <p className=\"mb-0\" style={{ fontSize: '0.7rem', opacity: 0.7 }}>&copy; 2025 TRYMYDAY. Tous droits rÃ©servÃ©s.</p>\r\n                                            </div>\r\n                                        </footer>\r\n                                    </div>\r\n                                </Router>\r\n                            </WalletProvider>\r\n                        </FavoritesProvider>\r\n                    </CartProvider>\r\n                </DataProvider>\r\n            </AuthProvider>\r\n        </LanguageProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\components\\BarcodeScanner.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'scannerRef' is assigned a value but never used.","line":6,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":34,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from 'react';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Html5QrcodeScanner } from 'html5-qrcode';\r\n\r\nconst BarcodeScanner = ({ show, onHide, onScan }) => {\r\n    const scannerRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        let scanner = null;\r\n\r\n        if (show) {\r\n            // Delay initialization to ensure the DOM element is rendered\r\n            const timeoutId = setTimeout(() => {\r\n                scanner = new Html5QrcodeScanner(\r\n                    \"reader\",\r\n                    {\r\n                        fps: 10,\r\n                        qrbox: { width: 250, height: 250 },\r\n                        aspectRatio: 1.0\r\n                    },\r\n                    /* verbose= */ false\r\n                );\r\n\r\n                scanner.render(\r\n                    (decodedText) => {\r\n                        onScan(decodedText);\r\n                        onHide(); // Close modal on success\r\n                        if (scanner) {\r\n                            scanner.clear().catch(error => {\r\n                                console.error(\"Failed to clear scanner:\", error);\r\n                            });\r\n                        }\r\n                    },\r\n                    (error) => {\r\n                        // Scan errors are common (e.g. no barcode found in frame), so we don't spam the console\r\n                        // console.warn(`Scan error: ${error}`);\r\n                    }\r\n                );\r\n            }, 500);\r\n\r\n            return () => {\r\n                clearTimeout(timeoutId);\r\n                if (scanner) {\r\n                    scanner.clear().catch(error => {\r\n                        console.error(\"Failed to clear scanner on unmount:\", error);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    }, [show, onScan, onHide]);\r\n\r\n    return (\r\n        <Modal show={show} onHide={onHide} centered size=\"md\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Scanner un Code-Barre</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div id=\"reader\" style={{ width: '100%' }}></div>\r\n                <div className=\"mt-3 text-center text-muted small\">\r\n                    <i className=\"bi bi-camera me-2\"></i>\r\n                    Placez le code-barre devant la camÃ©ra\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={onHide}>\r\n                    Fermer\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default BarcodeScanner;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\components\\Navbar.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useData' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useNavigate } from 'react-router-dom';\r\nimport { Container, Row, Col, Form, Badge, Nav, InputGroup, Button, NavDropdown } from 'react-bootstrap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useData, CATEGORIES } from '../context/DataContext';\r\nimport { useLanguage } from '../context/LanguageContext';\r\nimport { useState, useRef, useEffect } from 'react';\r\n\r\nimport { useCart } from '../context/CartContext';\r\n\r\nconst Navigation = () => {\r\n    const { user, logout } = useAuth();\r\n    const { getCartCount } = useCart();\r\n    const { language, setLanguage } = useLanguage();\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [activeSidebarCat, setActiveSidebarCat] = useState('Femme');\r\n    const [showSidebarMenu, setShowSidebarMenu] = useState(false);\r\n    const navigate = useNavigate();\r\n    const menuRef = useRef(null);\r\n\r\n    // Close menu when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n                setShowSidebarMenu(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n\r\n\r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        // Placeholder pour la recherche rÃ©elle\r\n    };\r\n\r\n    return (\r\n        <header className=\"bg-white shadow-sm\" style={{ zIndex: 1040 }}>\r\n\r\n            {/* Main Header Row */}\r\n            <div className=\"py-2\">\r\n                <Container className=\"navbar-container\">\r\n                    <Row className=\"align-items-center g-2\">\r\n                        {/* Logo Column */}\r\n                        <Col lg={2} md={2} xs={6}>\r\n                            <Link to=\"/\" className=\"text-dark text-decoration-none d-flex align-items-center\">\r\n                                <h1 className=\"fw-bolder mb-0 text-dark\" style={{ letterSpacing: '-1.5px', fontSize: '1.6rem' }}>\r\n                                    TRYMYDAY\r\n                                </h1>\r\n                            </Link>\r\n                        </Col>\r\n\r\n                        {/* Search Bar Column - Dominant & Expanded */}\r\n                        <Col lg={6} md={6} className=\"d-none d-md-block px-lg-3\">\r\n                            <Form onSubmit={handleSearch}>\r\n                                <div className=\"d-flex bg-light rounded-2 border p-1 search-wrapper transition-all\">\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"Que recherchez-vous aujourd'hui ?\"\r\n                                        className=\"bg-transparent border-0 shadow-none px-3 py-1\"\r\n                                        value={searchTerm}\r\n                                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                                        style={{ fontSize: '0.82rem' }}\r\n                                    />\r\n                                    <Button\r\n                                        type=\"submit\"\r\n                                        className=\"border-0 px-4 rounded-2 transition-all d-flex align-items-center\"\r\n                                        style={{ backgroundColor: '#ff6000', color: '#fff' }}\r\n                                    >\r\n                                        <i className=\"bi bi-search fs-6\"></i>\r\n                                    </Button>\r\n                                </div>\r\n                            </Form>\r\n                        </Col>\r\n\r\n                        {/* Action Column - Compact & Professional */}\r\n                        <Col lg={4} md={4} xs={6} className=\"d-flex justify-content-end align-items-center gap-1 gap-xl-2\">\r\n\r\n                            {/* Profile Dropdown */}\r\n                            {user ? (\r\n                                <NavDropdown\r\n                                    align=\"end\"\r\n                                    title={\r\n                                        <div className=\"d-flex align-items-center action-item px-2 py-1 rounded-2 transition-all\">\r\n                                            <i className=\"bi bi-person fs-4 me-xl-1\" style={{ color: '#ff6000' }}></i>\r\n                                            <div className=\"d-none d-xl-flex flex-column text-start\" style={{ lineHeight: '1' }}>\r\n                                                <span className=\"text-muted\" style={{ fontSize: '0.5rem' }}>Bonjour,</span>\r\n                                                <span className=\"fw-bold text-dark\" style={{ fontSize: '0.75rem' }}>{user.name.split(' ')[0]}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                    id=\"user-dropdown\"\r\n                                    className=\"custom-nav-dropdown border-0\"\r\n                                >\r\n                                    <NavDropdown.Item as={Link} to=\"/profile/orders\"><i className=\"bi bi-person-circle me-3 text-warning\"></i> Mon Profil</NavDropdown.Item>\r\n                                    {(user.role === 'admin' || user.role === 'manager' || user.role === 'expediteur') && (\r\n                                        <NavDropdown.Item as={Link} to=\"/admin\" className=\"fw-bold text-primary\"><i className=\"bi bi-speedometer2 me-3\"></i> Dashboard</NavDropdown.Item>\r\n                                    )}\r\n                                    <NavDropdown.Divider />\r\n                                    <NavDropdown.Item onClick={logout} className=\"text-danger\"><i className=\"bi bi-box-arrow-right me-3\"></i> DÃ©connexion</NavDropdown.Item>\r\n                                </NavDropdown>\r\n                            ) : (\r\n                                <Link to=\"/login\" className=\"text-dark text-decoration-none d-flex align-items-center action-item px-2 py-1 transition-all\">\r\n                                    <i className=\"bi bi-person fs-4 me-xl-1\"></i>\r\n                                    <span className=\"d-none d-xl-inline fw-bold\" style={{ fontSize: '0.75rem' }}>Connexion</span>\r\n                                </Link>\r\n                            )}\r\n\r\n                            {/* Favorites Action */}\r\n                            <Link to=\"/favorites\" className=\"text-dark text-decoration-none d-flex align-items-center action-item px-2 py-1 transition-all\">\r\n                                <i className=\"bi bi-heart fs-4 me-xl-1 text-danger\"></i>\r\n                                <span className=\"d-none d-xl-inline fw-bold\" style={{ fontSize: '0.75rem' }}>Favoris</span>\r\n                            </Link>\r\n\r\n                            {/* Cart Action */}\r\n                            <Link to=\"/cart\" className=\"text-dark text-decoration-none d-flex align-items-center action-item px-2 py-1 transition-all\">\r\n                                <div className=\"position-relative me-xl-1\">\r\n                                    <i className=\"bi bi-cart3 fs-5\" style={{ color: '#ff6000' }}></i>\r\n                                    <Badge\r\n                                        bg=\"danger\"\r\n                                        pill\r\n                                        className=\"position-absolute top-0 start-100 translate-middle border border-2 border-white\"\r\n                                        style={{ fontSize: '0.45rem', padding: '0.3em 0.4em', backgroundColor: '#ff6000 !important' }}\r\n                                    >\r\n                                        {getCartCount()}\r\n                                    </Badge>\r\n                                </div>\r\n                                <span className=\"d-none d-xl-inline fw-bold\" style={{ fontSize: '0.75rem' }}>Panier</span>\r\n                            </Link>\r\n\r\n                            {/* Language Selector */}\r\n                            <NavDropdown\r\n                                align=\"end\"\r\n                                title={\r\n                                    <div className=\"d-flex align-items-center action-item px-2 py-1 rounded-2 transition-all\">\r\n                                        <i className=\"bi bi-translate fs-5 me-xl-1\" style={{ color: '#ff6000' }}></i>\r\n                                        <span className=\"fw-bold text-dark d-none d-xl-inline\" style={{ fontSize: '0.75rem' }}>{language}</span>\r\n                                    </div>\r\n                                }\r\n                                id=\"language-dropdown\"\r\n                                className=\"custom-nav-dropdown border-0\"\r\n                            >\r\n                                <NavDropdown.Item className=\"small\" onClick={() => setLanguage('FR')}><span className=\"me-2\">ðŸ‡«ðŸ‡·</span> FR - FranÃ§ais</NavDropdown.Item>\r\n                                <NavDropdown.Item className=\"small\" onClick={() => setLanguage('EN')}><span className=\"me-2\">ðŸ‡ºðŸ‡¸</span> EN - English</NavDropdown.Item>\r\n                                <NavDropdown.Item className=\"small\" onClick={() => setLanguage('TR')}><span className=\"me-2\">ðŸ‡¹ðŸ‡·</span> TR - TÃ¼rkÃ§e</NavDropdown.Item>\r\n                                <NavDropdown.Item className=\"small\" onClick={() => setLanguage('AR')}><span className=\"me-2\">ðŸ‡¸ðŸ‡¦</span> AR - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</NavDropdown.Item>\r\n                            </NavDropdown>\r\n\r\n                            {/* Help Assistant - Far Right */}\r\n                            <Link to=\"/help\" className=\"text-dark text-decoration-none d-flex align-items-center action-item px-2 py-1 transition-all rounded-2\">\r\n                                <i className=\"bi bi-telephone fs-4\" style={{ color: '#ff6000' }}></i>\r\n                            </Link>\r\n\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {/* Mobile Search Bar (visible only below md) */}\r\n                    <div className=\"d-md-none mt-3\">\r\n                        <Form onSubmit={handleSearch}>\r\n                            <InputGroup>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    placeholder=\"Que recherchez-vous ?\"\r\n                                    className=\"bg-light border-0\"\r\n                                    value={searchTerm}\r\n                                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                                />\r\n                                <Button variant=\"warning\" type=\"submit\"><i className=\"bi bi-search\"></i></Button>\r\n                            </InputGroup>\r\n                        </Form>\r\n                    </div>\r\n                </Container>\r\n            </div>\r\n\r\n            {/* Category Navigation Bar */}\r\n            <div className=\"border-bottom bg-white d-none d-lg-block position-relative\" style={{ margin: 0, padding: 0 }} ref={menuRef}>\r\n                <Container className=\"navbar-container\">\r\n                    <Nav className=\"align-items-center\">\r\n                        {/* Categories Trigger */}\r\n                        <div\r\n                            className={`categories-trigger py-2 pe-3 me-4 ${showSidebarMenu ? 'active' : ''}`}\r\n                            onClick={() => setShowSidebarMenu(!showSidebarMenu)}\r\n                            style={{ cursor: 'pointer' }}\r\n                        >\r\n                            <i className=\"bi bi-list fs-6 me-2\"></i>\r\n                            <span className=\"fw-bold small\">TOUTES LES CATÃ‰GORIES</span>\r\n                        </div>\r\n\r\n                        {/* Standard Nav Links */}\r\n                        <Link to=\"/shop?sort=new\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-dark text-decoration-none\">\r\n                            NOUVEAUTÃ‰S\r\n                        </Link>\r\n                        <Link to=\"/shop\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-dark text-decoration-none\">\r\n                            MARQUES\r\n                        </Link>\r\n                        <Link to=\"/shop?cat=Gifts\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-dark text-decoration-none\">\r\n                            IDÃ‰ES CADEAUX\r\n                        </Link>\r\n                        <Link to=\"/shop?cat=Collections\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-dark text-decoration-none\">\r\n                            COLLECTIONS\r\n                        </Link>\r\n                        <Link to=\"/shop?cat=Favorites\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-dark text-decoration-none\">\r\n                            COUPS DE CÅ’UR\r\n                        </Link>\r\n                        <Link to=\"/shop?cat=Flash\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-decoration-none\" style={{ color: '#7b1fad' }}>\r\n                            <i className=\"bi bi-lightning-fill me-1\"></i> OFFRES FLASH\r\n                        </Link>\r\n                        {/* Quick links for common categories */}\r\n                        <Link to=\"/shop?cat=Best\" className=\"nav-link-item py-2 px-3 text-uppercase small fw-bold text-danger text-decoration-none\">\r\n                            <i className=\"bi bi-fire me-1\"></i> MEILLEURES VENTES\r\n                        </Link>\r\n                    </Nav>\r\n\r\n                </Container>\r\n                {/* Sidebar Mega Menu Overlay */}\r\n                <div className={`sidebar-mega-menu ${showSidebarMenu ? 'show' : ''}`}>\r\n                    <Container className=\"navbar-container h-100 p-0 shadow-lg border rounded-bottom bg-white overflow-hidden\">\r\n                        <div className=\"d-flex h-100\">\r\n                            {/* Left Side: Sidebar */}\r\n                            <div className=\"category-sidebar border-end bg-light\" style={{ width: '220px' }}>\r\n                                {Object.entries(CATEGORIES).map(([category, data]) => (\r\n                                    <div\r\n                                        key={category}\r\n                                        className={`sidebar-item d-flex align-items-center justify-content-between px-2 py-2 cursor-pointer ${activeSidebarCat === category ? 'active' : ''}`}\r\n                                        onMouseEnter={() => setActiveSidebarCat(category)}\r\n                                        onClick={() => {\r\n                                            navigate(`/shop?cat=${category}`);\r\n                                            setShowSidebarMenu(false);\r\n                                        }}\r\n                                    >\r\n                                        <div className=\"d-flex align-items-center\">\r\n                                            <i className={`bi ${data.icon} me-3`} style={{ fontSize: '0.9rem' }}></i>\r\n                                            <span className=\"fw-semibold\" style={{ fontSize: '0.9rem' }}>{category}</span>\r\n                                        </div>\r\n                                        <i className=\"bi bi-chevron-right opacity-50\" style={{ fontSize: '0.7rem' }}></i>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Right Side: Content Area */}\r\n                            <div className=\"category-content p-2 flex-grow-1 overflow-auto\">\r\n                                <h4 className=\"fw-bold mb-4 d-flex align-items-center\">\r\n                                    {activeSidebarCat}\r\n                                </h4>\r\n                                <Row className=\"g-2\">\r\n                                    {Object.entries(CATEGORIES[activeSidebarCat]?.groups || {}).map(([groupName, items]) => (\r\n                                        <Col key={groupName} md={3}>\r\n                                            <h6 className=\"fw-bold border-bottom pb-1 mb-1 text-dark group-header\">\r\n                                                {groupName}\r\n                                            </h6>\r\n                                            <ul className=\"list-unstyled\">\r\n                                                {items.map(sub => (\r\n                                                    <li key={sub} className=\"mb-2\">\r\n                                                        <Link\r\n                                                            to={`/shop?cat=${activeSidebarCat}&sub=${sub}`}\r\n                                                            className=\"subcategory-link text-muted text-decoration-none d-block\"\r\n                                                            style={{ fontSize: '0.85rem' }}\r\n                                                            onClick={() => setShowSidebarMenu(false)}\r\n                                                        >\r\n                                                            {sub}\r\n                                                        </Link>\r\n                                                    </li>\r\n                                                ))}\r\n                                            </ul>\r\n                                        </Col>\r\n                                    ))}\r\n                                </Row>\r\n                            </div>\r\n                        </div>\r\n                    </Container>\r\n                </div>\r\n            </div>\r\n\r\n            <style>{`\r\n                .hover-orange:hover {\r\n                    color: #ff6000 !important;\r\n                }\r\n                \r\n                .search-wrapper:focus-within {\r\n                    border-color: #ff6000 !important;\r\n                    background-color: #fff !important;\r\n                    box-shadow: 0 0 0 4px rgba(255, 96, 0, 0.1);\r\n                }\r\n\r\n                .action-item {\r\n                    color: #333;\r\n                    border: 1px solid transparent;\r\n                }\r\n                .action-item:hover {\r\n                    color: #ff6000 !important;\r\n                    background-color: #fffaf5;\r\n                    border-color: #ffe0cc;\r\n                }\r\n\r\n                .categories-trigger {\r\n                    cursor: pointer;\r\n                    transition: all 0.3s;\r\n                    border-radius: 4px;\r\n                }\r\n                .categories-trigger:hover, .categories-trigger.active {\r\n                    color: #ff6000;\r\n                    background-color: #fffaf5;\r\n                }\r\n                \r\n                .nav-link-item {\r\n                    transition: all 0.2s;\r\n                    position: relative;\r\n                }\r\n                .nav-link-item:after {\r\n                    content: '';\r\n                    position: absolute;\r\n                    bottom: 0;\r\n                    left: 50%;\r\n                    width: 0;\r\n                    height: 2px;\r\n                    background: #ff6000;\r\n                    transition: all 0.3s;\r\n                    transform: translateX(-50%);\r\n                }\r\n                .nav-link-item:hover {\r\n                    color: #ff6000 !important;\r\n                }\r\n                .nav-link-item:hover:after {\r\n                    width: 70%;\r\n                }\r\n                \r\n                /* Sidebar Mega Menu Styles */\r\n                .sidebar-mega-menu {\r\n                    position: absolute;\r\n                    top: 100%;\r\n                    left: 0;\r\n                    right: 0;\r\n                    height: 500px;\r\n                    z-index: 1050;\r\n                    opacity: 0;\r\n                    visibility: hidden;\r\n                    transform: translateY(10px);\r\n                    transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);\r\n                }\r\n                .sidebar-mega-menu.show {\r\n                    opacity: 1;\r\n                    visibility: visible;\r\n                    transform: translateY(0);\r\n                }\r\n                \r\n                .sidebar-item {\r\n                    transition: all 0.2s;\r\n                    border-left: 4px solid transparent;\r\n                }\r\n                .sidebar-item.active {\r\n                    background-color: #fff !important;\r\n                    color: #ff6000;\r\n                    border-left-color: #ff6000;\r\n                    font-weight: bold;\r\n                }\r\n                \r\n                .subcategory-link:hover {\r\n                    color: #ff6000 !important;\r\n                    padding-left: 5px;\r\n                }\r\n                \r\n                .custom-nav-dropdown .dropdown-toggle::after {\r\n                    display: none;\r\n                }\r\n                .custom-nav-dropdown .dropdown-menu {\r\n                    margin-top: 10px;\r\n                    border: none;\r\n                    box-shadow: 0 10px 30px rgba(0,0,0,0.1);\r\n                    border-radius: 12px;\r\n                    padding: 10px;\r\n                    min-width: 240px;\r\n                }\r\n                .custom-nav-dropdown .dropdown-item {\r\n                    border-radius: 8px;\r\n                    padding: 10px 15px;\r\n                    font-weight: 500;\r\n                    transition: all 0.2s;\r\n                }\r\n                .custom-nav-dropdown .dropdown-item:hover {\r\n                    background-color: #fffaf5;\r\n                    color: #ff6000;\r\n                }\r\n            `}</style>\r\n        </header >\r\n    );\r\n};\r\n\r\nexport default Navigation;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\components\\ProductCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":1,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":1,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":29},{"ruleId":"no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card, Button, Badge } from 'react-bootstrap';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useFavorites } from '../context/FavoritesContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useLanguage } from '../context/LanguageContext';\r\n\r\nconst ProductCard = ({ product }) => {\r\n    const { toggleFavorite, isFavorite } = useFavorites();\r\n    const { user } = useAuth();\r\n    const { NoTranslate } = useLanguage();\r\n    const navigate = useNavigate();\r\n    const favorite = isFavorite(product.id);\r\n\r\n    const orangeAccent = '#f1823dff';\r\n\r\n    const handleFavoriteClick = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (!user) {\r\n            navigate('/register', { state: { from: `/product/${product.id}`, message: 'Inscrivez-vous pour ajouter des produits Ã  vos favoris !' } });\r\n            return;\r\n        }\r\n\r\n        toggleFavorite(product.id);\r\n    };\r\n\r\n    return (\r\n        <Card\r\n            className=\"h-100 border-0 shadow-sm hover-up transition-all position-relative\"\r\n            onClick={() => navigate(`/product/${product.id}`)}\r\n            style={{ cursor: 'pointer', borderRadius: '12px', overflow: 'hidden' }}\r\n        >\r\n            {/* Heart Icon (Floating) */}\r\n            <div\r\n                className=\"position-absolute top-0 end-0 p-2\"\r\n                style={{ zIndex: 10 }}\r\n                onClick={handleFavoriteClick}\r\n            >\r\n                <div className=\"bg-white rounded-circle d-flex align-items-center justify-content-center shadow-sm\"\r\n                    style={{ width: '30px', height: '30px', border: '1px solid #f0f0f0' }}>\r\n                    <i className={`bi ${favorite ? 'bi-heart-fill text-danger' : 'bi-heart text-muted'}`} style={{ fontSize: '0.9rem' }}></i>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Product Image Wrapper (Taller Vertical Ratio) */}\r\n            <div style={{ height: '280px', overflow: 'hidden', backgroundColor: '#fcfcfc' }}>\r\n                <Card.Img\r\n                    variant=\"top\"\r\n                    src={product.image || (product.images && product.images[0]) || '/assets/category_tech_1766034965148.png'}\r\n                    alt={product.name}\r\n                    style={{ height: '100%', objectFit: 'cover' }}\r\n                    onError={(e) => { e.target.src = '/assets/category_tech_1766034965148.png'; }}\r\n                />\r\n\r\n                {/* Bottom Image Banner (Status) - Only show for Limited Stock */}\r\n                {product.stock > 0 && product.stock < 5 && (\r\n                    <div className=\"position-absolute bottom-0 start-0 w-100 py-1\"\r\n                        style={{\r\n                            backgroundColor: 'rgba(235, 64, 52, 0.9)',\r\n                            transform: 'translateY(-100%)',\r\n                            textAlign: 'center',\r\n                            fontSize: '0.7rem',\r\n                            color: 'white',\r\n                            fontWeight: 'bold'\r\n                        }}>\r\n                        <span className=\"text-white\">\r\n                            <i className=\"bi bi-lightning-fill me-1\"></i>\r\n                            STOCK LIMITÃ‰\r\n                        </span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <Card.Body className=\"px-2 pt-3 pb-2\">\r\n                {/* Product Name (Bold) */}\r\n                <div className=\"fw-bold mb-0 text-dark text-truncate\" style={{ fontSize: '0.8rem', textTransform: 'capitalize' }}>\r\n                    {product.name}\r\n                </div>\r\n\r\n                {/* Category (Lighter weight) */}\r\n                <div className=\"mb-1 text-muted text-truncate\" style={{ fontSize: '0.75rem', fontWeight: '400' }}>\r\n                    {product.category}\r\n                </div>\r\n\r\n                {/* Star Rating Row */}\r\n                <div className=\"d-flex align-items-center gap-1 mb-2\">\r\n                    <span className=\"fw-bold text-dark\" style={{ fontSize: '0.75rem' }}>4.5</span>\r\n                    <div className=\"d-flex text-warning\" style={{ fontSize: '0.65rem' }}>\r\n                        <i className=\"bi bi-star-fill\"></i>\r\n                        <i className=\"bi bi-star-fill\"></i>\r\n                        <i className=\"bi bi-star-fill\"></i>\r\n                        <i className=\"bi bi-star-fill\"></i>\r\n                        <i className=\"bi bi-star-half\"></i>\r\n                    </div>\r\n                    <span className=\"text-muted\" style={{ fontSize: '0.7rem' }}>(12)</span>\r\n                </div>\r\n\r\n                {/* Price */}\r\n                <div className=\"fw-bold\" style={{ color: orangeAccent, fontSize: '0.95rem' }}>\r\n                    <NoTranslate>{product.price.toLocaleString()} FCFA</NoTranslate>\r\n                </div>\r\n            </Card.Body>\r\n\r\n            <style>{`\r\n                .transition-all {\r\n                    transition: all 0.25s ease-in-out;\r\n                }\r\n                .hover-up:hover {\r\n                    transform: translateY(-5px);\r\n                    box-shadow: 0 10px 25px rgba(0,0,0,0.1) !important;\r\n                }\r\n            `}</style>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ProductCard;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\components\\ProfileLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\components\\ScrollToTop.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":84,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":84,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useState, useContext, useEffect } from 'react';\r\nimport API_BASE_URL from '../config';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    // Initialize user from localStorage (Session persistence)\r\n    const [user, setUser] = useState(() => {\r\n        const savedUser = localStorage.getItem('user');\r\n        return savedUser ? JSON.parse(savedUser) : null;\r\n    });\r\n\r\n    // Save user to localStorage whenever it changes\r\n    useEffect(() => {\r\n        if (user) {\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n        } else {\r\n            localStorage.removeItem('user');\r\n        }\r\n    }, [user]);\r\n\r\n    const login = async (email, password) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ email, password })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const userData = await response.json();\r\n                setUser(userData);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Login error:\", error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        setUser(null);\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/';\r\n    };\r\n\r\n    const register = async (name, email, password) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/api/auth/register`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ name, email, password })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const newUser = await response.json();\r\n                setUser(newUser);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Registration error:\", error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const updateUser = (updatedUserData) => {\r\n        // This is primarily for local state updates (e.g. balance change)\r\n        // ideally should sync with backend, but for now we accept the object\r\n        setUser(prev => ({ ...prev, ...updatedUserData }));\r\n        return true;\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, logout, register, updateUser }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\CartContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":194,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":194,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst CartContext = createContext(null);\r\n\r\n// Available coupons\r\nconst AVAILABLE_COUPONS = {\r\n    'WELCOME10': { discount: 10, type: 'percentage', description: 'RÃ©duction de 10%' },\r\n    'SAVE20': { discount: 20, type: 'percentage', description: 'RÃ©duction de 20%' },\r\n    'FREESHIP': { discount: 0, type: 'free_shipping', description: 'Livraison gratuite' },\r\n    'FIXED50': { discount: 32500, type: 'fixed', description: 'RÃ©duction de 32 500 FCFA' },\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n    const { user } = useAuth();\r\n\r\n    // Cart items\r\n    const [cartItems, setCartItems] = useState([]);\r\n\r\n    // Saved items (save for later)\r\n    const [savedItems, setSavedItems] = useState([]);\r\n\r\n    // Coupon state\r\n    const [appliedCoupon, setAppliedCoupon] = useState(null);\r\n\r\n    // Load cart execution when user changes\r\n    useEffect(() => {\r\n        if (user) {\r\n            const savedCart = localStorage.getItem(`cart_${user.email}`);\r\n            setCartItems(savedCart ? JSON.parse(savedCart) : []);\r\n\r\n            const savedSavedItems = localStorage.getItem(`savedItems_${user.email}`);\r\n            setSavedItems(savedSavedItems ? JSON.parse(savedSavedItems) : []);\r\n        } else {\r\n            // Optional: Support guest cart by using a generic 'cart' key, \r\n            // OR strictly follow user request to empty on logout.\r\n            // Following strict user request: \"le panier doit se vider\" on logout.\r\n            setCartItems([]);\r\n            setSavedItems([]);\r\n        }\r\n    }, [user]);\r\n\r\n    // Persist cart to localStorage (User specific)\r\n    useEffect(() => {\r\n        if (user) {\r\n            localStorage.setItem(`cart_${user.email}`, JSON.stringify(cartItems));\r\n        }\r\n    }, [cartItems, user]);\r\n\r\n    // Persist saved items to localStorage (User specific)\r\n    useEffect(() => {\r\n        if (user) {\r\n            localStorage.setItem(`savedItems_${user.email}`, JSON.stringify(savedItems));\r\n        }\r\n    }, [savedItems, user]);\r\n\r\n    const addToCart = (product) => {\r\n        setCartItems(prevItems => {\r\n            const existingItem = prevItems.find(item => item.id === product.id);\r\n            if (existingItem) {\r\n                return prevItems.map(item =>\r\n                    item.id === product.id\r\n                        ? { ...item, quantity: item.quantity + 1 }\r\n                        : item\r\n                );\r\n            }\r\n            return [...prevItems, { ...product, quantity: 1 }];\r\n        });\r\n    };\r\n\r\n    const removeFromCart = (id) => {\r\n        setCartItems(prevItems => prevItems.filter(item => item.id !== id));\r\n    };\r\n\r\n    const updateQuantity = (id, quantity) => {\r\n        if (quantity < 1) return;\r\n        setCartItems(prevItems =>\r\n            prevItems.map(item =>\r\n                item.id === id ? { ...item, quantity: Number(quantity) } : item\r\n            )\r\n        );\r\n    };\r\n\r\n    const clearCart = () => {\r\n        setCartItems([]);\r\n        setAppliedCoupon(null);\r\n    };\r\n\r\n    // Save for later functionality\r\n    const saveForLater = (id) => {\r\n        const item = cartItems.find(item => item.id === id);\r\n        if (item) {\r\n            setSavedItems(prev => [...prev, item]);\r\n            removeFromCart(id);\r\n        }\r\n    };\r\n\r\n    const moveToCart = (id) => {\r\n        const item = savedItems.find(item => item.id === id);\r\n        if (item) {\r\n            addToCart(item);\r\n            setSavedItems(prev => prev.filter(i => i.id !== id));\r\n        }\r\n    };\r\n\r\n    const removeSavedItem = (id) => {\r\n        setSavedItems(prev => prev.filter(item => item.id !== id));\r\n    };\r\n\r\n    // Coupon functionality\r\n    const applyCoupon = (code) => {\r\n        const coupon = AVAILABLE_COUPONS[code.toUpperCase()];\r\n        if (coupon) {\r\n            setAppliedCoupon({ code: code.toUpperCase(), ...coupon });\r\n            return { success: true, message: `Coupon \"${code}\" appliquÃ© avec succÃ¨s!` };\r\n        }\r\n        return { success: false, message: 'Code promo invalide' };\r\n    };\r\n\r\n    const removeCoupon = () => {\r\n        setAppliedCoupon(null);\r\n    };\r\n\r\n    // Calculate subtotal\r\n    const getSubtotal = () => {\r\n        return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n    };\r\n\r\n    // Calculate shipping cost\r\n    const getShippingCost = () => {\r\n        if (appliedCoupon?.type === 'free_shipping') return 0;\r\n        return 1000; // Further reduced flat shipping\r\n    };\r\n\r\n    // Calculate tax (5% TVA)\r\n    const getTax = () => {\r\n        return 0; // Tax removed as requested\r\n    };\r\n\r\n    // Calculate discount\r\n    const getDiscount = () => {\r\n        if (!appliedCoupon) return 0;\r\n        const subtotal = getSubtotal();\r\n\r\n        if (appliedCoupon.type === 'percentage') {\r\n            return subtotal * (appliedCoupon.discount / 100);\r\n        } else if (appliedCoupon.type === 'fixed') {\r\n            return Math.min(appliedCoupon.discount, subtotal);\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    // Calculate final total\r\n    const getCartTotal = () => {\r\n        const subtotal = getSubtotal();\r\n        const shipping = getShippingCost();\r\n        const tax = getTax();\r\n        const discount = getDiscount();\r\n\r\n        return Math.max(0, subtotal + shipping + tax - discount);\r\n    };\r\n\r\n    const getCartCount = () => {\r\n        return cartItems.reduce((total, item) => total + item.quantity, 0);\r\n    };\r\n\r\n    return (\r\n        <CartContext.Provider value={{\r\n            cartItems,\r\n            savedItems,\r\n            appliedCoupon,\r\n            addToCart,\r\n            removeFromCart,\r\n            updateQuantity,\r\n            clearCart,\r\n            saveForLater,\r\n            moveToCart,\r\n            removeSavedItem,\r\n            applyCoupon,\r\n            removeCoupon,\r\n            getSubtotal,\r\n            getShippingCost,\r\n            getTax,\r\n            getDiscount,\r\n            getCartTotal,\r\n            getCartCount,\r\n            availableCoupons: AVAILABLE_COUPONS\r\n        }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\DataContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":24},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":322,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":322,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useState, useContext, useEffect } from 'react';\r\nimport API_BASE_URL from '../config';\r\n\r\nconst DataContext = createContext(null);\r\n\r\nexport const CATEGORIES = {\r\n    'Femme': {\r\n        icon: 'bi-person',\r\n        groups: {\r\n            'VÃªtements': ['Robes', 'Chemisiers', 'Jeans', 'Jupes', 'T-shirts', 'Vestes'],\r\n            'Chaussures': ['Baskets', 'Bottines', 'Talons', 'Sandales'],\r\n            'Sacs': ['Sacs Ã  main', 'Sacs bandouliÃ¨re', 'Pochettes', 'Cabas'],\r\n            'Accessoires': ['Bijoux', 'Montres', 'Lunettes']\r\n        }\r\n    },\r\n    'Homme': {\r\n        icon: 'bi-person',\r\n        groups: {\r\n            'VÃªtements': ['Chemises', 'Pantalons', 'Pulls', 'T-shirts', 'Costumes', 'Polos'],\r\n            'Chaussures': ['Baskets', 'Mocassins', 'Bottes'],\r\n            'Sacs': ['Sacs Ã  dos', 'Sacs de sport', 'Sacoches'],\r\n            'Accessoires': ['Montres', 'Ceintures', 'Cravates']\r\n        }\r\n    },\r\n    'Enfant': {\r\n        icon: 'bi-emoji-smile',\r\n        groups: {\r\n            'BÃ©bÃ©': ['Bodys', 'Ensembles'],\r\n            'GarÃ§on': ['T-shirts', 'Pantalons', 'Vestes'],\r\n            'Fille': ['Robes', 'Jupes', 'Pantalons'],\r\n            'Sacs': ['Cartables', 'Sacs Ã  dos', 'Trousses'],\r\n            'Jouets': ['Ã‰veil', 'Jeux de sociÃ©tÃ©', 'PoupÃ©es']\r\n        }\r\n    },\r\n    'Maison & Meuble': {\r\n        icon: 'bi-house',\r\n        groups: {\r\n            'DÃ©coration': ['Lampes', 'Vases', 'Coussins', 'Tableaux'],\r\n            'Mobilier': ['Chaises', 'Tables', 'CanapÃ©s'],\r\n            'Linge de maison': ['Draps', 'Serviettes', 'RÃ©gion']\r\n        }\r\n    },\r\n    'CosmÃ©tique': {\r\n        icon: 'bi-magic',\r\n        groups: {\r\n            'Maquillage': ['Teint', 'Yeux', 'LÃ¨vres'],\r\n            'Soins': ['Visage', 'Corps', 'Cheveux'],\r\n            'Parfums': ['Homme', 'Femme', 'Coffrets']\r\n        }\r\n    },\r\n    'Chaussures': {\r\n        icon: 'bi-handbag',\r\n        groups: {\r\n            'Sports': ['Baskets', 'Running', 'Football'],\r\n            'Ville': ['Mocassins', 'Bottes', 'Chaussures de ville'],\r\n            'SoirÃ©e': ['Talons', 'Escarpins', 'Sandales chic']\r\n        }\r\n    },\r\n    'Sacs': {\r\n        icon: 'bi-bag',\r\n        groups: {\r\n            'ModÃ¨les': ['Sacs Ã  main', 'Sacs Ã  dos', 'Pochettes', 'Cabas'],\r\n            'Usage': ['Voyage', 'Sport', 'Bureau', 'SoirÃ©e'],\r\n            'MatiÃ¨res': ['Cuir', 'Simili', 'Tissu']\r\n        }\r\n    },\r\n    'Ã‰lectronique': {\r\n        icon: 'bi-display',\r\n        groups: {\r\n            'Mobile': ['Smartphones', 'Accessoires'],\r\n            'Audio': ['Casques', 'Enceintes'],\r\n            'Informatique': ['PC Portables', 'PÃ©riphÃ©riques'],\r\n        }\r\n    }\r\n};\r\n\r\nconst initialReviews = [\r\n    { id: 101, productId: 1, userId: 10, userName: 'Alice', rating: 5, comment: 'Excellent casque, le son est pur !', date: '2024-06-15' },\r\n    { id: 102, productId: 1, userId: 11, userName: 'Bob', rating: 4, comment: 'TrÃ¨s confortable, un peu cher mais vaut le coup.', date: '2024-06-18' },\r\n    { id: 103, productId: 2, userId: 12, userName: 'Charlie', rating: 5, comment: 'Superbe montre, trÃ¨s fluide.', date: '2024-06-20' },\r\n];\r\n\r\n// Keep users/expenses/questions for now as they are less critical or handled differently effectively\r\nconst initialUsers = [\r\n    { id: 1, name: 'Jean Dupont', email: 'jean@test.com', role: 'client', joined: '2025-01-15' },\r\n    { id: 2, name: 'Admin User', email: 'Trymyday235@gmail.com', role: 'admin', joined: '2025-01-01' },\r\n];\r\n\r\nconst initialExpenses = [\r\n    { id: 1, description: 'Stock initial', amount: 325000, category: 'Stock', date: '2025-12-01' },\r\n    { id: 2, description: 'PublicitÃ© Facebook', amount: 32500, category: 'Marketing', date: '2025-12-15' },\r\n];\r\n\r\nconst initialHelpQuestions = [\r\n    { id: 1, question: \"Comment puis-je modifier mon adresse de livraison ?\", answer: \"Vous pouvez le faire dans votre profil, section 'Mes adresses'.\", status: 'approved', date: '2025-12-20', userName: 'Alice' },\r\n    { id: 2, question: \"Acceptez-vous le paiement en cryptomonnaie ?\", answer: \"Pas encore, mais nous y travaillons !\", status: 'approved', date: '2025-12-22', userName: 'Bob' },\r\n];\r\n\r\nexport const DataProvider = ({ children }) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [orders, setOrders] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const [users, setUsers] = useState(() => {\r\n        const savedUsers = localStorage.getItem('users');\r\n        const userList = savedUsers ? JSON.parse(savedUsers) : initialUsers;\r\n        const today = new Date().toISOString().split('T')[0];\r\n        return userList.map(u => ({\r\n            ...u,\r\n            joined: (u.joined && u.joined !== '2025-01-01') ? u.joined : today\r\n        }));\r\n    });\r\n\r\n    const [expenses, setExpenses] = useState(() => {\r\n        const savedExpenses = localStorage.getItem('expenses');\r\n        return savedExpenses ? JSON.parse(savedExpenses) : initialExpenses;\r\n    });\r\n    const [reviews, setReviews] = useState(initialReviews);\r\n    const [helpQuestions, setHelpQuestions] = useState(() => {\r\n        const saved = localStorage.getItem('helpQuestions');\r\n        return saved ? JSON.parse(saved) : initialHelpQuestions;\r\n    });\r\n\r\n    // Fetch Products and Orders from Backend\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                // Fetch Products\r\n                const prodRes = await fetch(`${API_BASE_URL}/api/products`);\r\n                if (prodRes.ok) {\r\n                    const prodData = await prodRes.json();\r\n                    setProducts(prodData);\r\n                }\r\n\r\n                // Fetch Orders\r\n                const orderRes = await fetch(`${API_BASE_URL}/api/orders`);\r\n                if (orderRes.ok) {\r\n                    const orderData = await orderRes.json();\r\n                    setOrders(orderData);\r\n                }\r\n\r\n                // Fetch Users (for Admin view)\r\n                const userRes = await fetch(`${API_BASE_URL}/api/admin/wallet/users`);\r\n                if (userRes.ok) {\r\n                    const userData = await userRes.json();\r\n                    if (userData.success) {\r\n                        setUsers(userData.users);\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error fetching data:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    // Persist users to localStorage (Legacy)\r\n    useEffect(() => {\r\n        localStorage.setItem('users', JSON.stringify(users));\r\n    }, [users]);\r\n\r\n    // Persist expenses to localStorage (Legacy)\r\n    useEffect(() => {\r\n        localStorage.setItem('expenses', JSON.stringify(expenses));\r\n    }, [expenses]);\r\n\r\n    // Persist help questions to localStorage (Legacy)\r\n    useEffect(() => {\r\n        localStorage.setItem('helpQuestions', JSON.stringify(helpQuestions));\r\n    }, [helpQuestions]);\r\n\r\n\r\n    const addProduct = async (product) => {\r\n        try {\r\n            const newProduct = { ...product, id: Date.now(), images: product.images || [product.image] };\r\n\r\n            // Optimistic update\r\n            setProducts(prev => [...prev, newProduct]);\r\n\r\n            const response = await fetch(`${API_BASE_URL}/api/products`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(newProduct)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                // Revert on failure not implemented for simplicity, but acceptable for MPV\r\n                console.error(\"Failed to save product to backend\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error adding product:\", error);\r\n        }\r\n    };\r\n\r\n    const updateProduct = async (id, updatedProduct) => {\r\n        try {\r\n            setProducts(prev => prev.map(p => p.id === id ? { ...p, ...updatedProduct } : p));\r\n\r\n            await fetch(`${API_BASE_URL}/api/products/${id}`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(updatedProduct)\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error updating product:\", error);\r\n        }\r\n    };\r\n\r\n    const deleteProduct = async (id) => {\r\n        try {\r\n            setProducts(prev => prev.filter(p => p.id !== id));\r\n\r\n            await fetch(`${API_BASE_URL}/api/products/${id}`, {\r\n                method: 'DELETE'\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error deleting product:\", error);\r\n        }\r\n    };\r\n\r\n    const addReview = (newReview) => {\r\n        setReviews([...reviews, { ...newReview, id: Date.now(), date: new Date().toISOString().split('T')[0] }]);\r\n    };\r\n\r\n    // Add new order\r\n    const addOrder = async (orderData) => {\r\n        const newOrder = {\r\n            id: orderData.id || `CMD-${Math.random().toString(36).substr(2, 9).toUpperCase()}`,\r\n            customerName: orderData.customerName || 'Client',\r\n            email: orderData.email,\r\n            date: new Date().toISOString().split('T')[0],\r\n            total: orderData.total,\r\n            subtotal: orderData.subtotal,\r\n            shippingCost: orderData.shippingCost,\r\n            status: orderData.status || 'En attente',\r\n            items: orderData.items || [],\r\n            shippingAddress: orderData.shippingAddress,\r\n            phone: orderData.phone,\r\n            paymentMethod: orderData.paymentMethod\r\n        };\r\n\r\n        // Optimistic UI\r\n        setOrders(prevOrders => [newOrder, ...prevOrders]);\r\n\r\n        try {\r\n            await fetch(`${API_BASE_URL}/api/orders`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(newOrder)\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error saving order:\", error);\r\n        }\r\n\r\n        return newOrder;\r\n    };\r\n\r\n    // Update existing order\r\n    const updateOrder = async (id, updatedData) => {\r\n        setOrders(prevOrders => prevOrders.map(o => o.id === id ? { ...o, ...updatedData } : o));\r\n\r\n        try {\r\n            await fetch(`${API_BASE_URL}/api/orders/${id}/status`, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(updatedData)\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Error updating order:\", error);\r\n        }\r\n    };\r\n\r\n    const addExpense = (expense) => {\r\n        const newExpense = { ...expense, id: Date.now() };\r\n        setExpenses([newExpense, ...expenses]);\r\n    };\r\n\r\n    const updateExpense = (id, updatedExpense) => {\r\n        setExpenses(expenses.map(e => e.id === id ? { ...e, ...updatedExpense } : e));\r\n    };\r\n\r\n    const deleteExpense = (id) => {\r\n        setExpenses(expenses.filter(e => e.id !== id));\r\n    };\r\n\r\n    const addHelpQuestion = (questionData) => {\r\n        const newQ = {\r\n            id: Date.now(),\r\n            ...questionData,\r\n            status: 'pending',\r\n            date: new Date().toISOString().split('T')[0],\r\n            answer: ''\r\n        };\r\n        setHelpQuestions([newQ, ...helpQuestions]);\r\n    };\r\n\r\n    const updateHelpQuestion = (id, updatedData) => {\r\n        setHelpQuestions(helpQuestions.map(q => q.id === id ? { ...q, ...updatedData } : q));\r\n    };\r\n\r\n    const deleteHelpQuestion = (id) => {\r\n        setHelpQuestions(helpQuestions.filter(q => q.id !== id));\r\n    };\r\n\r\n    return (\r\n        <DataContext.Provider value={{\r\n            products, addProduct, updateProduct, deleteProduct, loading,\r\n            orders, setOrders, addOrder, updateOrder,\r\n            users, setUsers,\r\n            expenses, addExpense, updateExpense, deleteExpense,\r\n            reviews, addReview,\r\n            helpQuestions, addHelpQuestion, updateHelpQuestion, deleteHelpQuestion\r\n        }}>\r\n            {children}\r\n        </DataContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useData = () => useContext(DataContext);\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\FavoritesContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":74,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":74,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst FavoritesContext = createContext(null);\r\n\r\nexport const FavoritesProvider = ({ children }) => {\r\n    const { user } = useAuth();\r\n\r\n    // Load favorites from localStorage based on user\r\n    const [favorites, setFavorites] = useState(() => {\r\n        if (!user) return [];\r\n        const saved = localStorage.getItem(`favorites_${user.email}`);\r\n        return saved ? JSON.parse(saved) : [];\r\n    });\r\n\r\n    // Save favorites to localStorage when they change\r\n    useEffect(() => {\r\n        if (user) {\r\n            localStorage.setItem(`favorites_${user.email}`, JSON.stringify(favorites));\r\n        }\r\n    }, [favorites, user]);\r\n\r\n    // Update favorites when user changes\r\n    useEffect(() => {\r\n        if (user) {\r\n            const saved = localStorage.getItem(`favorites_${user.email}`);\r\n            setFavorites(saved ? JSON.parse(saved) : []);\r\n        } else {\r\n            setFavorites([]);\r\n        }\r\n    }, [user]);\r\n\r\n    const addToFavorites = (productId) => {\r\n        if (!favorites.includes(productId)) {\r\n            setFavorites([...favorites, productId]);\r\n        }\r\n    };\r\n\r\n    const removeFromFavorites = (productId) => {\r\n        setFavorites(favorites.filter(id => id !== productId));\r\n    };\r\n\r\n    const toggleFavorite = (productId) => {\r\n        if (favorites.includes(productId)) {\r\n            removeFromFavorites(productId);\r\n        } else {\r\n            addToFavorites(productId);\r\n        }\r\n    };\r\n\r\n    const isFavorite = (productId) => {\r\n        return favorites.includes(productId);\r\n    };\r\n\r\n    const clearFavorites = () => {\r\n        setFavorites([]);\r\n    };\r\n\r\n    return (\r\n        <FavoritesContext.Provider value={{\r\n            favorites,\r\n            addToFavorites,\r\n            removeFromFavorites,\r\n            toggleFavorite,\r\n            isFavorite,\r\n            clearFavorites,\r\n            favoritesCount: favorites.length\r\n        }}>\r\n            {children}\r\n        </FavoritesContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useFavorites = () => {\r\n    const context = useContext(FavoritesContext);\r\n    if (!context) {\r\n        throw new Error('useFavorites must be used within FavoritesProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\LanguageContext.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":66,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":66,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst LanguageContext = createContext();\r\n\r\nexport const LanguageProvider = ({ children }) => {\r\n    const [language, setLanguage] = useState(localStorage.getItem('language') || 'FR');\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('language', language);\r\n        document.documentElement.lang = language.toLowerCase();\r\n        document.documentElement.dir = language === 'AR' ? 'rtl' : 'ltr';\r\n\r\n        // Trigger Google Translate\r\n        const translateElement = document.querySelector('.goog-te-combo');\r\n        if (translateElement) {\r\n            translateElement.value = language.toLowerCase();\r\n            translateElement.dispatchEvent(new Event('change'));\r\n        } else {\r\n            // If the element is not ready yet, we try a more direct approach for Google Translate widget\r\n            const googleWidget = document.querySelector('.goog-te-gadget-simple');\r\n            if (googleWidget) {\r\n                const innerSpan = Array.from(document.querySelectorAll('span')).find(el =>\r\n                    el.textContent.includes('Select Language') || el.textContent.includes('SÃ©lectionner')\r\n                );\r\n                if (innerSpan) innerSpan.click();\r\n            }\r\n        }\r\n    }, [language]);\r\n\r\n    const changeLanguage = (lang) => {\r\n        setLanguage(lang);\r\n\r\n        // Google Translate uses a specific cookie/dropdown system.\r\n        // We set the cookie that Google Translate looks for.\r\n        // Format: /fr/[lang_code]\r\n        const langValue = lang.toLowerCase();\r\n        document.cookie = `googtrans=/fr/${langValue}; path=/`;\r\n        document.cookie = `googtrans=/fr/${langValue}; path=/; domain=${window.location.hostname}`;\r\n\r\n        // Refresh page to force Google Translate to apply (it's the most reliable way)\r\n        window.location.reload();\r\n    };\r\n\r\n    // Helper to protect text from being translated (like prices/numbers)\r\n    const NoTranslate = ({ children, className = \"\" }) => (\r\n        <span className={`notranslate ${className}`} translate=\"no\">\r\n            {children}\r\n        </span>\r\n    );\r\n\r\n    // Fallback translation function for components still using it\r\n    const t = (key) => {\r\n        if (!key) return \"\";\r\n        const parts = key.split('.');\r\n        return parts[parts.length - 1];\r\n    };\r\n\r\n    return (\r\n        <LanguageContext.Provider value={{ language, setLanguage: changeLanguage, NoTranslate, t }}>\r\n            <div id=\"google_translate_element\" style={{ display: 'none' }}></div>\r\n            {children}\r\n        </LanguageContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useLanguage = () => {\r\n    const context = useContext(LanguageContext);\r\n    if (!context) {\r\n        throw new Error('useLanguage must be used within a LanguageProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\context\\WalletContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":23},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'fetchBalance' and 'fetchTransactions'. Either include them or remove the dependency array.","line":145,"column":8,"nodeType":"ArrayExpression","endLine":145,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBalance, fetchTransactions, user]","fix":{"range":[5431,5437],"text":"[fetchBalance, fetchTransactions, user]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchBalance'. Either include it or remove the dependency array.","line":153,"column":8,"nodeType":"ArrayExpression","endLine":153,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchBalance, user]","fix":{"range":[5756,5762],"text":"[fetchBalance, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport API_BASE_URL from '../config';\r\n\r\nconst WalletContext = createContext();\r\n\r\nexport const useWallet = () => {\r\n    const context = useContext(WalletContext);\r\n    if (!context) {\r\n        throw new Error('useWallet must be used within WalletProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const WalletProvider = ({ children }) => {\r\n    const { user, updateUser } = useAuth();\r\n    const [balance, setBalance] = useState(0);\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Fetch wallet balance from backend\r\n    const fetchBalance = async () => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n\r\n            const response = await fetch(`${API_BASE_URL}/api/wallet/balance?email=${user.email}`);\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const newBalance = data.balance || 0;\r\n                setBalance(newBalance);\r\n\r\n                // Optional: Sync user object in AuthContext if needed\r\n                if (user.balance !== newBalance) {\r\n                    updateUser({ ...user, balance: newBalance });\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching balance from API:', error);\r\n            // Fallback to local storage if API fails\r\n            const localUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n            const currentUser = localUsers.find(u => u.email === user.email);\r\n            if (currentUser) setBalance(currentUser.balance || 0);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Fetch transaction history from backend\r\n    const fetchTransactions = async () => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/api/wallet/transactions?email=${user.email}`);\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                let userTransactions = data.transactions || [];\r\n\r\n                // Restriction pour les managers : 30 derniers jours\r\n                if (user?.role === 'manager') {\r\n                    const thirtyDaysAgo = new Date();\r\n                    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n                    userTransactions = userTransactions.filter(tx => new Date(tx.date) >= thirtyDaysAgo);\r\n                }\r\n\r\n                setTransactions(userTransactions);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching transactions from API:', error);\r\n            // Fallback\r\n            const allTransactions = JSON.parse(localStorage.getItem('wallet_transactions') || '[]');\r\n            const userTransactions = allTransactions.filter(tx => tx.userEmail === user.email)\r\n                .sort((a, b) => new Date(b.date) - new Date(a.date));\r\n            setTransactions(userTransactions);\r\n        }\r\n    };\r\n\r\n    // Pay with wallet\r\n    const payWithWallet = async (amount, orderId) => {\r\n        if (!user) {\r\n            return { success: false, message: 'Veuillez vous connecter' };\r\n        }\r\n\r\n        try {\r\n            const localUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n            const userIndex = localUsers.findIndex(u => u.email === user.email);\r\n\r\n            if (userIndex === -1) {\r\n                return { success: false, message: 'Utilisateur introuvable' };\r\n            }\r\n\r\n            if (localUsers[userIndex].balance < amount) {\r\n                return { success: false, message: 'Solde insuffisant' };\r\n            }\r\n\r\n            // Deduct balance\r\n            const newBalance = localUsers[userIndex].balance - amount;\r\n            localUsers[userIndex].balance = newBalance;\r\n            localStorage.setItem('users', JSON.stringify(localUsers));\r\n\r\n            // Record transaction\r\n            const allTransactions = JSON.parse(localStorage.getItem('wallet_transactions') || '[]');\r\n            const newTransaction = {\r\n                id: Date.now(),\r\n                userId: user.id,\r\n                userEmail: user.email,\r\n                amount: amount,\r\n                type: 'debit',\r\n                description: `Paiement Commande #${orderId}`,\r\n                date: new Date().toISOString(),\r\n                balanceAfter: newBalance\r\n            };\r\n            allTransactions.push(newTransaction);\r\n            localStorage.setItem('wallet_transactions', JSON.stringify(allTransactions));\r\n\r\n            // Update local state\r\n            setBalance(newBalance);\r\n            updateUser({ ...user, balance: newBalance });\r\n            fetchTransactions();\r\n\r\n            return { success: true, newBalance };\r\n        } catch (error) {\r\n            console.error('Error paying with wallet:', error);\r\n            return { success: false, message: 'Erreur lors du paiement' };\r\n        }\r\n    };\r\n\r\n    // Check if user has sufficient balance\r\n    const hasSufficientBalance = (amount) => {\r\n        return balance >= amount;\r\n    };\r\n\r\n    // Load balance on user change\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchBalance();\r\n            fetchTransactions();\r\n        } else {\r\n            setBalance(0);\r\n            setTransactions([]);\r\n        }\r\n    }, [user]);\r\n\r\n    // Periodically sync balance (useful if admin updates it in another \"tab\" or if session needs update)\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            if (user) fetchBalance();\r\n        }, 5000); // Check every 5 seconds\r\n        return () => clearInterval(interval);\r\n    }, [user]);\r\n\r\n    const value = {\r\n        balance,\r\n        transactions,\r\n        loading,\r\n        fetchBalance,\r\n        fetchTransactions,\r\n        payWithWallet,\r\n        hasSufficientBalance\r\n    };\r\n\r\n    return (\r\n        <WalletContext.Provider value={value}>\r\n            {children}\r\n        </WalletContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Addresses.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":175,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7605,7625],"text":"Titre de l&apos;adresse *"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7605,7625],"text":"Titre de l&lsquo;adresse *"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7605,7625],"text":"Titre de l&#39;adresse *"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7605,7625],"text":"Titre de l&rsquo;adresse *"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":291,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[14863,14876],"text":"CÃ´te d&apos;Ivoire"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[14863,14876],"text":"CÃ´te d&lsquo;Ivoire"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[14863,14876],"text":"CÃ´te d&#39;Ivoire"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[14863,14876],"text":"CÃ´te d&rsquo;Ivoire"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Card, Button, Row, Col, Modal, Form, Alert } from 'react-bootstrap';\r\nimport { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst Addresses = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingAddress, setEditingAddress] = useState(null);\r\n\r\n    // Load addresses from localStorage\r\n    const [addresses, setAddresses] = useState(() => {\r\n        if (!user) return [];\r\n        const saved = localStorage.getItem(`addresses_${user.email}`);\r\n        return saved ? JSON.parse(saved) : [];\r\n    });\r\n\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        fullName: '',\r\n        phone: '',\r\n        address: '',\r\n        city: '',\r\n        postalCode: '',\r\n        country: 'pays'\r\n    });\r\n\r\n    // Redirect if not logged in\r\n    if (!user) {\r\n        return (\r\n            <ProfileLayout>\r\n                <div className=\"mb-4\">\r\n                    <h3 className=\"fw-bold\">Mes adresses</h3>\r\n                    <p className=\"text-muted\">GÃ©rez vos adresses de livraison</p>\r\n                </div>\r\n                <Container className=\"py-5 text-center\">\r\n                    <Alert variant=\"info\">\r\n                        <Alert.Heading>Connexion requise</Alert.Heading>\r\n                        <p>Vous devez Ãªtre connectÃ© pour gÃ©rer vos adresses.</p>\r\n                        <Button variant=\"primary\" onClick={() => navigate('/login')}>\r\n                            Se connecter\r\n                        </Button>\r\n                    </Alert>\r\n                </Container>\r\n            </ProfileLayout>\r\n        );\r\n    }\r\n\r\n    const saveAddresses = (newAddresses) => {\r\n        setAddresses(newAddresses);\r\n        localStorage.setItem(`addresses_${user.email}`, JSON.stringify(newAddresses));\r\n    };\r\n\r\n    const handleOpenModal = (address = null) => {\r\n        if (address) {\r\n            setEditingAddress(address);\r\n            setFormData(address);\r\n        } else {\r\n            setEditingAddress(null);\r\n            setFormData({\r\n                title: '',\r\n                fullName: '',\r\n                phone: '',\r\n                address: '',\r\n                city: '',\r\n                postalCode: '',\r\n                country: 'pays'\r\n            });\r\n        }\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleSaveAddress = () => {\r\n        if (!formData.title || !formData.fullName || !formData.address || !formData.city) {\r\n            alert('Veuillez remplir tous les champs obligatoires');\r\n            return;\r\n        }\r\n\r\n        let newAddresses;\r\n        if (editingAddress) {\r\n            // Update existing address\r\n            newAddresses = addresses.map(addr =>\r\n                addr.id === editingAddress.id ? { ...formData, id: editingAddress.id } : addr\r\n            );\r\n        } else {\r\n            // Add new address\r\n            const newAddress = { ...formData, id: Date.now() };\r\n            newAddresses = [...addresses, newAddress];\r\n        }\r\n\r\n        saveAddresses(newAddresses);\r\n        setShowModal(false);\r\n    };\r\n\r\n    const handleDeleteAddress = (id) => {\r\n        if (window.confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cette adresse ?')) {\r\n            const newAddresses = addresses.filter(addr => addr.id !== id);\r\n            saveAddresses(newAddresses);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2 className=\"fw-bold\">\r\n                    <i className=\"bi bi-geo-alt-fill me-2\"></i>\r\n                    Mes Adresses\r\n                </h2>\r\n                <Button variant=\"warning\" className=\"text-white fw-bold\" onClick={() => handleOpenModal()}>\r\n                    <i className=\"bi bi-plus-lg me-2\"></i>\r\n                    Nouvelle adresse\r\n                </Button>\r\n            </div>\r\n\r\n            {addresses.length === 0 ? (\r\n                <div className=\"text-center py-5\">\r\n                    <i className=\"bi bi-house\" style={{ fontSize: '5rem', color: '#ddd' }}></i>\r\n                    <h3 className=\"mt-4 text-muted\">Aucune adresse enregistrÃ©e</h3>\r\n                    <p className=\"text-muted mb-4\">Ajoutez une adresse pour faciliter vos commandes</p>\r\n                    <Button variant=\"warning\" className=\"text-white fw-bold\" onClick={() => handleOpenModal()}>\r\n                        Ajouter une adresse\r\n                    </Button>\r\n                </div>\r\n            ) : (\r\n                <Row className=\"g-4\">\r\n                    {addresses.map(address => (\r\n                        <Col key={address.id} md={6} lg={4}>\r\n                            <Card className=\"h-100 shadow-sm border-0\">\r\n                                <Card.Body>\r\n                                    <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                                        <h5 className=\"fw-bold text-warning\">{address.title}</h5>\r\n                                        <div>\r\n                                            <Button\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                className=\"p-1 text-primary\"\r\n                                                onClick={() => handleOpenModal(address)}\r\n                                            >\r\n                                                <i className=\"bi bi-pencil-fill\"></i>\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                className=\"p-1 text-danger\"\r\n                                                onClick={() => handleDeleteAddress(address.id)}\r\n                                            >\r\n                                                <i className=\"bi bi-trash-fill\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <p className=\"mb-1\"><strong>{address.fullName}</strong></p>\r\n                                    <p className=\"mb-1 text-muted small\">{address.phone}</p>\r\n                                    <p className=\"mb-1 text-muted small\">{address.address}</p>\r\n                                    <p className=\"mb-0 text-muted small\">\r\n                                        {address.city}, {address.postalCode}\r\n                                    </p>\r\n                                    <p className=\"mb-0 text-muted small\">{address.country}</p>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                    ))}\r\n                </Row>\r\n            )}\r\n\r\n            {/* Add/Edit Address Modal */}\r\n            <Modal show={showModal} onHide={() => setShowModal(false)} size=\"lg\">\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{editingAddress ? 'Modifier l\\'adresse' : 'Nouvelle adresse'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Titre de l'adresse *</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Ex: Maison, Bureau, etc.\"\r\n                                value={formData.title}\r\n                                onChange={e => setFormData({ ...formData, title: e.target.value })}\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Nom complet *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={formData.fullName}\r\n                                        onChange={e => setFormData({ ...formData, fullName: e.target.value })}\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>TÃ©lÃ©phone</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"tel\"\r\n                                        value={formData.phone}\r\n                                        onChange={e => setFormData({ ...formData, phone: e.target.value })}\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Adresse complÃ¨te *</Form.Label>\r\n                            <Form.Control\r\n                                as=\"textarea\"\r\n                                rows={2}\r\n                                value={formData.address}\r\n                                onChange={e => setFormData({ ...formData, address: e.target.value })}\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Ville *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={formData.city}\r\n                                        onChange={e => setFormData({ ...formData, city: e.target.value })}\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Code postal</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={formData.postalCode}\r\n                                        onChange={e => setFormData({ ...formData, postalCode: e.target.value })}\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Pays</Form.Label>\r\n                            <Form.Select\r\n                                value={formData.country}\r\n                                onChange={e => setFormData({ ...formData, country: e.target.value })}\r\n                            >\r\n                                <option value=\"Afghanistan\">Afghanistan</option>\r\n                                <option value=\"Afrique du Sud\">Afrique du Sud</option>\r\n                                <option value=\"Albanie\">Albanie</option>\r\n                                <option value=\"AlgÃ©rie\">AlgÃ©rie</option>\r\n                                <option value=\"Allemagne\">Allemagne</option>\r\n                                <option value=\"Andorre\">Andorre</option>\r\n                                <option value=\"Angola\">Angola</option>\r\n                                <option value=\"Antigua-et-Barbuda\">Antigua-et-Barbuda</option>\r\n                                <option value=\"Arabie Saoudite\">Arabie Saoudite</option>\r\n                                <option value=\"Argentine\">Argentine</option>\r\n                                <option value=\"ArmÃ©nie\">ArmÃ©nie</option>\r\n                                <option value=\"Australie\">Australie</option>\r\n                                <option value=\"Autriche\">Autriche</option>\r\n                                <option value=\"AzerbaÃ¯djan\">AzerbaÃ¯djan</option>\r\n                                <option value=\"Bahamas\">Bahamas</option>\r\n                                <option value=\"BahreÃ¯n\">BahreÃ¯n</option>\r\n                                <option value=\"Bangladesh\">Bangladesh</option>\r\n                                <option value=\"Barbade\">Barbade</option>\r\n                                <option value=\"Belgique\">Belgique</option>\r\n                                <option value=\"Belize\">Belize</option>\r\n                                <option value=\"BÃ©nin\">BÃ©nin</option>\r\n                                <option value=\"Bhoutan\">Bhoutan</option>\r\n                                <option value=\"BiÃ©lorussie\">BiÃ©lorussie</option>\r\n                                <option value=\"Birmanie\">Birmanie</option>\r\n                                <option value=\"Bolivie\">Bolivie</option>\r\n                                <option value=\"Bosnie-HerzÃ©govine\">Bosnie-HerzÃ©govine</option>\r\n                                <option value=\"Botswana\">Botswana</option>\r\n                                <option value=\"BrÃ©sil\">BrÃ©sil</option>\r\n                                <option value=\"Brunei\">Brunei</option>\r\n                                <option value=\"Bulgarie\">Bulgarie</option>\r\n                                <option value=\"Burkina Faso\">Burkina Faso</option>\r\n                                <option value=\"Burundi\">Burundi</option>\r\n                                <option value=\"Cambodge\">Cambodge</option>\r\n                                <option value=\"Cameroun\">Cameroun</option>\r\n                                <option value=\"Canada\">Canada</option>\r\n                                <option value=\"Cap-Vert\">Cap-Vert</option>\r\n                                <option value=\"Chili\">Chili</option>\r\n                                <option value=\"Chine\">Chine</option>\r\n                                <option value=\"Chypre\">Chypre</option>\r\n                                <option value=\"Colombie\">Colombie</option>\r\n                                <option value=\"Comores\">Comores</option>\r\n                                <option value=\"Congo\">Congo</option>\r\n                                <option value=\"CorÃ©e du Nord\">CorÃ©e du Nord</option>\r\n                                <option value=\"CorÃ©e du Sud\">CorÃ©e du Sud</option>\r\n                                <option value=\"Costa Rica\">Costa Rica</option>\r\n                                <option value=\"CÃ´te d'Ivoire\">CÃ´te d'Ivoire</option>\r\n                                <option value=\"Croatie\">Croatie</option>\r\n                                <option value=\"Cuba\">Cuba</option>\r\n                                <option value=\"Danemark\">Danemark</option>\r\n                                <option value=\"Djibouti\">Djibouti</option>\r\n                                <option value=\"Dominique\">Dominique</option>\r\n                                <option value=\"Ã‰gypte\">Ã‰gypte</option>\r\n                                <option value=\"Ã‰mirats Arabes Unis\">Ã‰mirats Arabes Unis</option>\r\n                                <option value=\"Ã‰quateur\">Ã‰quateur</option>\r\n                                <option value=\"Ã‰rythrÃ©e\">Ã‰rythrÃ©e</option>\r\n                                <option value=\"Espagne\">Espagne</option>\r\n                                <option value=\"Estonie\">Estonie</option>\r\n                                <option value=\"Eswatini\">Eswatini</option>\r\n                                <option value=\"Ã‰tats-Unis\">Ã‰tats-Unis</option>\r\n                                <option value=\"Ã‰thiopie\">Ã‰thiopie</option>\r\n                                <option value=\"Fidji\">Fidji</option>\r\n                                <option value=\"Finlande\">Finlande</option>\r\n                                <option value=\"France\">France</option>\r\n                                <option value=\"Gabon\">Gabon</option>\r\n                                <option value=\"Gambie\">Gambie</option>\r\n                                <option value=\"GÃ©orgie\">GÃ©orgie</option>\r\n                                <option value=\"Ghana\">Ghana</option>\r\n                                <option value=\"GrÃ¨ce\">GrÃ¨ce</option>\r\n                                <option value=\"Grenade\">Grenade</option>\r\n                                <option value=\"Guatemala\">Guatemala</option>\r\n                                <option value=\"GuinÃ©e\">GuinÃ©e</option>\r\n                                <option value=\"GuinÃ©e-Bissau\">GuinÃ©e-Bissau</option>\r\n                                <option value=\"GuinÃ©e Ã‰quatoriale\">GuinÃ©e Ã‰quatoriale</option>\r\n                                <option value=\"Guyana\">Guyana</option>\r\n                                <option value=\"HaÃ¯ti\">HaÃ¯ti</option>\r\n                                <option value=\"Honduras\">Honduras</option>\r\n                                <option value=\"Hongrie\">Hongrie</option>\r\n                                <option value=\"Inde\">Inde</option>\r\n                                <option value=\"IndonÃ©sie\">IndonÃ©sie</option>\r\n                                <option value=\"Irak\">Irak</option>\r\n                                <option value=\"Iran\">Iran</option>\r\n                                <option value=\"Irlande\">Irlande</option>\r\n                                <option value=\"Islande\">Islande</option>\r\n                                <option value=\"IsraÃ«l\">IsraÃ«l</option>\r\n                                <option value=\"Italie\">Italie</option>\r\n                                <option value=\"JamaÃ¯que\">JamaÃ¯que</option>\r\n                                <option value=\"Japon\">Japon</option>\r\n                                <option value=\"Jordanie\">Jordanie</option>\r\n                                <option value=\"Kazakhstan\">Kazakhstan</option>\r\n                                <option value=\"Kenya\">Kenya</option>\r\n                                <option value=\"Kirghizistan\">Kirghizistan</option>\r\n                                <option value=\"Kiribati\">Kiribati</option>\r\n                                <option value=\"KoweÃ¯t\">KoweÃ¯t</option>\r\n                                <option value=\"Laos\">Laos</option>\r\n                                <option value=\"Lesotho\">Lesotho</option>\r\n                                <option value=\"Lettonie\">Lettonie</option>\r\n                                <option value=\"Liban\">Liban</option>\r\n                                <option value=\"Liberia\">Liberia</option>\r\n                                <option value=\"Libye\">Libye</option>\r\n                                <option value=\"Liechtenstein\">Liechtenstein</option>\r\n                                <option value=\"Lituanie\">Lituanie</option>\r\n                                <option value=\"Luxembourg\">Luxembourg</option>\r\n                                <option value=\"MacÃ©doine du Nord\">MacÃ©doine du Nord</option>\r\n                                <option value=\"Madagascar\">Madagascar</option>\r\n                                <option value=\"Malaisie\">Malaisie</option>\r\n                                <option value=\"Malawi\">Malawi</option>\r\n                                <option value=\"Maldives\">Maldives</option>\r\n                                <option value=\"Mali\">Mali</option>\r\n                                <option value=\"Malte\">Malte</option>\r\n                                <option value=\"Maroc\">Maroc</option>\r\n                                <option value=\"Marshall\">Marshall</option>\r\n                                <option value=\"Maurice\">Maurice</option>\r\n                                <option value=\"Mauritanie\">Mauritanie</option>\r\n                                <option value=\"Mexique\">Mexique</option>\r\n                                <option value=\"MicronÃ©sie\">MicronÃ©sie</option>\r\n                                <option value=\"Moldavie\">Moldavie</option>\r\n                                <option value=\"Monaco\">Monaco</option>\r\n                                <option value=\"Mongolie\">Mongolie</option>\r\n                                <option value=\"MontÃ©nÃ©gro\">MontÃ©nÃ©gro</option>\r\n                                <option value=\"Mozambique\">Mozambique</option>\r\n                                <option value=\"Namibie\">Namibie</option>\r\n                                <option value=\"Nauru\">Nauru</option>\r\n                                <option value=\"NÃ©pal\">NÃ©pal</option>\r\n                                <option value=\"Nicaragua\">Nicaragua</option>\r\n                                <option value=\"Niger\">Niger</option>\r\n                                <option value=\"Nigeria\">Nigeria</option>\r\n                                <option value=\"NorvÃ¨ge\">NorvÃ¨ge</option>\r\n                                <option value=\"Nouvelle-ZÃ©lande\">Nouvelle-ZÃ©lande</option>\r\n                                <option value=\"Oman\">Oman</option>\r\n                                <option value=\"Ouganda\">Ouganda</option>\r\n                                <option value=\"OuzbÃ©kistan\">OuzbÃ©kistan</option>\r\n                                <option value=\"Pakistan\">Pakistan</option>\r\n                                <option value=\"Palaos\">Palaos</option>\r\n                                <option value=\"Palestine\">Palestine</option>\r\n                                <option value=\"Panama\">Panama</option>\r\n                                <option value=\"Papouasie-Nouvelle-GuinÃ©e\">Papouasie-Nouvelle-GuinÃ©e</option>\r\n                                <option value=\"Paraguay\">Paraguay</option>\r\n                                <option value=\"Pays-Bas\">Pays-Bas</option>\r\n                                <option value=\"PÃ©rou\">PÃ©rou</option>\r\n                                <option value=\"Philippines\">Philippines</option>\r\n                                <option value=\"Pologne\">Pologne</option>\r\n                                <option value=\"Portugal\">Portugal</option>\r\n                                <option value=\"Qatar\">Qatar</option>\r\n                                <option value=\"RÃ©publique Centrafricaine\">RÃ©publique Centrafricaine</option>\r\n                                <option value=\"RÃ©publique DÃ©mocratique du Congo\">RÃ©publique DÃ©mocratique du Congo</option>\r\n                                <option value=\"RÃ©publique Dominicaine\">RÃ©publique Dominicaine</option>\r\n                                <option value=\"RÃ©publique TchÃ¨que\">RÃ©publique TchÃ¨que</option>\r\n                                <option value=\"Roumanie\">Roumanie</option>\r\n                                <option value=\"Royaume-Uni\">Royaume-Uni</option>\r\n                                <option value=\"Russie\">Russie</option>\r\n                                <option value=\"Rwanda\">Rwanda</option>\r\n                                <option value=\"Saint-Christophe-et-NiÃ©vÃ¨s\">Saint-Christophe-et-NiÃ©vÃ¨s</option>\r\n                                <option value=\"Saint-Marin\">Saint-Marin</option>\r\n                                <option value=\"Saint-Vincent-et-les-Grenadines\">Saint-Vincent-et-les-Grenadines</option>\r\n                                <option value=\"Sainte-Lucie\">Sainte-Lucie</option>\r\n                                <option value=\"Salomon\">Salomon</option>\r\n                                <option value=\"Salvador\">Salvador</option>\r\n                                <option value=\"Samoa\">Samoa</option>\r\n                                <option value=\"SÃ£o TomÃ©-et-Principe\">SÃ£o TomÃ©-et-Principe</option>\r\n                                <option value=\"SÃ©nÃ©gal\">SÃ©nÃ©gal</option>\r\n                                <option value=\"Serbie\">Serbie</option>\r\n                                <option value=\"Seychelles\">Seychelles</option>\r\n                                <option value=\"Sierra Leone\">Sierra Leone</option>\r\n                                <option value=\"Singapour\">Singapour</option>\r\n                                <option value=\"Slovaquie\">Slovaquie</option>\r\n                                <option value=\"SlovÃ©nie\">SlovÃ©nie</option>\r\n                                <option value=\"Somalie\">Somalie</option>\r\n                                <option value=\"Soudan\">Soudan</option>\r\n                                <option value=\"Soudan du Sud\">Soudan du Sud</option>\r\n                                <option value=\"Sri Lanka\">Sri Lanka</option>\r\n                                <option value=\"SuÃ¨de\">SuÃ¨de</option>\r\n                                <option value=\"Suisse\">Suisse</option>\r\n                                <option value=\"Suriname\">Suriname</option>\r\n                                <option value=\"Syrie\">Syrie</option>\r\n                                <option value=\"Tadjikistan\">Tadjikistan</option>\r\n                                <option value=\"Tanzanie\">Tanzanie</option>\r\n                                <option value=\"Tchad\">Tchad</option>\r\n                                <option value=\"ThaÃ¯lande\">ThaÃ¯lande</option>\r\n                                <option value=\"Timor Oriental\">Timor Oriental</option>\r\n                                <option value=\"Togo\">Togo</option>\r\n                                <option value=\"Tonga\">Tonga</option>\r\n                                <option value=\"TrinitÃ©-et-Tobago\">TrinitÃ©-et-Tobago</option>\r\n                                <option value=\"Tunisie\">Tunisie</option>\r\n                                <option value=\"TurkmÃ©nistan\">TurkmÃ©nistan</option>\r\n                                <option value=\"Turquie\">Turquie</option>\r\n                                <option value=\"Tuvalu\">Tuvalu</option>\r\n                                <option value=\"Ukraine\">Ukraine</option>\r\n                                <option value=\"Uruguay\">Uruguay</option>\r\n                                <option value=\"Vanuatu\">Vanuatu</option>\r\n                                <option value=\"Vatican\">Vatican</option>\r\n                                <option value=\"Venezuela\">Venezuela</option>\r\n                                <option value=\"ViÃªt Nam\">ViÃªt Nam</option>\r\n                                <option value=\"YÃ©men\">YÃ©men</option>\r\n                                <option value=\"Zambie\">Zambie</option>\r\n                                <option value=\"Zimbabwe\">Zimbabwe</option>\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"warning\" className=\"text-white fw-bold\" onClick={handleSaveAddress}>\r\n                        Enregistrer\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Addresses;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Cards.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":2,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":29},{"ruleId":"no-unused-vars","severity":1,"message":"'handleEditCard' is assigned a value but never used.","line":128,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":128,"endColumn":25},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":243,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10254,10273],"text":"Date d&apos;expiration *"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10254,10273],"text":"Date d&lsquo;expiration *"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10254,10273],"text":"Date d&#39;expiration *"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10254,10273],"text":"Date d&rsquo;expiration *"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Card, Button, Modal, Form, Alert, Badge } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst Cards = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [showCardModal, setShowCardModal] = useState(false);\r\n    const [editingCard, setEditingCard] = useState(null);\r\n\r\n    // Load saved cards\r\n    const [savedCards, setSavedCards] = useState(() => {\r\n        if (!user) return [];\r\n        const saved = localStorage.getItem(`cards_${user.email}`);\r\n        return saved ? JSON.parse(saved) : [];\r\n    });\r\n\r\n    const [cardData, setCardData] = useState({\r\n        cardNumber: '',\r\n        cardHolder: '',\r\n        expiryDate: '',\r\n        cvv: '',\r\n        isDefault: false\r\n    });\r\n\r\n    // Redirect if not logged in\r\n    if (!user) {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <Alert variant=\"light\" className=\"border\">\r\n                    <Alert.Heading>Connexion requise</Alert.Heading>\r\n                    <p>Veuillez vous connecter pour accÃ©der Ã  vos cartes.</p>\r\n                    <Button variant=\"warning\" className=\"text-white\" onClick={() => navigate('/login')}>\r\n                        Se connecter\r\n                    </Button>\r\n                </Alert>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    // Save cards to localStorage\r\n    const saveCards = (cards) => {\r\n        if (user) {\r\n            localStorage.setItem(`cards_${user.email}`, JSON.stringify(cards));\r\n            setSavedCards(cards);\r\n        }\r\n    };\r\n\r\n    // Add or update card\r\n    const handleSaveCard = () => {\r\n        if (!cardData.cardNumber || !cardData.cardHolder || !cardData.expiryDate || !cardData.cvv) {\r\n            alert('Veuillez remplir tous les champs');\r\n            return;\r\n        }\r\n\r\n        if (editingCard) {\r\n            // Update existing card\r\n            const updatedCards = savedCards.map(card =>\r\n                card.id === editingCard.id\r\n                    ? {\r\n                        ...card,\r\n                        cardNumber: cardData.cardNumber,\r\n                        cardHolder: cardData.cardHolder,\r\n                        expiryDate: cardData.expiryDate,\r\n                        lastFour: cardData.cardNumber.slice(-4),\r\n                        isDefault: cardData.isDefault\r\n                    }\r\n                    : card\r\n            );\r\n            saveCards(updatedCards);\r\n        } else {\r\n            // Add new card\r\n            const newCard = {\r\n                id: Date.now().toString(),\r\n                cardNumber: cardData.cardNumber,\r\n                cardHolder: cardData.cardHolder,\r\n                expiryDate: cardData.expiryDate,\r\n                lastFour: cardData.cardNumber.slice(-4),\r\n                isDefault: cardData.isDefault || savedCards.length === 0,\r\n                addedDate: new Date().toISOString()\r\n            };\r\n\r\n            // If this is set as default, remove default from others\r\n            let updatedCards = savedCards;\r\n            if (newCard.isDefault) {\r\n                updatedCards = savedCards.map(card => ({ ...card, isDefault: false }));\r\n            }\r\n\r\n            saveCards([...updatedCards, newCard]);\r\n        }\r\n\r\n        resetForm();\r\n    };\r\n\r\n    // Delete card\r\n    const handleDeleteCard = (id) => {\r\n        if (window.confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cette carte ?')) {\r\n            const newCards = savedCards.filter(card => card.id !== id);\r\n            saveCards(newCards);\r\n        }\r\n    };\r\n\r\n    // Set as default card\r\n    const handleSetDefault = (id) => {\r\n        const updatedCards = savedCards.map(card => ({\r\n            ...card,\r\n            isDefault: card.id === id\r\n        }));\r\n        saveCards(updatedCards);\r\n    };\r\n\r\n    // Reset form\r\n    const resetForm = () => {\r\n        setCardData({\r\n            cardNumber: '',\r\n            cardHolder: '',\r\n            expiryDate: '',\r\n            cvv: '',\r\n            isDefault: false\r\n        });\r\n        setEditingCard(null);\r\n        setShowCardModal(false);\r\n    };\r\n\r\n    // Edit card\r\n    const handleEditCard = (card) => {\r\n        setEditingCard(card);\r\n        setCardData({\r\n            cardNumber: card.cardNumber,\r\n            cardHolder: card.cardHolder,\r\n            expiryDate: card.expiryDate,\r\n            cvv: '***',\r\n            isDefault: card.isDefault\r\n        });\r\n        setShowCardModal(true);\r\n    };\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <h3 className=\"mb-4 fw-bold\">\r\n                <i className=\"bi bi-credit-card me-2\"></i>\r\n                Mes cartes bancaires\r\n            </h3>\r\n\r\n            {savedCards.length === 0 ? (\r\n                <Card className=\"border-0 shadow-sm text-center p-5\">\r\n                    <i className=\"bi bi-credit-card\" style={{ fontSize: '4rem', color: '#ddd' }}></i>\r\n                    <h5 className=\"mt-3 text-muted\">Aucune carte enregistrÃ©e</h5>\r\n                    <p className=\"text-muted\">Ajoutez une carte pour faciliter vos paiements</p>\r\n                    <Button variant=\"warning\" className=\"text-white mt-2\" onClick={() => setShowCardModal(true)}>\r\n                        <i className=\"bi bi-plus-circle me-2\"></i>\r\n                        Ajouter une carte\r\n                    </Button>\r\n                </Card>\r\n            ) : (\r\n                <>\r\n                    <div className=\"mb-3\">\r\n                        <Button variant=\"warning\" className=\"text-white\" onClick={() => setShowCardModal(true)}>\r\n                            <i className=\"bi bi-plus-circle me-2\"></i>\r\n                            Ajouter une carte\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <Row className=\"g-3\">\r\n                        {savedCards.map(card => (\r\n                            <Col md={6} key={card.id}>\r\n                                <Card className=\"border-0 shadow-sm h-100\">\r\n                                    <Card.Body className=\"p-4\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-3\">\r\n                                            <div>\r\n                                                <i className=\"bi bi-credit-card-2-front\" style={{ fontSize: '2rem', color: '#ffc107' }}></i>\r\n                                            </div>\r\n                                            {card.isDefault && (\r\n                                                <Badge bg=\"success\">Par dÃ©faut</Badge>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"mb-3\">\r\n                                            <h5 className=\"mb-1\">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ {card.lastFour}</h5>\r\n                                            <p className=\"text-muted mb-0\">{card.cardHolder}</p>\r\n                                            <small className=\"text-muted\">Expire: {card.expiryDate}</small>\r\n                                        </div>\r\n\r\n                                        <div className=\"d-flex gap-2\">\r\n                                            {!card.isDefault && (\r\n                                                <Button\r\n                                                    variant=\"outline-success\"\r\n                                                    size=\"sm\"\r\n                                                    onClick={() => handleSetDefault(card.id)}\r\n                                                >\r\n                                                    DÃ©finir par dÃ©faut\r\n                                                </Button>\r\n                                            )}\r\n                                            <Button\r\n                                                variant=\"outline-danger\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => handleDeleteCard(card.id)}\r\n                                            >\r\n                                                <i className=\"bi bi-trash\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        ))}\r\n                    </Row>\r\n                </>\r\n            )}\r\n\r\n            {/* Add/Edit Card Modal */}\r\n            <Modal show={showCardModal} onHide={resetForm} centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{editingCard ? 'Modifier' : 'Ajouter'} une carte</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>NumÃ©ro de carte *</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"1234 5678 9012 3456\"\r\n                                value={cardData.cardNumber}\r\n                                onChange={(e) => setCardData({ ...cardData, cardNumber: e.target.value.replace(/\\s/g, '') })}\r\n                                maxLength=\"16\"\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Nom du titulaire *</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"NOM PRENOM\"\r\n                                value={cardData.cardHolder}\r\n                                onChange={(e) => setCardData({ ...cardData, cardHolder: e.target.value.toUpperCase() })}\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Row>\r\n                            <Col>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Date d'expiration *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"MM/AA\"\r\n                                        value={cardData.expiryDate}\r\n                                        onChange={(e) => {\r\n                                            let value = e.target.value.replace(/\\D/g, '');\r\n                                            if (value.length >= 2) {\r\n                                                value = value.slice(0, 2) + '/' + value.slice(2, 4);\r\n                                            }\r\n                                            setCardData({ ...cardData, expiryDate: value });\r\n                                        }}\r\n                                        maxLength=\"5\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>CVV *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        placeholder=\"123\"\r\n                                        value={cardData.cvv}\r\n                                        onChange={(e) => setCardData({ ...cardData, cvv: e.target.value.replace(/\\D/g, '') })}\r\n                                        maxLength=\"3\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Check\r\n                                type=\"checkbox\"\r\n                                label=\"DÃ©finir comme carte par dÃ©faut\"\r\n                                checked={cardData.isDefault}\r\n                                onChange={(e) => setCardData({ ...cardData, isDefault: e.target.checked })}\r\n                            />\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={resetForm}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"warning\" className=\"text-white\" onClick={handleSaveCard}>\r\n                        {editingCard ? 'Modifier' : 'Ajouter'}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Cards;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Cart.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getSubtotal' is assigned a value but never used.","line":19,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'getShippingCost' is assigned a value but never used.","line":20,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'getTax' is assigned a value but never used.","line":21,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'getDiscount' is assigned a value but never used.","line":22,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'getCartTotal' is assigned a value but never used.","line":23,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'cartItems'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":26,"suggestions":[{"desc":"Update the dependencies array to be: [cartItems, cartItems.length]","fix":{"range":[1227,1245],"text":"[cartItems, cartItems.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Button, Card, Row, Col, Form, Alert, Badge, InputGroup } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Cart = () => {\r\n    const {\r\n        cartItems,\r\n        savedItems,\r\n        appliedCoupon,\r\n        removeFromCart,\r\n        updateQuantity,\r\n        clearCart,\r\n        saveForLater,\r\n        moveToCart,\r\n        removeSavedItem,\r\n        applyCoupon,\r\n        removeCoupon,\r\n        getSubtotal,\r\n        getShippingCost,\r\n        getTax,\r\n        getDiscount,\r\n        getCartTotal\r\n    } = useCart();\r\n\r\n    const navigate = useNavigate();\r\n\r\n    // Track which items are selected (checked)\r\n    const [selectedItems, setSelectedItems] = useState({});\r\n\r\n    // Coupon input\r\n    const [couponCode, setCouponCode] = useState('');\r\n    const [couponMessage, setCouponMessage] = useState(null);\r\n\r\n    // Initialize all items as selected when cart changes\r\n    useEffect(() => {\r\n        const initialSelection = {};\r\n        cartItems.forEach(item => {\r\n            initialSelection[item.id] = true;\r\n        });\r\n        setSelectedItems(initialSelection);\r\n    }, [cartItems.length]);\r\n\r\n    // Toggle item selection\r\n    const toggleItemSelection = (itemId) => {\r\n        setSelectedItems(prev => ({\r\n            ...prev,\r\n            [itemId]: !prev[itemId]\r\n        }));\r\n    };\r\n\r\n    // Calculate subtotal only for selected items\r\n    const getSelectedSubtotal = () => {\r\n        return cartItems.reduce((total, item) => {\r\n            if (selectedItems[item.id]) {\r\n                return total + (item.price * item.quantity);\r\n            }\r\n            return total;\r\n        }, 0);\r\n    };\r\n\r\n    // Calculate tax only for selected items (18%)\r\n    const getSelectedTax = () => {\r\n        return 0; // Tax removed\r\n    };\r\n\r\n    // Calculate shipping cost for selected items\r\n    const getSelectedShippingCost = () => {\r\n        if (appliedCoupon?.type === 'free_shipping') return 0;\r\n        return 1000;\r\n    };\r\n\r\n    // Calculate discount for selected items\r\n    const getSelectedDiscount = () => {\r\n        if (!appliedCoupon) return 0;\r\n        const subtotal = getSelectedSubtotal();\r\n\r\n        if (appliedCoupon.type === 'percentage') {\r\n            return subtotal * (appliedCoupon.discount / 100);\r\n        } else if (appliedCoupon.type === 'fixed') {\r\n            return appliedCoupon.discount;\r\n        } else if (appliedCoupon.type === 'free_shipping') {\r\n            return getSelectedShippingCost(); // Logic: discount equals the shipping cost, making it free\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    // Calculate total for selected items\r\n    const getSelectedTotal = () => {\r\n        const subtotal = getSelectedSubtotal();\r\n        const tax = getSelectedTax();\r\n        const shipping = getSelectedShippingCost();\r\n        const discount = getSelectedDiscount();\r\n        return subtotal + tax + shipping - discount;\r\n    };\r\n\r\n    // Handle coupon application\r\n    const handleApplyCoupon = () => {\r\n        if (!couponCode.trim()) {\r\n            setCouponMessage({ type: 'danger', text: 'Veuillez entrer un code promo' });\r\n            return;\r\n        }\r\n\r\n        const result = applyCoupon(couponCode);\r\n        setCouponMessage({\r\n            type: result.success ? 'success' : 'danger',\r\n            text: result.message\r\n        });\r\n\r\n        if (result.success) {\r\n            setCouponCode('');\r\n            setTimeout(() => setCouponMessage(null), 3000);\r\n        }\r\n    };\r\n\r\n    // Get estimated delivery date (3-5 business days)\r\n    const getEstimatedDelivery = () => {\r\n        const today = new Date();\r\n        const deliveryDate = new Date(today);\r\n        deliveryDate.setDate(today.getDate() + 5);\r\n        return deliveryDate.toLocaleDateString('fr-FR', {\r\n            weekday: 'long',\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        });\r\n    };\r\n\r\n    if (cartItems.length === 0 && savedItems.length === 0) {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <div className=\"mb-4\">\r\n                    <i className=\"bi bi-cart-x\" style={{ fontSize: '4rem', color: '#dee2e6' }}></i>\r\n                </div>\r\n                <h2>Votre panier est vide</h2>\r\n                <p className=\"text-muted mb-4\">DÃ©couvrez nos produits et commencez votre shopping !</p>\r\n                <Button variant=\"warning\" className=\"text-white fw-bold px-4 py-2\" onClick={() => navigate('/shop')}>\r\n                    Retour Ã  la boutique\r\n                </Button>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container className=\"py-5\" style={{ backgroundColor: '#f8f9fa', minHeight: '100vh' }}>\r\n            <h3 className=\"mb-4 fw-bold\">\r\n                <i className=\"bi bi-cart3 me-2\"></i>\r\n                Mon Panier ({cartItems.length} {cartItems.length > 1 ? 'articles' : 'article'})\r\n            </h3>\r\n\r\n            <Row>\r\n                <Col lg={8}>\r\n                    {/* Cart Items List */}\r\n                    {cartItems.length > 0 && (\r\n                        <div className=\"d-flex flex-column gap-3 mb-4\">\r\n                            {cartItems.map(item => (\r\n                                <Card\r\n                                    key={item.id}\r\n                                    className=\"shadow-sm border-0 rounded-3 overflow-hidden cart-item-card\"\r\n                                    style={{\r\n                                        opacity: selectedItems[item.id] ? 1 : 0.5,\r\n                                        transition: 'opacity 0.3s ease'\r\n                                    }}\r\n                                >\r\n                                    <Card.Body className=\"p-0\">\r\n                                        <div className=\"d-flex p-3\">\r\n                                            {/* Checkbox for item selection */}\r\n                                            <div className=\"d-flex align-items-center me-2\">\r\n                                                <Form.Check\r\n                                                    type=\"checkbox\"\r\n                                                    checked={selectedItems[item.id] || false}\r\n                                                    onChange={() => toggleItemSelection(item.id)}\r\n                                                    style={{ transform: 'scale(1.2)' }}\r\n                                                />\r\n                                            </div>\r\n\r\n                                            {/* Image */}\r\n                                            <div className=\"d-flex align-items-center me-3\">\r\n                                                <div style={{ width: '80px', height: '100px', flexShrink: 0 }}>\r\n                                                    <img\r\n                                                        src={item.image}\r\n                                                        alt={item.name}\r\n                                                        className=\"w-100 h-100 rounded border\"\r\n                                                        style={{ objectFit: 'contain', padding: '4px' }}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Product Details */}\r\n                                            <div className=\"flex-grow-1\">\r\n                                                <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                                    <div>\r\n                                                        <h6 className=\"fw-bold mb-1\">{item.name}</h6>\r\n                                                        <p className=\"text-muted small mb-1\">\r\n                                                            <i className=\"bi bi-tag me-1\"></i>\r\n                                                            {item.category}\r\n                                                        </p>\r\n                                                        {item.stock && item.stock < 10 && (\r\n                                                            <Badge bg=\"warning\" text=\"dark\" className=\"small\">\r\n                                                                <i className=\"bi bi-exclamation-triangle me-1\"></i>\r\n                                                                Plus que {item.stock} en stock\r\n                                                            </Badge>\r\n                                                        )}\r\n                                                    </div>\r\n\r\n                                                    {/* Action Buttons */}\r\n                                                    <div className=\"d-flex gap-2\">\r\n                                                        <Button\r\n                                                            variant=\"link\"\r\n                                                            className=\"text-primary p-0 text-decoration-none small\"\r\n                                                            onClick={() => saveForLater(item.id)}\r\n                                                            title=\"Enregistrer pour plus tard\"\r\n                                                        >\r\n                                                            <i className=\"bi bi-bookmark me-1\"></i>\r\n                                                            Sauvegarder\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            variant=\"link\"\r\n                                                            className=\"text-danger p-0 text-decoration-none small\"\r\n                                                            onClick={() => removeFromCart(item.id)}\r\n                                                        >\r\n                                                            <i className=\"bi bi-trash me-1\"></i>\r\n                                                            Supprimer\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Price & Quantity Row */}\r\n                                                <div className=\"d-flex justify-content-between align-items-center mt-auto\">\r\n                                                    {/* Quantity Selector */}\r\n                                                    <div className=\"d-flex align-items-center border rounded-pill px-2 py-1\" style={{ backgroundColor: '#fff' }}>\r\n                                                        <Button\r\n                                                            variant=\"link\"\r\n                                                            className=\"text-dark p-0 text-decoration-none fw-bold\"\r\n                                                            style={{ width: '25px' }}\r\n                                                            onClick={() => updateQuantity(item.id, item.quantity - 1)}\r\n                                                            disabled={item.quantity <= 1}\r\n                                                        >âˆ’</Button>\r\n                                                        <span className=\"mx-3 fw-bold small text-warning\">{item.quantity}</span>\r\n                                                        <Button\r\n                                                            variant=\"link\"\r\n                                                            className=\"text-dark p-0 text-decoration-none fw-bold\"\r\n                                                            style={{ width: '25px' }}\r\n                                                            onClick={() => updateQuantity(item.id, item.quantity + 1)}\r\n                                                        >+</Button>\r\n                                                    </div>\r\n\r\n                                                    {/* Price */}\r\n                                                    <div className=\"text-end\">\r\n                                                        <span className=\"d-block text-warning fw-bold fs-5\">\r\n                                                            {((item.price * item.quantity)).toLocaleString()} FCFA\r\n                                                        </span>\r\n                                                        <small className=\"text-muted\">\r\n                                                            {(item.price).toLocaleString()} FCFA / unitÃ©\r\n                                                        </small>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Saved Items Section */}\r\n                    {savedItems.length > 0 && (\r\n                        <Card className=\"shadow-sm border-0 rounded-3 mb-3\">\r\n                            <Card.Header className=\"bg-light border-0\">\r\n                                <h5 className=\"mb-0 fw-bold\">\r\n                                    <i className=\"bi bi-bookmark-fill me-2 text-primary\"></i>\r\n                                    EnregistrÃ©s pour plus tard ({savedItems.length})\r\n                                </h5>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row className=\"g-3\">\r\n                                    {savedItems.map(item => (\r\n                                        <Col md={6} key={item.id}>\r\n                                            <div className=\"d-flex border rounded p-2\">\r\n                                                <img\r\n                                                    src={item.image}\r\n                                                    alt={item.name}\r\n                                                    style={{ width: '60px', height: '60px', objectFit: 'contain' }}\r\n                                                    className=\"me-2\"\r\n                                                />\r\n                                                <div className=\"flex-grow-1\">\r\n                                                    <h6 className=\"small mb-1\">{item.name}</h6>\r\n                                                    <p className=\"text-warning fw-bold small mb-2\">{(item.price).toLocaleString()} FCFA</p>\r\n                                                    <div className=\"d-flex gap-2\">\r\n                                                        <Button\r\n                                                            size=\"sm\"\r\n                                                            variant=\"outline-primary\"\r\n                                                            onClick={() => moveToCart(item.id)}\r\n                                                        >\r\n                                                            <i className=\"bi bi-cart-plus me-1\"></i>\r\n                                                            Ajouter\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            size=\"sm\"\r\n                                                            variant=\"outline-danger\"\r\n                                                            onClick={() => removeSavedItem(item.id)}\r\n                                                        >\r\n                                                            <i className=\"bi bi-trash\"></i>\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </Col>\r\n                                    ))}\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    )}\r\n\r\n                    {cartItems.length > 0 && (\r\n                        <div className=\"d-flex justify-content-between align-items-center mt-3\">\r\n                            <Button variant=\"outline-secondary\" size=\"sm\" onClick={() => navigate('/shop')}>\r\n                                <i className=\"bi bi-arrow-left me-1\"></i>\r\n                                Continuer mes achats\r\n                            </Button>\r\n                            <Button variant=\"outline-danger\" size=\"sm\" onClick={clearCart}>\r\n                                <i className=\"bi bi-trash me-1\"></i>\r\n                                Vider le panier\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </Col>\r\n\r\n                {/* Order Summary */}\r\n                {cartItems.length > 0 && (\r\n                    <Col lg={4}>\r\n                        <Card className=\"shadow-sm border-0\">\r\n                            <Card.Body className=\"p-4\">\r\n                                <h4 className=\"fw-bold mb-4\">RÃ©sumÃ© de la commande</h4>\r\n\r\n                                {/* Coupon Section */}\r\n                                <div className=\"mb-4\">\r\n                                    <label className=\"form-label fw-bold small\">Code promo</label>\r\n                                    {appliedCoupon ? (\r\n                                        <div className=\"d-flex align-items-center justify-content-between bg-success bg-opacity-10 p-2 rounded\">\r\n                                            <div>\r\n                                                <Badge bg=\"success\" className=\"me-2\">{appliedCoupon.code}</Badge>\r\n                                                <small className=\"text-success\">{appliedCoupon.description}</small>\r\n                                            </div>\r\n                                            <Button\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                className=\"text-danger p-0\"\r\n                                                onClick={removeCoupon}\r\n                                            >\r\n                                                <i className=\"bi bi-x-circle\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <>\r\n                                            <InputGroup>\r\n                                                <Form.Control\r\n                                                    type=\"text\"\r\n                                                    placeholder=\"Entrez le code\"\r\n                                                    value={couponCode}\r\n                                                    onChange={(e) => setCouponCode(e.target.value.toUpperCase())}\r\n                                                    onKeyPress={(e) => e.key === 'Enter' && handleApplyCoupon()}\r\n                                                />\r\n                                                <Button variant=\"outline-warning\" onClick={handleApplyCoupon}>\r\n                                                    Appliquer\r\n                                                </Button>\r\n                                            </InputGroup>\r\n                                            <small className=\"text-muted d-block mt-1\">\r\n                                                Essayez: WELCOME10, SAVE20, FREESHIP\r\n                                            </small>\r\n                                        </>\r\n                                    )}\r\n                                    {couponMessage && (\r\n                                        <Alert variant={couponMessage.type} className=\"mt-2 mb-0 py-2 small\">\r\n                                            {couponMessage.text}\r\n                                        </Alert>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <hr />\r\n\r\n                                {/* Price Breakdown */}\r\n                                <div className=\"d-flex justify-content-between mb-2\">\r\n                                    <span className=\"text-muted\">Sous-total</span>\r\n                                    <span className=\"fw-bold\">{(getSelectedSubtotal()).toLocaleString()} FCFA</span>\r\n                                </div>\r\n\r\n\r\n                                <div className=\"d-flex justify-content-between mb-2\">\r\n                                    <span className=\"text-muted\">Livraison</span>\r\n                                    {getSelectedShippingCost() === 0 ? (\r\n                                        <span className=\"text-success fw-bold\">\r\n                                            <i className=\"bi bi-check-circle me-1\"></i>\r\n                                            Gratuite\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span className=\"fw-bold\">{(getSelectedShippingCost()).toLocaleString()} FCFA</span>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {getSelectedDiscount() > 0 && (\r\n                                    <div className=\"d-flex justify-content-between mb-2\">\r\n                                        <span className=\"text-success\">RÃ©duction</span>\r\n                                        <span className=\"text-success fw-bold\">-{getSelectedDiscount().toLocaleString()} FCFA</span>\r\n                                    </div>\r\n                                )}\r\n\r\n\r\n                                <hr className=\"my-3\" />\r\n\r\n                                <div className=\"d-flex justify-content-between mb-4 align-items-center\">\r\n                                    <span className=\"h5 fw-bold mb-0\">Total</span>\r\n                                    <span className=\"h4 text-warning fw-bold mb-0\">{(getSelectedTotal()).toLocaleString()} FCFA</span>\r\n                                </div>\r\n\r\n                                {/* Delivery Info */}\r\n                                <div className=\"bg-light p-3 rounded mb-3\">\r\n                                    <small className=\"text-muted d-block mb-1\">\r\n                                        <i className=\"bi bi-truck me-2\"></i>\r\n                                        Livraison estimÃ©e\r\n                                    </small>\r\n                                    <small className=\"fw-bold\">{getEstimatedDelivery()}</small>\r\n                                </div>\r\n\r\n                                <Button\r\n                                    variant=\"warning\"\r\n                                    size=\"lg\"\r\n                                    className=\"w-100 text-white fw-bold py-3 shadow-sm rounded-3\"\r\n                                    onClick={() => {\r\n                                        // Check if at least one item is selected\r\n                                        const hasSelectedItems = Object.values(selectedItems).some(isSelected => isSelected);\r\n\r\n                                        if (!hasSelectedItems) {\r\n                                            alert('âš ï¸ Veuillez sÃ©lectionner au moins un article pour continuer');\r\n                                            return;\r\n                                        }\r\n\r\n                                        navigate('/checkout');\r\n                                    }}\r\n                                >\r\n                                    VALIDER MA COMMANDE\r\n                                    <i className=\"bi bi-chevron-right ms-2 small\"></i>\r\n                                </Button>\r\n\r\n                                <div className=\"text-center mt-3\">\r\n                                    <small className=\"text-muted\">\r\n                                        <i className=\"bi bi-lock-fill me-1\"></i>\r\n                                        Paiement 100% SÃ©curisÃ©\r\n                                    </small>\r\n                                </div>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                )}\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Checkout.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ListGroup' is defined but never used.","line":1,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":81},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":407,"column":94,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[19580,19598],"text":"ðŸ‡¨ðŸ‡® CÃ´te d&apos;Ivoire"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[19580,19598],"text":"ðŸ‡¨ðŸ‡® CÃ´te d&lsquo;Ivoire"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[19580,19598],"text":"ðŸ‡¨ðŸ‡® CÃ´te d&#39;Ivoire"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[19580,19598],"text":"ðŸ‡¨ðŸ‡® CÃ´te d&rsquo;Ivoire"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'details' is defined but never used.","line":549,"column":82,"nodeType":"Identifier","messageId":"unusedVar","endLine":549,"endColumn":89},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":578,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[31799,31818],"text":"Supprimer l&apos;adresse"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[31799,31818],"text":"Supprimer l&lsquo;adresse"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[31799,31818],"text":"Supprimer l&#39;adresse"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[31799,31818],"text":"Supprimer l&rsquo;adresse"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Card, Form, Button, Alert, Modal, Badge, ListGroup } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useData } from '../context/DataContext';\r\nimport { useWallet } from '../context/WalletContext';\r\nimport API_BASE_URL from '../config';\r\n\r\n// Payment Imports\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\r\n\r\n// Initialize Stripe (Replace placeholder with your actual key from .env)\r\nconst stripePromise = loadStripe(import.meta.env.VITE_STRIPE_PUBLIC_KEY || 'pk_test_TYooMQauvdEDq54NiTphI7jx');\r\n\r\nconst CheckoutContent = () => {\r\n    const { cartItems, getCartTotal, clearCart } = useCart();\r\n    const { user } = useAuth();\r\n    const { addOrder } = useData();\r\n    const { balance, payWithWallet, hasSufficientBalance } = useWallet();\r\n    const navigate = useNavigate();\r\n\r\n    // Stripe Hooks\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n\r\n    const [orderPlaced, setOrderPlaced] = useState(false);\r\n    const [completedOrder, setCompletedOrder] = useState(null);\r\n    const [showNewAddressForm, setShowNewAddressForm] = useState(false);\r\n    const [selectedAddressId, setSelectedAddressId] = useState(null);\r\n    const [paymentMethod, setPaymentMethod] = useState('wallet');\r\n    const [paymentError, setPaymentError] = useState(null);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [estimatedDelivery, setEstimatedDelivery] = useState('');\r\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n    const [addressToDelete, setAddressToDelete] = useState(null);\r\n\r\n    // Load saved addresses\r\n    const [savedAddresses, setSavedAddresses] = useState(() => {\r\n        if (!user) return [];\r\n        const saved = localStorage.getItem(`addresses_${user.email}`);\r\n        return saved ? JSON.parse(saved) : [];\r\n    });\r\n\r\n    const [shippingData, setShippingData] = useState({\r\n        fullName: user?.name || '',\r\n        email: user?.email || '',\r\n        phone: '',\r\n        address: '',\r\n        city: '',\r\n        postalCode: '',\r\n        country: 'Turquie'\r\n    });\r\n\r\n    const calculateDeliveryDate = (country) => {\r\n        const today = new Date();\r\n        let daysToAdd = 14; // Default\r\n\r\n        const deliveryTimes = {\r\n            'Tchad': 5,\r\n            'France': 7,\r\n            'Turquie': 7,\r\n            'Canada': 10,\r\n            'Ã‰tats-Unis': 10,\r\n            'Maroc': 8,\r\n            'SÃ©nÃ©gal': 8,\r\n            'Cameroun': 8,\r\n            'CÃ´te d\\'Ivoire': 8,\r\n        };\r\n\r\n        if (deliveryTimes[country]) {\r\n            daysToAdd = deliveryTimes[country];\r\n        }\r\n\r\n        const deliveryDate = new Date(today);\r\n        deliveryDate.setDate(today.getDate() + daysToAdd);\r\n\r\n        return deliveryDate.toLocaleDateString('fr-FR', {\r\n            weekday: 'long',\r\n            day: 'numeric',\r\n            month: 'long',\r\n            year: 'numeric'\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (shippingData.country) {\r\n            setEstimatedDelivery(calculateDeliveryDate(shippingData.country));\r\n        }\r\n    }, [shippingData.country]);\r\n\r\n    // Load selected address data\r\n    useEffect(() => {\r\n        if (selectedAddressId) {\r\n            const address = savedAddresses.find(addr => addr.id === selectedAddressId);\r\n            if (address) {\r\n                setShippingData({\r\n                    fullName: address.fullName,\r\n                    email: user?.email || '',\r\n                    phone: address.phone,\r\n                    address: address.address,\r\n                    city: address.city,\r\n                    postalCode: address.postalCode,\r\n                    country: address.country\r\n                });\r\n            }\r\n        }\r\n    }, [selectedAddressId, savedAddresses, user]);\r\n\r\n    // Save addresses to localStorage\r\n    const saveAddresses = (addresses) => {\r\n        if (user) {\r\n            localStorage.setItem(`addresses_${user.email}`, JSON.stringify(addresses));\r\n            setSavedAddresses(addresses);\r\n        }\r\n    };\r\n\r\n    // Delete address\r\n    const handleDeleteClick = (id) => {\r\n        setAddressToDelete(id);\r\n        setShowDeleteModal(true);\r\n    };\r\n\r\n    const confirmDelete = () => {\r\n        if (addressToDelete) {\r\n            const newAddresses = savedAddresses.filter(addr => addr.id !== addressToDelete);\r\n            saveAddresses(newAddresses);\r\n            if (selectedAddressId === addressToDelete) {\r\n                setSelectedAddressId(null);\r\n            }\r\n            setShowDeleteModal(false);\r\n            setAddressToDelete(null);\r\n        }\r\n    };\r\n\r\n    const validateAddress = () => {\r\n        if (!selectedAddressId && (savedAddresses.length === 0 || showNewAddressForm)) {\r\n            if (!shippingData.fullName || !shippingData.phone || !shippingData.address || !shippingData.city) {\r\n                alert('Veuillez remplir tous les champs obligatoires de l\\'adresse');\r\n                return false;\r\n            }\r\n        }\r\n        if (!selectedAddressId && savedAddresses.length > 0 && !showNewAddressForm) {\r\n            alert('Veuillez sÃ©lectionner une adresse de livraison');\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const processOrderSuccess = (orderData) => {\r\n        addOrder(orderData);\r\n        // Send confirmation email via backend\r\n        fetch(`${API_BASE_URL}/api/admin/order-email`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ order: orderData, status: 'ConfirmÃ©e' }),\r\n        }).catch(err => console.error('âŒ Error sending confirmation email:', err));\r\n\r\n        setCompletedOrder(orderData);\r\n        clearCart();\r\n        setOrderPlaced(true);\r\n        setIsProcessing(false);\r\n        window.scrollTo(0, 0);\r\n    };\r\n\r\n    const handleCardPayment = async () => {\r\n        if (!stripe || !elements) return;\r\n\r\n        setIsProcessing(true);\r\n        setPaymentError(null);\r\n\r\n        try {\r\n            // 1. Create PaymentIntent on Backend\r\n            const response = await fetch(`${API_BASE_URL}/api/payment/create-payment-intent`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ amount: getCartTotal(), currency: 'xof' }), // Assuming backend handles currency\r\n            });\r\n            const data = await response.json();\r\n\r\n            if (!data.clientSecret) {\r\n                throw new Error(data.error || 'Failed to initialize payment');\r\n            }\r\n\r\n            // 2. Confirm Card Payment\r\n            const result = await stripe.confirmCardPayment(data.clientSecret, {\r\n                payment_method: {\r\n                    card: elements.getElement(CardElement),\r\n                    billing_details: {\r\n                        name: shippingData.fullName,\r\n                        email: user.email,\r\n                    },\r\n                },\r\n            });\r\n\r\n            if (result.error) {\r\n                throw new Error(result.error.message);\r\n            } else if (result.paymentIntent.status === 'succeeded') {\r\n                // Payment Success\r\n                return true;\r\n            }\r\n        } catch (err) {\r\n            setPaymentError(`âŒ Erreur de paiement: ${err.message}`);\r\n            setIsProcessing(false);\r\n            return false;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        if (e) e.preventDefault();\r\n\r\n        if (!validateAddress()) return;\r\n\r\n        setPaymentError(null);\r\n\r\n        // Prepare Order Data\r\n        const orderData = {\r\n            id: `order_${Date.now()}`,\r\n            customerId: user.id,\r\n            customerName: user.name,\r\n            email: user.email,\r\n            phone: shippingData.phone,\r\n            date: new Date().toISOString(),\r\n            status: 'En attente',\r\n            subtotal: getCartTotal() - 1000,\r\n            shippingCost: 1000,\r\n            total: getCartTotal(),\r\n            paymentMethod: paymentMethod,\r\n            items: cartItems.map(item => ({\r\n                id: item.id,\r\n                name: item.name,\r\n                price: item.price,\r\n                quantity: item.quantity,\r\n                image: item.image\r\n            })),\r\n            shippingAddress: {\r\n                fullName: shippingData.fullName,\r\n                address: shippingData.address,\r\n                city: shippingData.city,\r\n                postalCode: shippingData.postalCode,\r\n                country: shippingData.country,\r\n                phone: shippingData.phone\r\n            }\r\n        };\r\n\r\n        if (paymentMethod === 'wallet') {\r\n            if (!hasSufficientBalance(getCartTotal())) {\r\n                setPaymentError('âŒ Solde insuffisant dans votre wallet.');\r\n                window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                return;\r\n            }\r\n            const success = await payWithWallet(getCartTotal());\r\n            if (success) {\r\n                processOrderSuccess(orderData);\r\n            } else {\r\n                setPaymentError('âŒ Erreur lors du paiement wallet.');\r\n            }\r\n        } else if (paymentMethod === 'card') {\r\n            const success = await handleCardPayment();\r\n            if (success) {\r\n                processOrderSuccess(orderData);\r\n            }\r\n        }\r\n        // PayPal is handled by its own component buttons\r\n    };\r\n\r\n    // Redirect if cart is empty\r\n    if (cartItems.length === 0 && !orderPlaced) {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <Alert variant=\"light\" className=\"border\">\r\n                    <Alert.Heading>Panier vide</Alert.Heading>\r\n                    <p>Votre panier est vide. Ajoutez des produits pour passer une commande.</p>\r\n                    <Button variant=\"warning\" className=\"text-white\" onClick={() => navigate('/shop')}>\r\n                        Voir la boutique\r\n                    </Button>\r\n                </Alert>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    if (orderPlaced && completedOrder) {\r\n\r\n        return (\r\n            <Container className=\"py-5\">\r\n                <Row className=\"justify-content-center\">\r\n                    <Col lg={8}>\r\n                        <Card className=\"border-0 shadow-sm mb-4 text-center\">\r\n                            <Card.Body className=\"p-5\">\r\n                                <div className=\"bg-success rounded-circle d-inline-flex align-items-center justify-content-center mb-4\"\r\n                                    style={{ width: '80px', height: '80px' }}>\r\n                                    <i className=\"bi bi-check-lg text-white\" style={{ fontSize: '3rem' }}></i>\r\n                                </div>\r\n                                <h2 className=\"fw-bold mb-2\">Commande confirmÃ©e !</h2>\r\n                                <Badge bg=\"warning\" className=\"text-white px-3 py-2\">\r\n                                    NumÃ©ro: {completedOrder.id}\r\n                                </Badge>\r\n                                {/* ... Simplified for brevity, original UI was good ... */}\r\n                            </Card.Body>\r\n                        </Card>\r\n                        <div className=\"d-flex gap-3 justify-content-center\">\r\n                            <Button variant=\"warning\" className=\"text-white px-4\" onClick={() => navigate('/profile/orders')}>\r\n                                Mes commandes\r\n                            </Button>\r\n                            <Button variant=\"outline-secondary\" onClick={() => navigate('/shop')}>\r\n                                Continuer les achats\r\n                            </Button>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container className=\"py-4 py-lg-5\" style={{ backgroundColor: '#f8f9fa', minHeight: '100vh' }}>\r\n            <div className=\"mb-4 d-flex align-items-center gap-2\">\r\n                <Button variant=\"link\" onClick={() => navigate('/cart')} className=\"p-0 text-decoration-none text-muted\">\r\n                    <i className=\"bi bi-arrow-left me-1\"></i> Retour au panier\r\n                </Button>\r\n            </div>\r\n\r\n            {paymentError && (\r\n                <Alert variant=\"danger\" className=\"mb-4 border-0 shadow-sm\" dismissible onClose={() => setPaymentError(null)}>\r\n                    <i className=\"bi bi-exclamation-triangle-fill me-2\"></i>\r\n                    {paymentError}\r\n                </Alert>\r\n            )}\r\n\r\n            <Row className=\"g-4 align-items-start\">\r\n                <Col lg={8}>\r\n                    {/* ADDRESS SECTION */}\r\n                    <div className=\"d-flex align-items-center mb-3\">\r\n                        <div className=\"bg-warning text-white rounded-circle d-flex align-items-center justify-content-center fw-bold me-3\" style={{ width: '32px', height: '32px' }}>1</div>\r\n                        <h4 className=\"mb-0 fw-bold\">Adresse de livraison</h4>\r\n                    </div>\r\n\r\n                    <Card className=\"border-0 shadow-sm mb-4\" style={{ borderRadius: '15px' }}>\r\n                        <Card.Body className=\"p-4\">\r\n                            {/* Saved Addresses Logic */}\r\n                            {savedAddresses.length > 0 && (\r\n                                <div className=\"mb-4\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                                        <h6 className=\"fw-bold mb-0\">Vos adresses</h6>\r\n                                        <Button variant=\"link\" className=\"p-0 text-warning fw-bold text-decoration-none\" onClick={() => { setShowNewAddressForm(true); setSelectedAddressId(null); }}>\r\n                                            + Nouvelle adresse\r\n                                        </Button>\r\n                                    </div>\r\n                                    <Row className=\"g-3\">\r\n                                        {savedAddresses.map(address => (\r\n                                            <Col md={6} key={address.id}>\r\n                                                <div\r\n                                                    className={`p-2 rounded-4 border-2 h-100 cursor-pointer ${selectedAddressId === address.id ? 'border-warning bg-light' : 'border-light bg-white border'}`}\r\n                                                    onClick={() => { setSelectedAddressId(address.id); setShowNewAddressForm(false); }}\r\n                                                >\r\n                                                    <div className=\"d-flex justify-content-between\">\r\n                                                        <h6 className=\"fw-bold\">{address.title || 'Maison'}</h6>\r\n                                                        <Form.Check type=\"radio\" checked={selectedAddressId === address.id} readOnly />\r\n                                                    </div>\r\n                                                    <p className=\"mb-0 small text-muted\">{address.address}, {address.city}</p>\r\n                                                    <div className=\"d-flex justify-content-end mt-2\">\r\n                                                        <Button\r\n                                                            variant=\"outline-danger\"\r\n                                                            size=\"sm\"\r\n                                                            className=\"border-0 bg-light-danger\"\r\n                                                            style={{ borderRadius: '8px' }}\r\n                                                            onClick={(e) => { e.stopPropagation(); handleDeleteClick(address.id); }}\r\n                                                        >\r\n                                                            <i className=\"bi bi-trash me-2\"></i> supprimer\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </Col>\r\n                                        ))}\r\n                                    </Row>\r\n                                </div>\r\n                            )}\r\n\r\n                            {(savedAddresses.length === 0 || showNewAddressForm) && (\r\n                                <div className=\"bg-light p-4 rounded-4\">\r\n                                    <h6 className=\"fw-bold mb-3\">Nouvelle adresse</h6>\r\n                                    <Form>\r\n                                        <Row className=\"g-3\">\r\n                                            <Col md={6}><Form.Control placeholder=\"Nom complet\" value={shippingData.fullName} onChange={e => setShippingData({ ...shippingData, fullName: e.target.value })} /></Col>\r\n                                            <Col md={6}><Form.Control placeholder=\"TÃ©lÃ©phone\" value={shippingData.phone} onChange={e => setShippingData({ ...shippingData, phone: e.target.value })} /></Col>\r\n                                            <Col md={12}><Form.Control placeholder=\"Adresse\" value={shippingData.address} onChange={e => setShippingData({ ...shippingData, address: e.target.value })} /></Col>\r\n                                            <Col md={6}><Form.Control placeholder=\"Ville\" value={shippingData.city} onChange={e => setShippingData({ ...shippingData, city: e.target.value })} /></Col>\r\n                                            <Col md={6}><Form.Control placeholder=\"Code Postal\" value={shippingData.postalCode} onChange={e => setShippingData({ ...shippingData, postalCode: e.target.value })} /></Col>\r\n                                            <Col md={12}>\r\n                                                <Form.Select\r\n                                                    value={shippingData.country}\r\n                                                    onChange={(e) => setShippingData({ ...shippingData, country: e.target.value })}\r\n                                                    required\r\n                                                >\r\n                                                    <option value=\"\">SÃ©lectionnez un pays</option>\r\n                                                    <option value=\"Tchad\">ðŸ‡¹ðŸ‡© Tchad</option>\r\n                                                    <option value=\"France\">ðŸ‡«ðŸ‡· France</option>\r\n                                                    <option value=\"Turquie\">ðŸ‡¹ðŸ‡· Turquie</option>\r\n                                                    <option value=\"Canada\">ðŸ‡¨ðŸ‡¦ Canada</option>\r\n                                                    <option value=\"Ã‰tats-Unis\">ðŸ‡ºðŸ‡¸ Ã‰tats-Unis</option>\r\n                                                    <option value=\"Maroc\">ðŸ‡²ðŸ‡¦ Maroc</option>\r\n                                                    <option value=\"SÃ©nÃ©gal\">ðŸ‡¸ðŸ‡³ SÃ©nÃ©gal</option>\r\n                                                    <option value=\"Cameroun\">ðŸ‡¨ðŸ‡² Cameroun</option>\r\n                                                    <option value=\"CÃ´te d'Ivoire\">ðŸ‡¨ðŸ‡® CÃ´te d'Ivoire</option>\r\n                                                    <option value=\"Autre\">ðŸŒ Autre pays</option>\r\n                                                </Form.Select>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Form>\r\n                                </div>\r\n                            )}\r\n                        </Card.Body>\r\n                    </Card>\r\n\r\n                    {/* PAYMENT SECTION */}\r\n                    <div className=\"d-flex align-items-center mb-3\">\r\n                        <div className=\"bg-warning text-white rounded-circle d-flex align-items-center justify-content-center fw-bold me-3\" style={{ width: '32px', height: '32px' }}>2</div>\r\n                        <h4 className=\"mb-0 fw-bold\">Paiement</h4>\r\n                    </div>\r\n\r\n                    <Card className=\"border-0 shadow-sm mb-4\" style={{ borderRadius: '15px' }}>\r\n                        <Card.Body className=\"p-4\">\r\n                            {/* Wallet */}\r\n                            <div className={`p-2 rounded-4 border-2 mb-2 cursor-pointer ${paymentMethod === 'wallet' ? 'border-warning bg-light' : 'border-light'}`} onClick={() => setPaymentMethod('wallet')}>\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div className=\"d-flex align-items-center\">\r\n                                        <i className=\"bi bi-wallet2 fs-5 me-2 text-warning\"></i>\r\n                                        <div>\r\n                                            <h6 className=\"fw-bold mb-0\">Wallet</h6>\r\n                                            <small className=\"text-muted\">Solde: {balance.toLocaleString()} FCFA</small>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Form.Check type=\"radio\" checked={paymentMethod === 'wallet'} readOnly />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Stripe Card */}\r\n                            <div className={`p-2 rounded-4 border-2 mb-2 cursor-pointer ${paymentMethod === 'card' ? 'border-warning bg-light' : 'border-light'}`} onClick={() => setPaymentMethod('card')}>\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div className=\"d-flex align-items-center\">\r\n                                        <i className=\"bi bi-credit-card fs-5 me-2 text-primary\"></i>\r\n                                        <div>\r\n                                            <h6 className=\"fw-bold mb-0\">Carte Bancaire</h6>\r\n                                            <small className=\"text-muted\">SÃ©curisÃ© par Stripe</small>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Form.Check type=\"radio\" checked={paymentMethod === 'card'} readOnly />\r\n                                </div>\r\n                                {paymentMethod === 'card' && (\r\n                                    <div className=\"mt-3 p-3 bg-white rounded-3 border focus-ring\">\r\n                                        <CardElement options={{\r\n                                            style: {\r\n                                                base: {\r\n                                                    fontSize: '16px',\r\n                                                    color: '#424770',\r\n                                                    '::placeholder': { color: '#aab7c4' },\r\n                                                    iconColor: '#666e8e',\r\n                                                },\r\n                                                invalid: { color: '#9e2146' },\r\n                                            },\r\n                                            hidePostalCode: true, // We already collect postal code in shipping address\r\n                                        }} />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* PayPal */}\r\n                            <div className={`p-2 rounded-4 border-2 mb-2 cursor-pointer ${paymentMethod === 'paypal' ? 'border-warning bg-light' : 'border-light'}`} onClick={() => setPaymentMethod('paypal')}>\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <div className=\"d-flex align-items-center\">\r\n                                        <i className=\"bi bi-paypal fs-5 me-2 text-primary\"></i>\r\n                                        <h6 className=\"fw-bold mb-0\">PayPal</h6>\r\n                                    </div>\r\n                                    <Form.Check type=\"radio\" checked={paymentMethod === 'paypal'} readOnly />\r\n                                </div>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n\r\n                <Col lg={4}>\r\n                    <div className=\"sticky-top\" style={{ top: '100px' }}>\r\n                        <Card className=\"border-0 shadow-sm\" style={{ borderRadius: '20px' }}>\r\n                            <Card.Body className=\"p-4 bg-white\">\r\n                                <h5 className=\"fw-bold mb-4\">RÃ©sumÃ©</h5>\r\n                                <div className=\"d-flex justify-content-between mb-2\"><span>Sous-total</span><span>{(getCartTotal() - 1000).toLocaleString()} FCFA</span></div>\r\n                                <div className=\"d-flex justify-content-between mb-2\"><span>Livraison</span><span>1 000 FCFA</span></div>\r\n                                <div className=\"d-flex justify-content-between mb-2 text-success\">\r\n                                    <span><i className=\"bi bi-truck me-2\"></i>Livraison estimÃ©e</span>\r\n                                    <span className=\"fw-bold\">{estimatedDelivery}</span>\r\n                                </div>\r\n                                <hr />\r\n                                <div className=\"d-flex justify-content-between mb-4\"><strong className=\"fs-4\">Total</strong><strong className=\"fs-4 text-warning\">{getCartTotal().toLocaleString()} FCFA</strong></div>\r\n\r\n                                {paymentMethod === 'paypal' ? (\r\n                                    <PayPalButtons\r\n                                        style={{ layout: \"vertical\" }}\r\n                                        createOrder={(data, actions) => {\r\n                                            if (!validateAddress()) return Promise.reject(\"Invalid Address\");\r\n                                            // Map country names to ISO 3166-1 alpha-2 codes\r\n                                            const countryCodeMap = {\r\n                                                'France': 'FR',\r\n                                                'Ã‰tats-Unis': 'US',\r\n                                                'Canada': 'CA',\r\n                                                'Turquie': 'TR',\r\n                                                'Maroc': 'MA',\r\n                                                'SÃ©nÃ©gal': 'SN',\r\n                                                'Cameroun': 'CM',\r\n                                                'CÃ´te d\\'Ivoire': 'CI',\r\n                                                'Tchad': 'TD'\r\n                                            };\r\n                                            const countryCode = countryCodeMap[shippingData.country] || 'FR';\r\n\r\n                                            return actions.order.create({\r\n                                                payer: {\r\n                                                    name: {\r\n                                                        given_name: shippingData.fullName.split(\" \")[0] || \"Client\",\r\n                                                        surname: shippingData.fullName.split(\" \").slice(1).join(\" \") || \"Client\"\r\n                                                    },\r\n                                                    email_address: shippingData.email,\r\n                                                    address: {\r\n                                                        address_line_1: shippingData.address,\r\n                                                        admin_area_2: shippingData.city,\r\n                                                        postal_code: shippingData.postalCode,\r\n                                                        country_code: countryCode\r\n                                                    }\r\n                                                },\r\n                                                purchase_units: [{\r\n                                                    amount: {\r\n                                                        currency_code: \"EUR\",\r\n                                                        value: (getCartTotal() / 655.957).toFixed(2)\r\n                                                    },\r\n                                                    shipping: {\r\n                                                        name: { full_name: shippingData.fullName },\r\n                                                        address: {\r\n                                                            address_line_1: shippingData.address,\r\n                                                            admin_area_2: shippingData.city,\r\n                                                            postal_code: shippingData.postalCode,\r\n                                                            country_code: countryCode\r\n                                                        }\r\n                                                    }\r\n                                                }]\r\n                                            });\r\n                                        }}\r\n                                        onApprove={(data, actions) => {\r\n                                            return actions.order.capture().then((details) => {\r\n                                                // Prepare Order Data (Similar to generic helper)\r\n                                                // Simplified for brevity in this inline logic\r\n                                                const orderData = {\r\n                                                    id: `order_${Date.now()}`,\r\n                                                    customerId: user.id, customerName: user.name, email: user.email,\r\n                                                    phone: shippingData.phone, date: new Date().toISOString(),\r\n                                                    status: 'En attente', subtotal: getCartTotal() - 1000, shippingCost: 1000,\r\n                                                    total: getCartTotal(), paymentMethod: 'paypal',\r\n                                                    items: cartItems, shippingAddress: shippingData\r\n                                                };\r\n                                                processOrderSuccess(orderData);\r\n                                            });\r\n                                        }}\r\n                                    />\r\n                                ) : (\r\n                                    <Button variant=\"warning\" size=\"lg\" className=\"w-100 text-white fw-bold\" onClick={handleSubmit} disabled={isProcessing}>\r\n                                        {isProcessing ? 'Traitement...' : 'CONFIRMER & PAYER'}\r\n                                    </Button>\r\n                                )}\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            <Modal show={showDeleteModal} onHide={() => setShowDeleteModal(false)} centered>\r\n                <Modal.Header closeButton className=\"border-0 pb-0\">\r\n                    <Modal.Title className=\"fs-5 fw-bold\">Supprimer l'adresse</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"text-center py-4\">\r\n                    <div className=\"mb-3 bg-danger bg-opacity-10 text-danger rounded-circle d-inline-flex align-items-center justify-content-center\" style={{ width: '60px', height: '60px' }}>\r\n                        <i className=\"bi bi-trash3 fs-3\"></i>\r\n                    </div>\r\n                    <p className=\"mb-0 text-muted\">ÃŠtes-vous sÃ»r de vouloir supprimer cette adresse ?<br />Cette action est irrÃ©versible.</p>\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"border-0 pt-0 justify-content-center pb-4\">\r\n                    <Button variant=\"light\" className=\"px-4 rounded-pill\" onClick={() => setShowDeleteModal(false)}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"danger\" className=\"px-4 rounded-pill\" onClick={confirmDelete}>\r\n                        Supprimer\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </Container>\r\n    );\r\n};\r\n\r\nconst Checkout = () => {\r\n    return (\r\n        <PayPalScriptProvider options={{ \"client-id\": \"test\" }}>\r\n            <Elements stripe={stripePromise}>\r\n                <CheckoutContent />\r\n            </Elements>\r\n        </PayPalScriptProvider>\r\n    );\r\n}\r\n\r\nexport default Checkout;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Coupons.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'setCoupons' is assigned a value but never used.","line":12,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":31},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":149,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7143,7202],"text":"\r\n                                                Jusqu&apos;au "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7143,7202],"text":"\r\n                                                Jusqu&lsquo;au "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7143,7202],"text":"\r\n                                                Jusqu&#39;au "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7143,7202],"text":"\r\n                                                Jusqu&rsquo;au "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card, Button, Row, Col, Badge } from 'react-bootstrap';\r\nimport { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst Coupons = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Load coupons from localStorage\r\n    const [coupons, setCoupons] = useState(() => {\r\n        if (!user) return [];\r\n        const saved = localStorage.getItem(`coupons_${user.email}`);\r\n        return saved ? JSON.parse(saved) : [\r\n            // Default coupons for demo\r\n            {\r\n                id: 1,\r\n                code: 'BIENVENUE10',\r\n                discount: 10,\r\n                type: 'percentage',\r\n                description: 'Coupon de bienvenue',\r\n                minAmount: 50,\r\n                expiryDate: '2025-12-31',\r\n                used: false\r\n            },\r\n            {\r\n                id: 2,\r\n                code: 'NOEL2025',\r\n                discount: 20,\r\n                type: 'percentage',\r\n                description: 'Promotion de NoÃ«l',\r\n                minAmount: 100,\r\n                expiryDate: '2025-12-25',\r\n                used: false\r\n            },\r\n            {\r\n                id: 3,\r\n                code: 'LIVRAISON',\r\n                discount: 0,\r\n                type: 'shipping',\r\n                description: 'Livraison gratuite',\r\n                minAmount: 0,\r\n                expiryDate: '2026-01-31',\r\n                used: false\r\n            }\r\n        ];\r\n    });\r\n\r\n    const handleCopyCoupon = (code) => {\r\n        navigator.clipboard.writeText(code);\r\n        alert(`Code \"${code}\" copiÃ© dans le presse-papiers !`);\r\n    };\r\n\r\n    const handleUseCoupon = (code) => {\r\n        // Store coupon code in localStorage for cart to use\r\n        localStorage.setItem('appliedCoupon', code);\r\n        navigate('/cart');\r\n    };\r\n\r\n    const isExpired = (expiryDate) => {\r\n        return new Date(expiryDate) < new Date();\r\n    };\r\n\r\n    const getDiscountText = (coupon) => {\r\n        if (coupon.type === 'shipping') return 'Livraison gratuite';\r\n        if (coupon.type === 'percentage') return `-${coupon.discount}%`;\r\n        return `-${coupon.discount.toLocaleString()} FCFA`;\r\n    };\r\n\r\n    const activeCoupons = coupons.filter(c => !c.used && !isExpired(c.expiryDate));\r\n    const usedCoupons = coupons.filter(c => c.used);\r\n    const expiredCoupons = coupons.filter(c => !c.used && isExpired(c.expiryDate));\r\n\r\n    if (!user) {\r\n        return (\r\n            <ProfileLayout>\r\n                <div className=\"mb-4\">\r\n                    <h3 className=\"fw-bold\">Mes coupons</h3>\r\n                    <p className=\"text-muted\">GÃ©rez vos codes promo</p>\r\n                </div>\r\n                <Card className=\"border-0 shadow-sm text-center p-5\">\r\n                    <i className=\"bi bi-person-x\" style={{ fontSize: '4rem', color: '#ddd' }}></i>\r\n                    <h5 className=\"mt-3\">Connexion requise</h5>\r\n                    <p className=\"text-muted\">Connectez-vous pour voir vos coupons</p>\r\n                    <Button variant=\"warning\" className=\"text-white mt-2\" onClick={() => navigate('/login')}>\r\n                        Se connecter\r\n                    </Button>\r\n                </Card>\r\n            </ProfileLayout>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <div className=\"mb-4\">\r\n                <h3 className=\"fw-bold\">Mes coupons</h3>\r\n                <p className=\"text-muted\">Utilisez vos codes promo pour Ã©conomiser</p>\r\n            </div>\r\n\r\n            {/* Active Coupons */}\r\n            {activeCoupons.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                    <h5 className=\"fw-bold mb-3\">Coupons disponibles ({activeCoupons.length})</h5>\r\n                    <Row className=\"g-3\">\r\n                        {activeCoupons.map(coupon => (\r\n                            <Col key={coupon.id} md={6} lg={4}>\r\n                                <Card className=\"border-0 shadow-sm h-100\" style={{\r\n                                    background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\r\n                                    color: 'white'\r\n                                }}>\r\n                                    <Card.Body className=\"p-3\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                            <div>\r\n                                                <h4 className=\"fw-bold mb-0\">{getDiscountText(coupon)}</h4>\r\n                                                <small className=\"opacity-75\" style={{ fontSize: '0.8rem' }}>{coupon.description}</small>\r\n                                            </div>\r\n                                            <i className=\"bi bi-ticket-perforated\" style={{ fontSize: '1.5rem' }}></i>\r\n                                        </div>\r\n\r\n                                        <div className=\"bg-white bg-opacity-25 rounded p-2 mb-2\">\r\n                                            <div className=\"d-flex justify-content-between align-items-center\">\r\n                                                <div>\r\n                                                    <small className=\"opacity-75 d-block\" style={{ fontSize: '0.7rem' }}>Code promo</small>\r\n                                                    <strong style={{ fontSize: '1rem', letterSpacing: '1px' }}>\r\n                                                        {coupon.code}\r\n                                                    </strong>\r\n                                                </div>\r\n                                                <Button\r\n                                                    variant=\"light\"\r\n                                                    size=\"sm\"\r\n                                                    onClick={() => handleCopyCoupon(coupon.code)}\r\n                                                    style={{ padding: '0.25rem 0.5rem' }}\r\n                                                >\r\n                                                    <i className=\"bi bi-clipboard\"></i>\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"mb-2\">\r\n                                            {coupon.minAmount > 0 && (\r\n                                                <small className=\"d-block opacity-75\" style={{ fontSize: '0.75rem' }}>\r\n                                                    <i className=\"bi bi-info-circle me-1\"></i>\r\n                                                    Min: {coupon.minAmount.toLocaleString()} FCFA\r\n                                                </small>\r\n                                            )}\r\n                                            <small className=\"d-block opacity-75\" style={{ fontSize: '0.75rem' }}>\r\n                                                <i className=\"bi bi-calendar me-1\"></i>\r\n                                                Jusqu'au {new Date(coupon.expiryDate).toLocaleDateString('fr-FR')}\r\n                                            </small>\r\n                                        </div>\r\n\r\n                                        <Button\r\n                                            variant=\"light\"\r\n                                            size=\"sm\"\r\n                                            className=\"w-100 fw-bold\"\r\n                                            onClick={() => handleUseCoupon(coupon.code)}\r\n                                        >\r\n                                            Utiliser\r\n                                        </Button>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        ))}\r\n                    </Row>\r\n                </div>\r\n            )}\r\n\r\n            {/* Used Coupons */}\r\n            {usedCoupons.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                    <h5 className=\"fw-bold mb-3\">Coupons utilisÃ©s ({usedCoupons.length})</h5>\r\n                    <Row className=\"g-3\">\r\n                        {usedCoupons.map(coupon => (\r\n                            <Col key={coupon.id} md={6} lg={4}>\r\n                                <Card className=\"border-0 shadow-sm h-100 bg-light\">\r\n                                    <Card.Body className=\"p-3\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                            <div>\r\n                                                <h6 className=\"fw-bold mb-1 text-muted\">{getDiscountText(coupon)}</h6>\r\n                                                <small className=\"text-muted\" style={{ fontSize: '0.8rem' }}>{coupon.description}</small>\r\n                                            </div>\r\n                                            <Badge bg=\"secondary\">UtilisÃ©</Badge>\r\n                                        </div>\r\n                                        <div className=\"mt-2\">\r\n                                            <small className=\"text-muted\" style={{ fontSize: '0.75rem' }}>Code: {coupon.code}</small>\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        ))}\r\n                    </Row>\r\n                </div>\r\n            )}\r\n\r\n            {/* Expired Coupons */}\r\n            {expiredCoupons.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                    <h5 className=\"fw-bold mb-3\">Coupons expirÃ©s ({expiredCoupons.length})</h5>\r\n                    <Row className=\"g-3\">\r\n                        {expiredCoupons.map(coupon => (\r\n                            <Col key={coupon.id} md={6} lg={4}>\r\n                                <Card className=\"border-0 shadow-sm h-100 bg-light\">\r\n                                    <Card.Body className=\"p-3\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                            <div>\r\n                                                <h6 className=\"fw-bold mb-1 text-muted\">{getDiscountText(coupon)}</h6>\r\n                                                <small className=\"text-muted\" style={{ fontSize: '0.8rem' }}>{coupon.description}</small>\r\n                                            </div>\r\n                                            <Badge bg=\"danger\">ExpirÃ©</Badge>\r\n                                        </div>\r\n                                        <div className=\"mt-2\">\r\n                                            <small className=\"text-muted\" style={{ fontSize: '0.75rem' }}>\r\n                                                Code: {coupon.code} â€¢ ExpirÃ© le {new Date(coupon.expiryDate).toLocaleDateString('fr-FR')}\r\n                                            </small>\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        ))}\r\n                    </Row>\r\n                </div>\r\n            )}\r\n\r\n            {/* No coupons */}\r\n            {activeCoupons.length === 0 && usedCoupons.length === 0 && expiredCoupons.length === 0 && (\r\n                <Card className=\"border-0 shadow-sm text-center p-5\">\r\n                    <i className=\"bi bi-ticket-perforated\" style={{ fontSize: '4rem', color: '#ddd' }}></i>\r\n                    <h5 className=\"mt-3\">Aucun coupon disponible</h5>\r\n                    <p className=\"text-muted\">Vos coupons apparaÃ®tront ici</p>\r\n                    <Button variant=\"warning\" className=\"text-white mt-2\" onClick={() => navigate('/shop')}>\r\n                        DÃ©couvrir la boutique\r\n                    </Button>\r\n                </Card>\r\n            )}\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Coupons;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Favorites.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Help.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":66,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3275,3370],"text":"\r\n                                        Besoin d&apos;aide ?\r\n                                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3275,3370],"text":"\r\n                                        Besoin d&lsquo;aide ?\r\n                                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3275,3370],"text":"\r\n                                        Besoin d&#39;aide ?\r\n                                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3275,3370],"text":"\r\n                                        Besoin d&rsquo;aide ?\r\n                                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":242,"column":86,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[16576,16609],"text":"Votre question n&apos;est pas listÃ©e ?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[16576,16609],"text":"Votre question n&lsquo;est pas listÃ©e ?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[16576,16609],"text":"Votre question n&#39;est pas listÃ©e ?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[16576,16609],"text":"Votre question n&rsquo;est pas listÃ©e ?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Card, Form, Button, Accordion, InputGroup, ListGroup } from 'react-bootstrap';\r\nimport { useState } from 'react';\r\nimport { useData } from '../context/DataContext';\r\n\r\nconst Help = () => {\r\n    const { orders, helpQuestions, addHelpQuestion } = useData();\r\n    const [activeTab, setActiveTab] = useState('contact');\r\n\r\n    // Tracking state\r\n    const [trackingId, setTrackingId] = useState('');\r\n    const [foundOrder, setFoundOrder] = useState(null);\r\n    const [hasSearched, setHasSearched] = useState(false);\r\n\r\n    // Community Form state\r\n    const [userName, setUserName] = useState('');\r\n    const [userQuestion, setUserQuestion] = useState('');\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n\r\n    const handleTrackOrder = (e) => {\r\n        e.preventDefault();\r\n        const order = orders.find(o => o.id === trackingId.trim() || o.id === `#${trackingId.trim()}`);\r\n        setFoundOrder(order);\r\n        setHasSearched(true);\r\n    };\r\n\r\n    const handleSubmitQuestion = (e) => {\r\n        e.preventDefault();\r\n        if (!userName || !userQuestion) return;\r\n        addHelpQuestion({ userName, question: userQuestion });\r\n        setUserName('');\r\n        setUserQuestion('');\r\n        setShowSuccess(true);\r\n        setTimeout(() => setShowSuccess(false), 5000);\r\n    };\r\n\r\n    const menuItems = [\r\n        { id: 'contact', label: 'Nous contacter', icon: 'bi-telephone' },\r\n        { id: 'tracking', label: 'Suivre une commande', icon: 'bi-box-seam' },\r\n        { id: 'faq', label: 'Questions frÃ©quentes', icon: 'bi-question-circle' },\r\n        { id: 'community', label: 'CommunautÃ© Q&A', icon: 'bi-chat-dots' },\r\n    ];\r\n\r\n    const contactMethods = [\r\n        { title: 'WhatsApp', icon: 'bi-whatsapp', color: '#25D366', action: 'Discuter', link: 'https://wa.me/905461941673' },\r\n        { title: 'Appel Direct', icon: 'bi-telephone-fill', color: '#ff6000', action: 'Appeler', link: 'tel:+905461941673' },\r\n        { title: 'Email', icon: 'bi-envelope-fill', color: '#007bff', action: 'Envoyer', link: 'mailto:Trymyday235@gmail.com' }\r\n    ];\r\n\r\n    return (\r\n        <div style={{ backgroundColor: '#f8f9fa', minHeight: '100vh', padding: '40px 0' }}>\r\n            <Container>\r\n                <Row className=\"g-4\">\r\n                    {/* Sidebar */}\r\n                    <Col lg={3}>\r\n                        <div className=\"sticky-top\" style={{ top: '100px' }}>\r\n                            {/* Prominent Quick Access */}\r\n                            <Card className=\"border-0 shadow-sm mb-4 bg-dark text-white overflow-hidden\" style={{ borderRadius: '25px' }}>\r\n                                <div style={{\r\n                                    position: 'absolute', top: '-20px', right: '-20px',\r\n                                    width: '100px', height: '100px', borderRadius: '50%',\r\n                                    background: 'rgba(255, 96, 0, 0.2)', filter: 'blur(30px)'\r\n                                }}></div>\r\n                                <Card.Body className=\"p-4 position-relative\">\r\n                                    <h5 className=\"fw-bold mb-3 d-flex align-items-center\">\r\n                                        <i className=\"bi bi-patch-question me-2\" style={{ color: '#ff6000' }}></i>\r\n                                        Besoin d'aide ?\r\n                                    </h5>\r\n                                    <p className=\"small opacity-75 mb-4\">Notre Ã©quipe est lÃ  pour vous accompagner immÃ©diatement.</p>\r\n                                    <Button\r\n                                        href=\"tel:+905461941673\"\r\n                                        variant=\"warning\"\r\n                                        className=\"w-100 rounded-pill py-2 fw-bold shadow-sm\"\r\n                                        style={{ backgroundColor: '#ff6000', borderColor: '#ff6000', color: '#fff' }}\r\n                                    >\r\n                                        Appel Direct\r\n                                    </Button>\r\n                                </Card.Body>\r\n                            </Card>\r\n\r\n                            <Card className=\"border-0 shadow-sm\" style={{ borderRadius: '20px' }}>\r\n                                <Card.Body className=\"p-2\">\r\n                                    <div className=\"p-3 mb-2\">\r\n                                        <h6 className=\"fw-bold mb-0 text-muted text-uppercase small\" style={{ letterSpacing: '1px' }}>Menu Aide</h6>\r\n                                    </div>\r\n                                    <ListGroup variant=\"flush\">\r\n                                        {menuItems.map(item => (\r\n                                            <ListGroup.Item\r\n                                                key={item.id}\r\n                                                action\r\n                                                active={activeTab === item.id}\r\n                                                onClick={() => setActiveTab(item.id)}\r\n                                                className=\"border-0 rounded-4 mb-1 d-flex align-items-center py-3\"\r\n                                                style={{\r\n                                                    fontSize: '0.95rem',\r\n                                                    backgroundColor: activeTab === item.id ? '#ff6000' : 'transparent',\r\n                                                    borderColor: activeTab === item.id ? '#ff6000' : 'transparent',\r\n                                                    color: activeTab === item.id ? '#fff' : '#444'\r\n                                                }}\r\n                                            >\r\n                                                <i className={`bi ${item.icon} me-3 fs-5`}></i>\r\n                                                <span className=\"fw-medium\">{item.label}</span>\r\n                                            </ListGroup.Item>\r\n                                        ))}\r\n                                    </ListGroup>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </div>\r\n                    </Col>\r\n\r\n                    {/* Content Area */}\r\n                    <Col lg={9}>\r\n                        <div className=\"bg-white p-4 p-lg-5 shadow-sm min-vh-75\" style={{ borderRadius: '25px' }}>\r\n\r\n                            {/* Tracking Content */}\r\n                            {activeTab === 'tracking' && (\r\n                                <div className=\"fade-in\">\r\n                                    <h3 className=\"fw-bold mb-4\">Suivre mon colis</h3>\r\n                                    <p className=\"text-muted mb-5\">Entrez votre numÃ©ro de commande pour connaÃ®tre son avancement sans vous connecter.</p>\r\n\r\n                                    <div className=\"p-4 bg-light rounded-4 mb-4 border border-info border-opacity-10\">\r\n                                        <Form onSubmit={handleTrackOrder}>\r\n                                            <InputGroup className=\"mb-0 custom-input-group\">\r\n                                                <Form.Control\r\n                                                    placeholder=\"Ex: ORD-123456\"\r\n                                                    value={trackingId}\r\n                                                    onChange={(e) => setTrackingId(e.target.value)}\r\n                                                    style={{ height: '60px', borderRadius: '15px 0 0 15px', border: '2px solid #ddd' }}\r\n                                                    className=\"px-4\"\r\n                                                />\r\n                                                <Button\r\n                                                    variant=\"warning\"\r\n                                                    type=\"submit\"\r\n                                                    className=\"px-5 fw-bold\"\r\n                                                    style={{ borderRadius: '0 15px 15px 0', backgroundColor: '#ff6000', borderColor: '#ff6000', color: '#fff' }}\r\n                                                >\r\n                                                    Chercher\r\n                                                </Button>\r\n                                            </InputGroup>\r\n                                        </Form>\r\n                                    </div>\r\n\r\n                                    {hasSearched && (\r\n                                        <div className=\"p-4 rounded-4 border fade-in bg-white shadow-sm\">\r\n                                            {foundOrder ? (\r\n                                                <Row className=\"align-items-center\">\r\n                                                    <Col md={8}>\r\n                                                        <div className=\"d-flex align-items-center mb-3\">\r\n                                                            <div className=\"bg-orange-light p-3 rounded-circle me-3\">\r\n                                                                <i className=\"bi bi-box-seam text-orange fs-4\"></i>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <div className=\"text-muted small\">Commande #{foundOrder.id}</div>\r\n                                                                <div className=\"fw-bold fs-4\" style={{ color: '#ff6000' }}>{foundOrder.status}</div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"text-muted small\">PrÃ©vu pour : {foundOrder.date}</div>\r\n                                                    </Col>\r\n                                                    <Col md={4} className=\"text-md-end mt-3 mt-md-0\">\r\n                                                        <Button variant=\"outline-dark\" className=\"rounded-pill px-4\">Plus de dÃ©tails</Button>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            ) : (\r\n                                                <div className=\"text-danger d-flex align-items-center justify-content-center py-3\">\r\n                                                    <i className=\"bi bi-exclamation-circle me-2 fs-4\"></i>\r\n                                                    Commande non trouvÃ©e. Veuillez vÃ©rifier votre numÃ©ro.\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* FAQ Content */}\r\n                            {activeTab === 'faq' && (\r\n                                <div className=\"fade-in\">\r\n                                    <h3 className=\"fw-bold mb-4\">Questions frÃ©quentes</h3>\r\n                                    <p className=\"text-muted mb-5\">Tout ce que vous devez savoir pour commander sereinement.</p>\r\n\r\n                                    <Accordion className=\"custom-help-accordion mt-4\">\r\n                                        <Accordion.Item eventKey=\"0\" className=\"border-0 mb-3\">\r\n                                            <Accordion.Header className=\"rounded-4\">Comment payer mon panier ?</Accordion.Header>\r\n                                            <Accordion.Body className=\"text-muted\">\r\n                                                Vous pouvez rÃ©gler vos achats via votre portefeuille Ã©lectronique TRYMYDAY, par carte bancaire, ou en espÃ¨ces Ã  la livraison selon les zones.\r\n                                            </Accordion.Body>\r\n                                        </Accordion.Item>\r\n                                        <Accordion.Item eventKey=\"1\" className=\"border-0 mb-3\">\r\n                                            <Accordion.Header className=\"rounded-4\">Quels sont les dÃ©lais de livraison ?</Accordion.Header>\r\n                                            <Accordion.Body className=\"text-muted\">\r\n                                                Les livraisons standards prennent gÃ©nÃ©ralement entre 24h et 72h. Vous recevez une notification Ã  chaque Ã©tape via votre centre de messages.\r\n                                            </Accordion.Body>\r\n                                        </Accordion.Item>\r\n                                        <Accordion.Item eventKey=\"2\" className=\"border-0 mb-3\">\r\n                                            <Accordion.Header className=\"rounded-4\">Mes donnÃ©es sont-elles protÃ©gÃ©es ?</Accordion.Header>\r\n                                            <Accordion.Body className=\"text-muted\">\r\n                                                Oui, la sÃ©curitÃ© est notre prioritÃ©. Toutes les transactions sont cryptÃ©es et nous ne stockons jamais vos informations bancaires complÃ¨tes.\r\n                                            </Accordion.Body>\r\n                                        </Accordion.Item>\r\n                                    </Accordion>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Community Content */}\r\n                            {activeTab === 'community' && (\r\n                                <div className=\"fade-in\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center mb-5\">\r\n                                        <h3 className=\"fw-bold mb-0\">CommunautÃ© Q&A</h3>\r\n                                        <Button\r\n                                            variant=\"dark\"\r\n                                            size=\"sm\"\r\n                                            className=\"rounded-pill px-4\"\r\n                                            onClick={() => document.getElementById('q-form').scrollIntoView({ behavior: 'smooth' })}\r\n                                        >\r\n                                            Poser une question\r\n                                        </Button>\r\n                                    </div>\r\n\r\n                                    <div className=\"approved-list mb-5\">\r\n                                        {helpQuestions.filter(q => q.status === 'approved').length > 0 ? (\r\n                                            helpQuestions.filter(q => q.status === 'approved').map(q => (\r\n                                                <Card key={q.id} className=\"border-0 bg-light mb-4\" style={{ borderRadius: '20px' }}>\r\n                                                    <Card.Body className=\"p-4\">\r\n                                                        <div className=\"d-flex justify-content-between mb-3\">\r\n                                                            <div className=\"fw-bold\" style={{ color: '#2c3e50', fontSize: '1.1rem' }}>Q: {q.question}</div>\r\n                                                            <span className=\"text-muted small\">{q.date}</span>\r\n                                                        </div>\r\n                                                        <div className=\"d-flex\">\r\n                                                            <div className=\"bg-orange p-1 rounded-circle me-3 mt-1\" style={{ width: '8px', height: '8px', flexShrink: 0 }}></div>\r\n                                                            <p className=\"text-muted mb-0\">{q.answer}</p>\r\n                                                        </div>\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n                                            ))\r\n                                        ) : (\r\n                                            <div className=\"text-center py-5\">\r\n                                                <i className=\"bi bi-chat-quote fs-1 opacity-25\"></i>\r\n                                                <p className=\"mt-3 text-muted\">Pas encore de questions publiques.</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div id=\"q-form\" className=\"p-4 p-lg-5 bg-light rounded-5 mt-5\">\r\n                                        <h4 className=\"fw-bold mb-3\">Votre question n'est pas listÃ©e ?</h4>\r\n                                        <p className=\"text-muted small mb-4\">Posez-la nous via ce formulaire. Un admin y rÃ©pondra publiquement.</p>\r\n\r\n                                        <Form onSubmit={handleSubmitQuestion}>\r\n                                            <Row>\r\n                                                <Col md={6} className=\"mb-3\">\r\n                                                    <Form.Control\r\n                                                        placeholder=\"Votre nom\"\r\n                                                        className=\"border-0 p-3 rounded-4\"\r\n                                                        value={userName}\r\n                                                        onChange={(e) => setUserName(e.target.value)}\r\n                                                        required\r\n                                                    />\r\n                                                </Col>\r\n                                                <Col md={12} className=\"mb-3\">\r\n                                                    <Form.Control\r\n                                                        as=\"textarea\"\r\n                                                        rows={4}\r\n                                                        placeholder=\"Votre question prÃ©cise...\"\r\n                                                        className=\"border-0 p-3 rounded-4\"\r\n                                                        value={userQuestion}\r\n                                                        onChange={(e) => setUserQuestion(e.target.value)}\r\n                                                        required\r\n                                                    />\r\n                                                </Col>\r\n                                            </Row>\r\n                                            <Button variant=\"dark\" type=\"submit\" className=\"w-100 py-3 rounded-4 fw-bold mt-2 shadow-sm\">\r\n                                                Envoyer pour modÃ©ration\r\n                                            </Button>\r\n                                        </Form>\r\n                                        {showSuccess && (\r\n                                            <div className=\"mt-4 p-3 bg-success bg-opacity-10 text-success rounded-4 small fade-in d-flex align-items-center\">\r\n                                                <i className=\"bi bi-check-circle-fill me-2\"></i> Question envoyÃ©e avec succÃ¨s !\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Contact Content */}\r\n                            {activeTab === 'contact' && (\r\n                                <div className=\"fade-in text-center py-4\">\r\n                                    <h3 className=\"fw-bold mb-4\">Parler Ã  un de nos agents</h3>\r\n                                    <p className=\"text-muted mb-5\">Nous sommes disponibles 6j/7 pour vous assister en direct.</p>\r\n\r\n                                    <Row className=\"g-4 justify-content-center\">\r\n                                        {contactMethods.map((m, idx) => (\r\n                                            <Col key={idx} md={4}>\r\n                                                <Card className=\"h-100 border-0 shadow-sm hover-lift\" style={{ borderRadius: '25px' }}>\r\n                                                    <Card.Body className=\"p-4\">\r\n                                                        <div className=\"mb-3 d-inline-flex p-4 rounded-circle\" style={{ backgroundColor: `${m.color}15` }}>\r\n                                                            <i className={`bi ${m.icon} fs-1`} style={{ color: m.color }}></i>\r\n                                                        </div>\r\n                                                        <h5 className=\"fw-bold mb-3\">{m.title}</h5>\r\n                                                        <Button\r\n                                                            variant=\"dark\"\r\n                                                            href={m.link}\r\n                                                            className=\"w-100 rounded-pill py-2 fw-bold\"\r\n                                                            style={{ backgroundColor: m.color, borderColor: m.color }}\r\n                                                        >\r\n                                                            {m.action}\r\n                                                        </Button>\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n                                            </Col>\r\n                                        ))}\r\n                                    </Row>\r\n                                </div>\r\n                            )}\r\n\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n\r\n            <style>{`\r\n                .fade-in { animation: fadeIn 0.4s ease forwards; }\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; transform: translateY(10px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .text-orange { color: #ff6000; }\r\n                .bg-orange { background-color: #ff6000; }\r\n                .bg-orange-light { background-color: rgba(255, 96, 0, 0.1); }\r\n                .hover-lift { transition: transform 0.3s ease; }\r\n                .hover-lift:hover { transform: translateY(-8px); }\r\n                .custom-help-accordion .accordion-button {\r\n                    background-color: #f8f9fa;\r\n                    border: 1px solid #eee;\r\n                    border-radius: 12px !important;\r\n                    font-weight: 600;\r\n                    margin-bottom: 5px;\r\n                }\r\n                .custom-help-accordion .accordion-button:not(.collapsed) {\r\n                    color: #ff6000;\r\n                    background-color: #fff;\r\n                    border-color: #ff6000;\r\n                    box-shadow: none;\r\n                }\r\n                .min-vh-75 { min-height: 75vh; }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Help;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Home.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":11,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'NoTranslate' is assigned a value but never used.","line":12,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef } from 'react';\r\nimport { Container, Button, Carousel, Row, Col } from 'react-bootstrap';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useData } from '../context/DataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useLanguage } from '../context/LanguageContext';\r\nimport ProductCard from '../components/ProductCard';\r\n\r\nconst Home = () => {\r\n    const { products } = useData();\r\n    const { user } = useAuth();\r\n    const { NoTranslate } = useLanguage();\r\n    const navigate = useNavigate();\r\n    const scrollRef = useRef(null);\r\n\r\n    const scroll = (direction) => {\r\n        if (scrollRef.current) {\r\n            const scrollAmount = 300;\r\n            scrollRef.current.scrollBy({\r\n                left: direction === 'left' ? -scrollAmount : scrollAmount,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n    };\r\n\r\n    const categories = [\r\n        { name: 'Femme', image: '/assets/category_mode_1766034946780.png', link: '/shop?cat=Femme', icon: 'bi-person-heart' },\r\n        { name: 'Homme', image: '/assets/cat_homme.png', link: '/shop?cat=Homme', icon: 'bi-person-check' },\r\n        { name: 'Enfant', image: '/assets/cat_enfant.png', link: '/shop?cat=Enfant', icon: 'bi-smartwatch' },\r\n        { name: 'Maison', image: '/assets/cat_maison.png', link: '/shop?cat=Maison %26 Meuble', icon: 'bi-house' },\r\n        { name: 'CosmÃ©tique', image: '/assets/cat_cosmetique.png', link: '/shop?cat=CosmÃ©tique', icon: 'bi-magic' },\r\n        { name: 'Chaussures', image: '/assets/cat_chaussures.png', link: '/shop?cat=Chaussures', icon: 'bi-bag-dash' },\r\n        { name: 'Sacs', image: '/assets/cat_sacs.png', link: '/shop?cat=Sacs', icon: 'bi-handbag' },\r\n        { name: 'Ã‰lectronique', image: '/assets/category_tech_1766034965148.png', link: '/shop?cat=Ã‰lectronique', icon: 'bi-laptop' },\r\n    ];\r\n\r\n    const brands = [\r\n        { name: 'Nike', logo: 'https://upload.wikimedia.org/wikipedia/commons/a/a6/Logo_NIKE.svg' },\r\n        { name: 'Adidas', logo: 'https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg' },\r\n        { name: 'Zara', logo: 'https://upload.wikimedia.org/wikipedia/commons/f/fd/Zara_Logo.svg' },\r\n        { name: 'Apple', logo: 'https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg' },\r\n        { name: 'Samsung', logo: 'https://logodix.com/logo/5010.gif' },\r\n        { name: 'LC Waikiki', logo: 'https://www.capsacrecoeur.re/media/enseignes/logo/logo-lcw-512x2432-page-0001.jpg' },\r\n        { name: 'DeFacto', logo: 'https://i.ytimg.com/vi/a0TATeKpWP4/maxresdefault.jpg' },\r\n        { name: 'Flo', logo: 'https://i3.kuponla.com/wp-content/uploads/2019/12/flo-guncel-indirim-kuponlari-KUPONLACOM.jpg' },\r\n        { name: 'Gratis', logo: 'https://th.bing.com/th/id/R.378025d751a1c477acea1d823881ea70?rik=SQyfcSp%2fJsZ2Jw&riu=http%3a%2f%2f3.bp.blogspot.com%2f-g-EVGo9KnRM%2fVJlFMqWLXuI%2fAAAAAAAAFnE%2fhwEjqE6oqgs%2fs1600%2fGratis-870x350.jpg&ehk=B%2b4zSKUaiGgk34Yg1gBB66eAdxFr6ybrEm1uQRwZx7c%3d&risl=&pid=ImgRaw&r=0' },\r\n        { name: 'Watsons', logo: 'https://tse2.mm.bing.net/th/id/OIP.yd-tbxLLhTiVK3qLjU1UgQAAAA?w=300&h=59&rs=1&pid=ImgDetMain&o=7&rm=3' },\r\n        { name: 'Gucci', logo: 'https://tse2.mm.bing.net/th/id/OIP.OhvpW9EsnRviqrFasMoenQHaBy?w=860&h=208&rs=1&pid=ImgDetMain&o=7&rm=3' },\r\n        { name: 'Dior', logo: 'https://tse4.mm.bing.net/th/id/OIP.BHA8sdXscHDNjtn1ha-uxwAAAA?rs=1&pid=ImgDetMain&o=7&rm=3' },\r\n        { name: 'H&M', logo: 'https://upload.wikimedia.org/wikipedia/commons/5/53/H%26M-Logo.svg' },\r\n    ];\r\n\r\n    const brandCampaigns = [\r\n        {\r\n            brand: 'LC Waikiki',\r\n            logo: 'https://www.capsacrecoeur.re/media/enseignes/logo/logo-lcw-512x2432-page-0001.jpg',\r\n            slogan: 'Style de Saison pour Tous',\r\n            bgColor: '#F47B4E',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&w=400&q=80', price: '4500 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1539109132314-347f854181f0?auto=format&fit=crop&w=400&q=80', price: '3200 FCFA' }\r\n            ]\r\n        },\r\n        {\r\n            brand: 'DeFacto',\r\n            logo: 'https://i.ytimg.com/vi/a0TATeKpWP4/maxresdefault.jpg',\r\n            slogan: 'Nouveau Look, Nouveau Vous',\r\n            bgColor: '#9B6B9D',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1488161628813-f4460f872be4?auto=format&fit=crop&w=400&q=80', price: '5800 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=400&q=80', price: '4900 FCFA' }\r\n            ]\r\n        },\r\n        {\r\n            brand: 'Flo',\r\n            logo: 'https://i3.kuponla.com/wp-content/uploads/2019/12/flo-guncel-indirim-kuponlari-KUPONLACOM.jpg',\r\n            slogan: 'Vos Chaussures de RÃªve',\r\n            bgColor: '#BC4B5B',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=400&q=80', price: '12500 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?auto=format&fit=crop&w=400&q=80', price: '18000 FCFA' }\r\n            ]\r\n        },\r\n        {\r\n            brand: 'Zara',\r\n            logo: 'https://upload.wikimedia.org/wikipedia/commons/f/fd/Zara_Logo.svg',\r\n            slogan: 'Ã‰lÃ©gance Contemporaine',\r\n            bgColor: '#4A8B9C',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1532453288672-3a27e9be4efd?auto=format&fit=crop&w=400&q=80', price: '25000 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?auto=format&fit=crop&w=400&q=80', price: '35000 FCFA' }\r\n            ]\r\n        },\r\n        {\r\n            brand: 'Gratis',\r\n            logo: 'https://th.bing.com/th/id/R.378025d751a1c477acea1d823881ea70?rik=SQyfcSp%2fJsZ2Jw&riu=http%3a%2f%2f3.bp.blogspot.com%2f-g-EVGo9KnRM%2fVJlFMqWLXuI%2fAAAAAAAAFnE%2fhwEjqE6oqgs%2fs1600%2fGratis-870x350.jpg&ehk=B%2b4zSKUaiGgk34Yg1gBB66eAdxFr6ybrEm1uQRwZx7c%3d&risl=&pid=ImgRaw&r=0',\r\n            slogan: 'Prenez Soin de Vous',\r\n            bgColor: '#E57373',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1596462502278-27bfdc4033c8?auto=format&fit=crop&w=400&q=80', price: '2500 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1512496015851-a90fb38ba796?auto=format&fit=crop&w=400&q=80', price: '4500 FCFA' }\r\n            ]\r\n        },\r\n        {\r\n            brand: 'Apple',\r\n            logo: 'https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg',\r\n            slogan: 'L\\'Innovation Ã  l\\'Ã‰tat Pur',\r\n            bgColor: '#607D8B',\r\n            products: [\r\n                { img: 'https://images.unsplash.com/photo-1510557880182-3d4d3cba35a5?auto=format&fit=crop&w=400&q=80', price: '650.000 FCFA' },\r\n                { img: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=400&q=80', price: '950.000 FCFA' }\r\n            ]\r\n        }\r\n    ];\r\n\r\n    const featuredProducts = products.slice(0, 6);\r\n\r\n    return (\r\n        <div className=\"home-page\" style={{\r\n            fontFamily: '\"Segoe UI\", Roboto, sans-serif',\r\n            backgroundColor: '#fff',\r\n            scrollBehavior: 'smooth'\r\n        }}>\r\n            {/* --- 1. CIRCULAR CATEGORY NAVIGATION  --- */}\r\n            <div className=\"category-scroll-container py-1 border-bottom shadow-sm bg-white sticky-top\" style={{ zIndex: 1020, top: '1px' }}>\r\n                <Container>\r\n                    <div className=\"d-flex justify-content-center overflow-auto gap-3 py-1 no-scrollbar scroll-pill-container\" style={{ WebkitOverflowScrolling: 'touch' }}>\r\n                        {categories.map((cat, idx) => (\r\n                            <Link\r\n                                key={idx}\r\n                                to={cat.link}\r\n                                className=\"text-decoration-none text-center d-flex flex-column align-items-center gap-1 group category-pill-item\"\r\n                                style={{ minWidth: '75px' }}\r\n                            >\r\n                                <div className=\"category-circle-wrapper position-relative p-1 rounded-circle border border-2 border-warning hover-scale\"\r\n                                    style={{ width: '64px', height: '64px', transition: 'all 0.3s ease' }}>\r\n                                    <div className=\"rounded-circle overflow-hidden w-100 h-100 border\">\r\n                                        <img\r\n                                            src={cat.image}\r\n                                            alt={cat.name}\r\n                                            className=\"w-100 h-100 object-fit-cover transition-transform\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <span className=\"small fw-bold text-dark text-nowrap\" style={{ fontSize: '0.78rem' }}>{cat.name}</span>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                </Container>\r\n            </div>\r\n\r\n            {/* --- 2. DUAL TOP CAROUSELS --- */}\r\n            <Container className=\"py-2 mb-4\">\r\n                <Row className=\"g-3\">\r\n                    {/* Left Carousel: Femme Focus */}\r\n                    <Col md={6}>\r\n                        <div className=\"rounded-4 overflow-hidden shadow-sm position-relative\" style={{ height: '380px' }}>\r\n                            <Carousel interval={5000} fade className=\"h-100 mini-hero\">\r\n                                <Carousel.Item className=\"h-100\">\r\n                                    <div className=\"h-100 w-100 position-relative\">\r\n                                        <img\r\n                                            src=\"https://images.unsplash.com/photo-1591085686350-798c0f9faf7c?auto=format&fit=crop&w=1000&q=80\"\r\n                                            className=\"w-100 h-100 object-fit-cover\"\r\n                                            alt=\"Mode Femme\"\r\n                                            style={{ objectPosition: 'center 20%' }}\r\n                                        />\r\n                                        <div className=\"position-absolute bottom-0 start-0 w-100 p-4\" style={{ background: 'linear-gradient(transparent, rgba(0,0,0,0.8))' }}>\r\n                                            <span className=\"badge bg-warning mb-2\">MODE FEMME</span>\r\n                                            <h3 className=\"text-white fw-bold mb-2\">Ã‰LÃ‰GANCE AU FÃ‰MININ</h3>\r\n                                            <Link to=\"/shop?cat=Femme\" className=\"text-white text-decoration-none small fw-bold\">DÃ‰COUVRIR â†’</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </Carousel.Item>\r\n                                <Carousel.Item className=\"h-100\">\r\n                                    <div className=\"h-100 w-100 position-relative\">\r\n                                        <img\r\n                                            src=\"https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=1000&q=80\"\r\n                                            className=\"w-100 h-100 object-fit-cover\"\r\n                                            alt=\"Maison\"\r\n                                        />\r\n                                        <div className=\"position-absolute bottom-0 start-0 w-100 p-4\" style={{ background: 'linear-gradient(transparent, rgba(0,0,0,0.8))' }}>\r\n                                            <span className=\"badge bg-info mb-2\">MAISON</span>\r\n                                            <h3 className=\"text-white fw-bold mb-2\">DÃ‰CO & STYLE</h3>\r\n                                            <Link to=\"/shop?cat=Maison\" className=\"text-white text-decoration-none small fw-bold\">EXPLORER â†’</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </Carousel.Item>\r\n                            </Carousel>\r\n                        </div>\r\n                    </Col>\r\n\r\n                    {/* Right Carousel: Homme & Tech Focus */}\r\n                    <Col md={6}>\r\n                        <div className=\"rounded-4 overflow-hidden shadow-sm position-relative\" style={{ height: '380px' }}>\r\n                            <Carousel interval={5500} fade className=\"h-100 mini-hero\">\r\n                                <Carousel.Item className=\"h-100\">\r\n                                    <div className=\"h-100 w-100 position-relative\">\r\n                                        <img\r\n                                            src=\"https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?auto=format&fit=crop&w=1000&q=80\"\r\n                                            className=\"w-100 h-100 object-fit-cover\"\r\n                                            alt=\"Mode Homme\"\r\n                                            style={{ objectPosition: 'center 10%' }}\r\n                                        />\r\n                                        <div className=\"position-absolute bottom-0 start-0 w-100 p-4\" style={{ background: 'linear-gradient(transparent, rgba(0,0,0,0.8))' }}>\r\n                                            <span className=\"badge bg-primary mb-2\">MODE HOMME</span>\r\n                                            <h3 className=\"text-white fw-bold mb-2\">STYLE MODERNE</h3>\r\n                                            <Link to=\"/shop?cat=Homme\" className=\"text-white text-decoration-none small fw-bold\">DÃ‰COUVRIR â†’</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </Carousel.Item>\r\n                                <Carousel.Item className=\"h-100\">\r\n                                    <div className=\"h-100 w-100 position-relative\">\r\n                                        <img\r\n                                            src=\"https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=1000&q=80\"\r\n                                            className=\"w-100 h-100 object-fit-cover\"\r\n                                            alt=\"Technologie\"\r\n                                        />\r\n                                        <div className=\"position-absolute bottom-0 start-0 w-100 p-4\" style={{ background: 'linear-gradient(transparent, rgba(0,0,0,0.8))' }}>\r\n                                            <span className=\"badge bg-info mb-2\">NOUVEAUTÃ‰S TECH</span>\r\n                                            <h3 className=\"text-white fw-bold mb-2\">INNOVATION</h3>\r\n                                            <Link to=\"/shop?cat=Ã‰lectronique\" className=\"text-white text-decoration-none small fw-bold\">VOIR PLUS â†’</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </Carousel.Item>\r\n                            </Carousel>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n\r\n            {/* --- 4. FEATURED PRODUCTS (HORIZONTAL SLIDER STYLE) --- */}\r\n            <Container className=\"mb-5 py-4 position-relative\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                    <h3 className=\"fw-bold mb-0 border-start border-4 border-warning ps-3\" style={{ fontSize: '1.5rem' }}>Les plus aimÃ©s</h3>\r\n                    <Link to=\"/shop\" className=\"text-warning fw-bold text-decoration-none small\">Voir Tout â†’</Link>\r\n                </div>\r\n\r\n                <div className=\"position-relative slider-wrapper px-md-2\">\r\n                    {/* Navigation Arrows */}\r\n                    <Button\r\n                        variant=\"white\"\r\n                        className=\"position-absolute start-0 top-50 translate-middle-y shadow-sm rounded-circle d-none d-md-flex align-items-center justify-content-center border hover-scale\"\r\n                        style={{ zIndex: 10, width: '45px', height: '45px', left: '-25px' }}\r\n                        onClick={() => scroll('left')}\r\n                    >\r\n                        <i className=\"bi bi-chevron-left text-dark\"></i>\r\n                    </Button>\r\n\r\n                    <div\r\n                        ref={scrollRef}\r\n                        className=\"d-flex overflow-auto gap-3 pb-3 no-scrollbar px-1\"\r\n                        style={{ WebkitOverflowScrolling: 'touch', scrollSnapType: 'x mandatory' }}\r\n                    >\r\n                        {featuredProducts.map((product) => (\r\n                            <div key={product.id} style={{ minWidth: '220px', scrollSnapAlign: 'start' }}>\r\n                                <ProductCard product={product} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <Button\r\n                        variant=\"white\"\r\n                        className=\"position-absolute end-0 top-50 translate-middle-y shadow-sm rounded-circle d-none d-md-flex align-items-center justify-content-center border hover-scale\"\r\n                        style={{ zIndex: 10, width: '45px', height: '45px', right: '-25px' }}\r\n                        onClick={() => scroll('right')}\r\n                    >\r\n                        <i className=\"bi bi-chevron-right text-dark\"></i>\r\n                    </Button>\r\n                </div>\r\n            </Container>\r\n\r\n\r\n            {/* --- 6. BRAND CAMPAIGN BANNERS (Trendyol Style) --- */}\r\n            <Container className=\"mb-5 pb-5\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                    <h3 className=\"fw-bold mb-0 border-start border-4 border-warning ps-3\" style={{ fontSize: '1.5rem' }}>Destinations de Marques</h3>\r\n                </div>\r\n                <Row className=\"g-4\">\r\n                    {brandCampaigns.map((campaign, idx) => (\r\n                        <Col key={idx} lg={4} md={6}>\r\n                            <div\r\n                                className=\"campaign-card d-flex rounded-4 overflow-hidden shadow-sm border h-100\"\r\n                                style={{ cursor: 'pointer', transition: 'transform 0.3s ease' }}\r\n                                onClick={() => navigate(`/shop?brand=${encodeURIComponent(campaign.brand)}`)}\r\n                            >\r\n                                {/* Left: Product Previews */}\r\n                                <div className=\"d-flex p-2 bg-white gap-2 align-items-center justify-content-center\" style={{ width: '60%' }}>\r\n                                    {campaign.products.map((p, i) => (\r\n                                        <div key={i} className=\"text-center\">\r\n                                            <div className=\"rounded-3 overflow-hidden border\" style={{ width: '85px', height: '110px' }}>\r\n                                                <img src={p.img} alt=\"product\" className=\"w-100 h-100 object-fit-cover\" />\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                {/* Right: Brand & Slogan */}\r\n                                <div\r\n                                    className=\"d-flex flex-column justify-content-center p-3 text-white text-center pb-4\"\r\n                                    style={{ width: '40%', backgroundColor: campaign.bgColor }}\r\n                                >\r\n                                    <div className=\"bg-white rounded-3 p-1 mb-3 d-flex align-items-center justify-content-center\" style={{ height: '50px' }}>\r\n                                        <img src={campaign.logo} alt={campaign.brand} className=\"mw-100 mh-100 object-fit-contain\" />\r\n                                    </div>\r\n                                    <h6 className=\"fw-bold mb-0 lh-sm\" style={{ fontSize: '0.85rem' }}>{campaign.slogan}</h6>\r\n                                </div>\r\n                            </div>\r\n                        </Col>\r\n                    ))}\r\n                </Row>\r\n            </Container>\r\n\r\n            {/* --- 7. SIMPLE LOGO LIST (Refined) --- */}\r\n            <Container className=\"mb-5 pb-4\">\r\n                <div className=\"d-flex flex-wrap justify-content-center gap-4 py-2 border-top pt-4 grayscale-img\" style={{ opacity: 0.5 }}>\r\n                    {brands.map((brand, idx) => (\r\n                        <img\r\n                            key={idx}\r\n                            src={brand.logo}\r\n                            alt={brand.name}\r\n                            style={{ height: '25px', width: 'auto', objectFit: 'contain' }}\r\n                            title={brand.name}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </Container>\r\n\r\n            <style>{`\r\n                .no-scrollbar::-webkit-scrollbar { display: none; }\r\n                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }\r\n                \r\n                .category-circle-wrapper:hover {\r\n                    border-color: #ffc107 !important;\r\n                    transform: translateY(-5px);\r\n                    box-shadow: 0 5px 15px rgba(255,193,7,0.3);\r\n                }\r\n                \r\n                .category-circle-wrapper img { transition: transform 0.5s ease; }\r\n                .category-pill-item:hover img { transform: scale(1.15); }\r\n\r\n                .hover-scale-btn {\r\n                    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n                }\r\n                .hover-scale-btn:hover {\r\n                    transform: scale(1.05) translateY(-2px);\r\n                    box-shadow: 0 10px 20px rgba(0,0,0,0.1);\r\n                }\r\n\r\n                .hover-scale-img img {\r\n                    transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);\r\n                }\r\n                .hover-scale-img:hover img {\r\n                    transform: scale(1.08);\r\n                }\r\n                \r\n                .boutique-banner::after {\r\n                    content: '';\r\n                    position: absolute;\r\n                    inset: 0;\r\n                    background: linear-gradient(rgba(0,0,0,0.4), transparent);\r\n                    pointer-events: none;\r\n                }\r\n\r\n                .backdrop-blur {\r\n                    backdrop-filter: blur(10px);\r\n                    -webkit-backdrop-filter: blur(10px);\r\n                }\r\n\r\n                .text-shadow {\r\n                    text-shadow: 0 2px 10px rgba(0,0,0,0.3);\r\n                }\r\n\r\n                .main-hero-carousel .carousel-control-prev,\r\n                .main-hero-carousel .carousel-control-next {\r\n                    width: 5%;\r\n                }\r\n\r\n                @keyframes slideRight {\r\n                    from { transform: translateX(-50px) translateY(-50%); opacity: 0; }\r\n                    to { transform: translateX(0) translateY(-50%); opacity: 1; }\r\n                }\r\n                .animate-slide-right { animation: slideRight 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; }\r\n\r\n                @keyframes slideLeft {\r\n                    from { transform: translateX(50px) translateY(-50%); opacity: 0; }\r\n                    to { transform: translateX(0) translateY(-50%); opacity: 1; }\r\n                }\r\n                .animate-slide-left { animation: slideLeft 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; }\r\n                \r\n                .mini-hero .carousel-indicators [data-bs-target] {\r\n                    width: 25px;\r\n                    height: 2px;\r\n                    margin: 0 3px;\r\n                }\r\n                .mini-hero .carousel-control-prev, \r\n                .mini-hero .carousel-control-next {\r\n                    width: 10%;\r\n                }\r\n\r\n                .brand-card:hover {\r\n                    transform: translateY(-5px);\r\n                    box-shadow: 0 10px 20px rgba(0,0,0,0.08) !important;\r\n                    border-color: #ffc107 !important;\r\n                }\r\n\r\n                .grayscale-img {\r\n                    filter: grayscale(100%);\r\n                    opacity: 0.6;\r\n                    transition: all 0.3s ease;\r\n                }\r\n\r\n                .brand-card:hover .grayscale-img {\r\n                    filter: grayscale(0%);\r\n                    opacity: 1;\r\n                    transform: scale(1.05);\r\n                }\r\n\r\n                .campaign-card:hover {\r\n                    transform: translateY(-8px);\r\n                    box-shadow: 0 15px 30px rgba(0,0,0,0.12) !important;\r\n                }\r\n            `}</style>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Login.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Alert' is defined but never used.","line":2,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Container, Form, Button, Card, Alert } from 'react-bootstrap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nconst Login = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const { login } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        // Ici on pourrait ajouter une validation ou gestion d'erreur rÃ©elle\r\n        login(email, password);\r\n        navigate('/');\r\n    };\r\n\r\n    return (\r\n        <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '80vh' }}>\r\n            <Card style={{ width: '400px' }} className=\"shadow-lg border-0\">\r\n                <Card.Body className=\"p-5\">\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                            <Form.Label className=\"fw-bold\" style={{ fontSize: '1.1rem' }}>Adresse Email</Form.Label>\r\n                            <Form.Control\r\n                                type=\"email\"\r\n                                placeholder=\"votre@email.com\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                style={{ fontSize: '1rem', padding: '12px' }}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-4\" controlId=\"formBasicPassword\">\r\n                            <Form.Label className=\"fw-bold\" style={{ fontSize: '1.1rem' }}>Mot de passe</Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                placeholder=\"Mot de passe\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                style={{ fontSize: '1rem', padding: '12px' }}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Button variant=\"warning\" type=\"submit\" className=\"w-100 py-3 fw-bold mb-3 text-white\" style={{ borderRadius: '10px', fontSize: '1.1rem' }}>\r\n                            Se connecter\r\n                        </Button>\r\n                    </Form>\r\n\r\n                    <div className=\"text-center mt-3\">\r\n                        <small className=\"text-muted\">Pas encore de compte ? <Link to=\"/register\" className=\"fw-bold text-warning\">Inscription</Link></small>\r\n                    </div>\r\n                </Card.Body>\r\n            </Card>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Messages.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\OrderDetails.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":72,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3150,3287],"text":"Votre demande d&apos;annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d'un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3150,3287],"text":"Votre demande d&lsquo;annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d'un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3150,3287],"text":"Votre demande d&#39;annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d'un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3150,3287],"text":"Votre demande d&rsquo;annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d'un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":72,"column":123,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3150,3287],"text":"Votre demande d'annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d&apos;un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3150,3287],"text":"Votre demande d'annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d&lsquo;un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3150,3287],"text":"Votre demande d'annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d&#39;un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3150,3287],"text":"Votre demande d'annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d&rsquo;un administrateur pour que votre remboursement soit effectuÃ©."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Card, Badge, Button, ListGroup } from 'react-bootstrap';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useData } from '../context/DataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst OrderDetails = () => {\r\n    const { orderId } = useParams();\r\n    const { orders, updateOrder } = useData();\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Find the order\r\n    const order = orders.find(o => o.id === orderId);\r\n\r\n    // Check if order exists and belongs to user\r\n    if (!order) {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <h3>âŒ Commande introuvable</h3>\r\n                <Button variant=\"warning\" className=\"mt-3 text-white\" onClick={() => navigate('/profile/orders')}>\r\n                    â¬…ï¸ Retour aux commandes\r\n                </Button>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    if (order.email !== user?.email && user?.role !== 'admin') {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <h3>ðŸ”’ AccÃ¨s non autorisÃ©</h3>\r\n                <Button variant=\"warning\" className=\"mt-3 text-white\" onClick={() => navigate('/profile/orders')}>\r\n                    â¬…ï¸ Retour aux commandes\r\n                </Button>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    const getStatusBadge = (status) => {\r\n        if (status === 'LivrÃ©e' || status === 'ComplÃ©tÃ©e') return 'success';\r\n        if (status === 'AnnulÃ©e') return 'danger';\r\n        if (status === 'En attente' || status === 'En cours') return 'warning';\r\n        if (status === \"Demande d'annulation\") return 'warning';\r\n        return 'info';\r\n    };\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            {/* Header */}\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <div>\r\n                    <h3 className=\"fw-bold mb-1\">DÃ©tails de la commande</h3>\r\n                    <p className=\"text-muted mb-0\">Commande #{order.id}</p>\r\n                </div>\r\n                <Button variant=\"outline-secondary\" onClick={() => navigate('/profile/orders')}>\r\n                    â¬…ï¸ Retour\r\n                </Button>\r\n            </div>\r\n\r\n            <Row className=\"align-items-start\">\r\n                {/* Left Column - Order Info */}\r\n                <Col lg={8}>\r\n                    {/* Order Status */}\r\n                    <Card className=\"border-0 shadow-sm mb-4\">\r\n                        <Card.Body className=\"p-4\">\r\n                            <h5 className=\"fw-bold mb-3\">Statut de la commande</h5>\r\n                            {order.status === \"Demande d'annulation\" && (\r\n                                <div className=\"alert alert-warning border-0 shadow-sm d-flex align-items-center mb-4\">\r\n                                    <i className=\"bi bi-hourglass-split me-3 fs-4\"></i>\r\n                                    <div>\r\n                                        <div className=\"fw-bold\">Annulation en cours</div>\r\n                                        <small>Votre demande d'annulation a Ã©tÃ© enregistrÃ©e. Elle attend la confirmation d'un administrateur pour que votre remboursement soit effectuÃ©.</small>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"d-flex align-items-center\">\r\n                                <Badge bg={getStatusBadge(order.status)} className=\"px-3 py-2 me-3\">\r\n                                    {order.status}\r\n                                </Badge>\r\n                                <div>\r\n                                    <small className=\"text-muted d-block\">Date de commande</small>\r\n                                    <strong>{order.date}</strong>\r\n                                </div>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n\r\n                    {/* Tracking Timeline */}\r\n                    {(order.trackingNumber || (order.timeline && order.timeline.length > 0)) && (\r\n                        <Card className=\"border-0 shadow-sm mb-4\">\r\n                            <Card.Body className=\"p-4\">\r\n                                <h5 className=\"fw-bold mb-3\">\r\n                                    <i className=\"bi bi-clock-history me-2\"></i>\r\n                                    Suivi de commande\r\n                                </h5>\r\n\r\n                                {order.trackingNumber && (\r\n                                    <div className=\"alert alert-info mb-3\">\r\n                                        <i className=\"bi bi-truck me-2\"></i>\r\n                                        <strong>NumÃ©ro de suivi :</strong> {order.trackingNumber}\r\n                                    </div>\r\n                                )}\r\n\r\n                                {order.timeline && order.timeline.length > 0 && (\r\n                                    <div className=\"timeline\">\r\n                                        {order.timeline.map((entry, index) => (\r\n                                            <div key={index} className=\"timeline-item mb-4\">\r\n                                                <div className=\"d-flex\">\r\n                                                    <div className=\"me-3\">\r\n                                                        <div\r\n                                                            className=\"rounded-circle d-flex align-items-center justify-content-center\"\r\n                                                            style={{\r\n                                                                width: '40px',\r\n                                                                height: '40px',\r\n                                                                backgroundColor:\r\n                                                                    entry.newStatus === 'LivrÃ©e' ? '#198754' :\r\n                                                                        entry.newStatus === 'En expÃ©dition' ? '#0dcaf0' :\r\n                                                                            entry.newStatus === 'En cours' ? '#ffc107' :\r\n                                                                                entry.newStatus === 'AnnulÃ©e' ? '#dc3545' : '#6c757d',\r\n                                                                color: 'white'\r\n                                                            }}\r\n                                                        >\r\n                                                            <i className={`bi ${entry.newStatus === 'LivrÃ©e' ? 'bi-check-circle-fill' :\r\n                                                                entry.newStatus === 'En expÃ©dition' ? 'bi-box-seam' :\r\n                                                                    entry.newStatus === 'En cours' ? 'bi-truck' :\r\n                                                                        entry.newStatus === 'AnnulÃ©e' ? 'bi-x-circle-fill' : 'bi-clock-fill'\r\n                                                                }`}></i>\r\n                                                        </div>\r\n                                                        {index < order.timeline.length - 1 && (\r\n                                                            <div\r\n                                                                className=\"ms-3\"\r\n                                                                style={{\r\n                                                                    width: '2px',\r\n                                                                    height: '60px',\r\n                                                                    backgroundColor: '#dee2e6',\r\n                                                                    marginTop: '5px'\r\n                                                                }}\r\n                                                            ></div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex-grow-1\">\r\n                                                        <div className=\"d-flex justify-content-between align-items-start mb-1\">\r\n                                                            <div>\r\n                                                                <strong>{entry.newStatus}</strong>\r\n                                                                {entry.oldStatus && entry.oldStatus !== entry.newStatus && (\r\n                                                                    <small className=\"text-muted ms-2\">\r\n                                                                        (de {entry.oldStatus})\r\n                                                                    </small>\r\n                                                                )}\r\n                                                            </div>\r\n                                                            <small className=\"text-muted\">{entry.date}</small>\r\n                                                        </div>\r\n                                                        {entry.note && (\r\n                                                            <div className=\"alert alert-light mb-0 mt-2 py-2 px-3\">\r\n                                                                <i className=\"bi bi-info-circle me-2\"></i>\r\n                                                                {entry.note}\r\n                                                            </div>\r\n                                                        )}\r\n                                                        {entry.admin && (\r\n                                                            <small className=\"text-muted\">\r\n                                                                <i className=\"bi bi-person-badge me-1\"></i>\r\n                                                                {entry.admin}\r\n                                                            </small>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </Card.Body>\r\n                        </Card>\r\n                    )}\r\n\r\n                    {/* Order Items */}\r\n                    <Card className=\"border-0 shadow-sm mb-4\">\r\n                        <Card.Body className=\"p-4\">\r\n                            <h5 className=\"fw-bold mb-3\">Articles commandÃ©s ({order.items?.length || 0})</h5>\r\n                            <ListGroup variant=\"flush\">\r\n                                {order.items?.map((item, index) => (\r\n                                    <ListGroup.Item key={index} className=\"px-0 py-3\">\r\n                                        <Row className=\"align-items-center\">\r\n                                            <Col xs=\"auto\">\r\n                                                <img\r\n                                                    src={item.image || 'https://via.placeholder.com/80x80?text=Product'}\r\n                                                    alt={item.name}\r\n                                                    style={{\r\n                                                        width: '80px',\r\n                                                        height: '80px',\r\n                                                        objectFit: 'cover',\r\n                                                        borderRadius: '8px'\r\n                                                    }}\r\n                                                />\r\n                                            </Col>\r\n                                            <Col>\r\n                                                <h6 className=\"mb-1\">{item.name}</h6>\r\n                                                <small className=\"text-muted\">QuantitÃ©: {item.quantity}</small>\r\n                                            </Col>\r\n                                            <Col xs=\"auto\">\r\n                                                <strong className=\"text-warning\">{item.price.toLocaleString()} FCFA</strong>\r\n                                                <div className=\"small text-muted\">\r\n                                                    Total: {(item.price * item.quantity).toLocaleString()} FCFA\r\n                                                </div>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </ListGroup.Item>\r\n                                ))}\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n\r\n                    {/* Shipping Address */}\r\n                    <Card className=\"border-0 shadow-sm mb-4\">\r\n                        <Card.Body className=\"p-4\">\r\n                            <h5 className=\"fw-bold mb-3\">Adresse de livraison</h5>\r\n                            <div className=\"bg-light p-3 rounded\">\r\n                                <p className=\"mb-1\"><strong>{order.customer}</strong></p>\r\n                                <p className=\"mb-1 small\">{order.shippingAddress?.address}</p>\r\n                                <p className=\"mb-1 small\">{order.shippingAddress?.city}, {order.shippingAddress?.postalCode}</p>\r\n                                <p className=\"mb-1 small\">{order.shippingAddress?.country}</p>\r\n                                <p className=\"mb-1 small\">TÃ©l: {order.phone}</p>\r\n                                <p className=\"mb-0 small\">Email: {order.email}</p>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n\r\n                {/* Right Column - Summary */}\r\n                <Col lg={4}>\r\n                    <div className=\"sticky-top\" style={{ top: '100px', zIndex: 10, transition: 'all 0.3s ease' }}>\r\n                        <Card className=\"border-0 shadow-sm mb-3\">\r\n                            <Card.Body className=\"p-4\">\r\n                                <h5 className=\"fw-bold mb-4\">RÃ©sumÃ© de la commande</h5>\r\n\r\n                                <div className=\"d-flex justify-content-between mb-2\">\r\n                                    <span className=\"text-muted\">Sous-total</span>\r\n                                    <span>{(order.total - (order.shippingCost || 0)).toLocaleString()} FCFA</span>\r\n                                </div>\r\n\r\n                                <div className=\"d-flex justify-content-between mb-2\">\r\n                                    <span className=\"text-muted\">Livraison</span>\r\n                                    <span>{order.shippingCost ? `${order.shippingCost.toLocaleString()} FCFA` : 'Gratuite'}</span>\r\n                                </div>\r\n\r\n                                <hr />\r\n\r\n                                <div className=\"d-flex justify-content-between mb-3\">\r\n                                    <strong>Total</strong>\r\n                                    <strong className=\"text-warning fs-5\">{order.total.toLocaleString()} FCFA</strong>\r\n                                </div>\r\n\r\n                                <div className=\"bg-light p-3 rounded\">\r\n                                    <small className=\"text-muted d-block mb-1\">NumÃ©ro de commande</small>\r\n                                    <strong className=\"small\">{order.id}</strong>\r\n                                </div>\r\n                            </Card.Body>\r\n                        </Card>\r\n\r\n                        {/* Actions */}\r\n                        <Card className=\"border-0 shadow-sm mt-3\">\r\n                            <Card.Body className=\"p-3\">\r\n                                {order.status === 'En attente' && (\r\n                                    <Button\r\n                                        variant=\"danger\"\r\n                                        className=\"w-100 mb-2\"\r\n                                        onClick={() => {\r\n                                            if (window.confirm('ÃŠtes-vous sÃ»r de vouloir annuler ? L\\'administrateur devra accepter l\\'annulation avant que votre argent ne soit retournÃ© sur votre compte.')) {\r\n                                                const timelineEntry = {\r\n                                                    date: new Date().toLocaleString('fr-FR'),\r\n                                                    oldStatus: order.status,\r\n                                                    newStatus: \"Demande d'annulation\",\r\n                                                    note: \"L'utilisateur a demandÃ© l'annulation.\",\r\n                                                    admin: \"Client\"\r\n                                                };\r\n                                                updateOrder(order.id, {\r\n                                                    status: \"Demande d'annulation\",\r\n                                                    timeline: [...(order.timeline || []), timelineEntry]\r\n                                                });\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <i className=\"bi bi-x-circle me-2\"></i>\r\n                                        Annuler la commande\r\n                                    </Button>\r\n                                )}\r\n                                <Button\r\n                                    variant=\"outline-warning\"\r\n                                    className=\"w-100 mb-2\"\r\n                                    onClick={() => window.print()}\r\n                                >\r\n                                    <i className=\"bi bi-printer me-2\"></i>\r\n                                    Imprimer\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline-secondary\"\r\n                                    className=\"w-100\"\r\n                                    onClick={() => navigate('/shop')}\r\n                                >\r\n                                    <i className=\"bi bi-shop me-2\"></i>\r\n                                    Continuer mes achats\r\n                                </Button>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default OrderDetails;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Orders.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":18},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":45,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2043,2083],"text":"Vous n&apos;avez pas encore passÃ© de commande"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2043,2083],"text":"Vous n&lsquo;avez pas encore passÃ© de commande"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2043,2083],"text":"Vous n&#39;avez pas encore passÃ© de commande"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2043,2083],"text":"Vous n&rsquo;avez pas encore passÃ© de commande"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Container, Row, Col, Card, ListGroup, Badge, Button } from 'react-bootstrap';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useData } from '../context/DataContext';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst Orders = () => {\r\n    const { user } = useAuth();\r\n    const { orders } = useData();\r\n    const navigate = useNavigate();\r\n\r\n    // Filter orders by user email\r\n    const userOrders = orders.filter(order => order.email === user?.email);\r\n\r\n    const getStatusIcon = (status) => {\r\n        if (status === 'LivrÃ©e' || status === 'ComplÃ©tÃ©e') return 'bi bi-check-circle-fill text-success';\r\n        if (status === 'AnnulÃ©e') return 'bi bi-x-circle-fill text-danger';\r\n        if (status === 'En expÃ©dition') return 'bi bi-box-seam text-info';\r\n        if (status === 'En attente' || status === 'En cours') return 'bi bi-clock-fill text-warning';\r\n        if (status === \"Demande d'annulation\") return 'bi bi-hourglass-split text-warning';\r\n        return 'bi bi-box-seam text-secondary';\r\n    };\r\n\r\n    if (!user) {\r\n        return (\r\n            <Container className=\"py-5 text-center\">\r\n                <h3>Veuillez vous connecter pour voir vos commandes</h3>\r\n                <Link to=\"/login\" className=\"btn btn-primary mt-3\">Se connecter</Link>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <div className=\"mb-4\">\r\n                <h3 className=\"fw-bold\">Mes commandes</h3>\r\n                <p className=\"text-muted mb-0\">Suivez vos commandes en cours et consultez votre historique</p>\r\n            </div>\r\n\r\n            {userOrders.length === 0 ? (\r\n                <Card className=\"shadow-sm border-0 text-center p-5\">\r\n                    <i className=\"bi bi-box-seam\" style={{ fontSize: '5rem', color: '#ddd' }}></i>\r\n                    <h4 className=\"mt-4 text-muted\">Aucune commande</h4>\r\n                    <p className=\"text-muted\">Vous n'avez pas encore passÃ© de commande</p>\r\n                    <Button variant=\"warning\" className=\"text-white mt-3\" onClick={() => navigate('/shop')}>\r\n                        DÃ©couvrir la boutique\r\n                    </Button>\r\n                </Card>\r\n            ) : (\r\n                <>\r\n                    {/* Active Orders Section */}\r\n                    {userOrders.filter(order => order.status !== 'LivrÃ©e' && order.status !== 'AnnulÃ©e').length > 0 && (\r\n                        <Card className=\"shadow-sm border-0 mb-4\">\r\n                            <Card.Header className=\"bg-white border-bottom p-3\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <h5 className=\"mb-0 fw-bold\">\r\n                                        <i className=\"bi bi-clock-history text-warning me-2\"></i>\r\n                                        Commandes en cours\r\n                                    </h5>\r\n                                    <Badge bg=\"warning\" text=\"dark\">\r\n                                        {userOrders.filter(order => order.status !== 'LivrÃ©e' && order.status !== 'AnnulÃ©e').length}\r\n                                    </Badge>\r\n                                </div>\r\n                            </Card.Header>\r\n                            <Card.Body className=\"p-0\">\r\n                                <ListGroup variant=\"flush\">\r\n                                    {userOrders.filter(order => order.status !== 'LivrÃ©e' && order.status !== 'AnnulÃ©e').map(order => (\r\n                                        <ListGroup.Item key={order.id} className=\"p-4\">\r\n                                            <Row className=\"align-items-center\">\r\n                                                <Col md={2}>\r\n                                                    <div className=\"text-center\">\r\n                                                        <i className={`${getStatusIcon(order.status)} mb-2`} style={{ fontSize: '2rem' }}></i>\r\n                                                        <h6 className=\"mb-0\">#{order.id}</h6>\r\n                                                        <small className=\"text-muted\">{order.date}</small>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col md={3}>\r\n                                                    <small className=\"text-muted d-block\">Client</small>\r\n                                                    <strong>{order.customerName}</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <small className=\"text-muted d-block\">Articles</small>\r\n                                                    <strong>{order.items?.length || 0} article(s)</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <small className=\"text-muted d-block\">Montant</small>\r\n                                                    <strong className=\"text-success\">{order.total.toLocaleString()} FCFA</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <Badge bg={\r\n                                                        order.status === 'En expÃ©dition' ? 'info' :\r\n                                                            order.status === 'En cours' ? 'warning' :\r\n                                                                order.status === 'En attente' ? 'secondary' :\r\n                                                                    order.status === \"Demande d'annulation\" ? 'warning' :\r\n                                                                        order.status === 'AnnulÃ©e' ? 'danger' : 'primary'\r\n                                                    } className=\"w-100 py-2\">\r\n                                                        {order.status}\r\n                                                    </Badge>\r\n                                                </Col>\r\n                                                <Col md={1}>\r\n                                                    <Button\r\n                                                        variant=\"outline-warning\"\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => navigate(`/profile/orders/${order.id}`)}\r\n                                                    >\r\n                                                        <i className=\"bi bi-eye\"></i>\r\n                                                    </Button>\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    )}\r\n\r\n                    {/* Delivered & Cancelled Orders Section */}\r\n                    {userOrders.filter(order => order.status === 'LivrÃ©e' || order.status === 'AnnulÃ©e').length > 0 && (\r\n                        <Card className=\"shadow-sm border-0\">\r\n                            <Card.Header className=\"bg-white border-bottom p-3\">\r\n                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                    <h5 className=\"mb-0 fw-bold\">\r\n                                        <i className=\"bi bi-clock-history text-secondary me-2\"></i>\r\n                                        Historique des commandes\r\n                                    </h5>\r\n                                    <Badge bg=\"secondary\">\r\n                                        {userOrders.filter(order => order.status === 'LivrÃ©e' || order.status === 'AnnulÃ©e').length}\r\n                                    </Badge>\r\n                                </div>\r\n                            </Card.Header>\r\n                            <Card.Body className=\"p-0\">\r\n                                <ListGroup variant=\"flush\">\r\n                                    {userOrders.filter(order => order.status === 'LivrÃ©e' || order.status === 'AnnulÃ©e').map(order => (\r\n                                        <ListGroup.Item key={order.id} className=\"p-4 bg-light bg-opacity-50\">\r\n                                            <Row className=\"align-items-center\">\r\n                                                <Col md={2}>\r\n                                                    <div className=\"text-center\">\r\n                                                        <i className=\"bi bi-check-circle-fill text-success mb-2\" style={{ fontSize: '2rem' }}></i>\r\n                                                        <h6 className=\"mb-0\">#{order.id}</h6>\r\n                                                        <small className=\"text-muted\">{order.date}</small>\r\n                                                    </div>\r\n                                                </Col>\r\n                                                <Col md={3}>\r\n                                                    <small className=\"text-muted d-block\">Client</small>\r\n                                                    <strong>{order.customerName}</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <small className=\"text-muted d-block\">Articles</small>\r\n                                                    <strong>{order.items?.length || 0} article(s)</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <small className=\"text-muted d-block\">Montant</small>\r\n                                                    <strong className=\"text-success\">{order.total.toLocaleString()} FCFA</strong>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <Badge bg=\"success\" className=\"w-100 py-2\">\r\n                                                        LivrÃ©e\r\n                                                    </Badge>\r\n                                                </Col>\r\n                                                <Col md={1}>\r\n                                                    <Button\r\n                                                        variant=\"outline-success\"\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => navigate(`/profile/orders/${order.id}`)}\r\n                                                    >\r\n                                                        <i className=\"bi bi-eye\"></i>\r\n                                                    </Button>\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    )}\r\n                </>\r\n            )}\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Orders;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\ProductDetails.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":3,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":44},{"ruleId":"no-unused-vars","severity":1,"message":"'Breadcrumb' is defined but never used.","line":3,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":56},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":3,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":68},{"ruleId":"no-unused-vars","severity":1,"message":"'sizes' is assigned a value but never used.","line":53,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":16},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedCity'. Either include it or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setDeliveryDate' needs the current value of 'selectedCity'.","line":137,"column":8,"nodeType":"ArrayExpression","endLine":137,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [product, id, selectedCity]","fix":{"range":[5778,5791],"text":"[product, id, selectedCity]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":634,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[39886,40048],"text":"\r\n                                                PossibilitÃ© de commander jusqu&apos;Ã  10 articles maximum par commande.\r\n                                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[39886,40048],"text":"\r\n                                                PossibilitÃ© de commander jusqu&lsquo;Ã  10 articles maximum par commande.\r\n                                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[39886,40048],"text":"\r\n                                                PossibilitÃ© de commander jusqu&#39;Ã  10 articles maximum par commande.\r\n                                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[39886,40048],"text":"\r\n                                                PossibilitÃ© de commander jusqu&rsquo;Ã  10 articles maximum par commande.\r\n                                            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":754,"column":113,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[48837,48863],"text":"Aucun avis pour l&apos;instant."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[48837,48863],"text":"Aucun avis pour l&lsquo;instant."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[48837,48863],"text":"Aucun avis pour l&#39;instant."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[48837,48863],"text":"Aucun avis pour l&rsquo;instant."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, Row, Col, Button, Badge, Breadcrumb, Form, Card, Modal } from 'react-bootstrap';\r\nimport { useData } from '../context/DataContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useFavorites } from '../context/FavoritesContext';\r\nimport ProductCard from '../components/ProductCard';\r\n\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ProductDetails = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { products, reviews, addReview, orders } = useData();\r\n    const { user } = useAuth();\r\n    const { addToCart } = useCart();\r\n    const { isFavorite, toggleFavorite } = useFavorites();\r\n\r\n    const product = products.find(p => p.id === parseInt(id));\r\n\r\n    const [selectedImage, setSelectedImage] = useState('');\r\n    const [selectedColor, setSelectedColor] = useState(null);\r\n    const [selectedSize, setSelectedSize] = useState(null);\r\n    const [selectedStorage, setSelectedStorage] = useState(null);\r\n    const [userRating, setUserRating] = useState(5);\r\n    const [userComment, setUserComment] = useState('');\r\n    const [showReviewForm, setShowReviewForm] = useState(false);\r\n    const [showReviews, setShowReviews] = useState(false);\r\n    const [selectionError, setSelectionError] = useState(null);\r\n    const [showFullDescription, setShowFullDescription] = useState(false);\r\n    const [reviewImages, setReviewImages] = useState([]);\r\n\r\n    const handleImageUpload = (e) => {\r\n        const files = Array.from(e.target.files);\r\n        const imagePromises = files.map(file => {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = (event) => resolve(event.target.result);\r\n                reader.onerror = (error) => reject(error);\r\n                reader.readAsDataURL(file);\r\n            });\r\n        });\r\n\r\n        Promise.all(imagePromises)\r\n            .then(base64Images => {\r\n                setReviewImages(prev => [...prev, ...base64Images]);\r\n            })\r\n            .catch(error => console.error(\"Error uploading images:\", error));\r\n    };\r\n\r\n    // Mock options\r\n    const sizes = ['XS', 'S', 'M', 'L', 'XL', 'XXL'];\r\n    const storageOptions = ['128Go', '256Go', '512Go', '1To'];\r\n\r\n    // Location & Delivery State\r\n    const [showLocationModal, setShowLocationModal] = useState(false);\r\n    const [selectedCountry, setSelectedCountry] = useState('Tchad');\r\n    const [selectedCity, setSelectedCity] = useState(\"N'DjamÃ©na\");\r\n    const [selectedDistrict, setSelectedDistrict] = useState('Moursal');\r\n\r\n    // Temp state for modal\r\n    const [tempCountry, setTempCountry] = useState('Tchad');\r\n    const [tempCity, setTempCity] = useState(\"N'DjamÃ©na\");\r\n    const [tempDistrict, setTempDistrict] = useState('Moursal');\r\n\r\n    const [deliveryDate, setDeliveryDate] = useState('');\r\n\r\n    // Mock Location Data (International)\r\n    const locationData = {\r\n        'Tchad': {\r\n            \"N'DjamÃ©na\": ['Moursal', 'Chagoua', 'Sabangali', 'Farcha', 'Diguel', 'Paris Congo', 'AmriguÃ©bÃ©', 'Walia'],\r\n            'Moundou': ['DjarabÃ©', 'Dombeur', 'Gueldjem', 'Quinze Ans'],\r\n            'Sarh': ['Baguirmi', 'Balimba', 'Centre-ville', 'MaÃ¯ngara'],\r\n            'AbÃ©chÃ©': ['Goz Amir', 'Taradon', 'El-Salam', 'Centre']\r\n        },\r\n        'France': {\r\n            'Paris': ['Paris 1er', 'Paris 8Ã¨me', 'Paris 16Ã¨me', 'La DÃ©fense', 'Le Marais'],\r\n            'Lyon': ['Part-Dieu', 'Bellecour', 'Confluence', 'Vieux Lyon'],\r\n            'Marseille': ['Vieux-Port', 'Prado', 'Panier', 'EuromÃ©diterranÃ©e'],\r\n            'Bordeaux': ['Centre', 'Chartrons', 'Saint-Michel']\r\n        },\r\n        'Canada': {\r\n            'MontrÃ©al': ['Centre-Ville', 'Le Plateau', 'Vieux-MontrÃ©al', 'Rosemont'],\r\n            'QuÃ©bec': ['Sainte-Foy', 'Vieux-QuÃ©bec', 'Limoilou'],\r\n            'Toronto': ['Downtown', 'Scarborough', 'North York'],\r\n            'Ottawa': ['ByWard Market', 'Centretown', 'Gatineau']\r\n        },\r\n        'Ã‰tats-Unis': {\r\n            'New York': ['Manhattan', 'Brooklyn', 'Queens', 'Bronx'],\r\n            'Washington DC': ['Capitol Hill', 'Georgetown', 'Downtown'],\r\n            'Los Angeles': ['Hollywood', 'Santa Monica', 'Downtown LA'],\r\n            'Miami': ['South Beach', 'Brickell', 'Wynwood']\r\n        }\r\n    };\r\n\r\n    const calculateDeliveryDate = (city, country) => {\r\n        const today = new Date();\r\n        let daysToAdd = 7; // Standard\r\n\r\n        if (country === 'Tchad') {\r\n            if (city === \"N'DjamÃ©na\") {\r\n                daysToAdd = 5; // Express Local\r\n            } else {\r\n                daysToAdd = 7; // Standard Local\r\n            }\r\n        } else {\r\n            // International Shipping\r\n            daysToAdd = 10;\r\n        }\r\n\r\n        const delivery = new Date(today);\r\n        delivery.setDate(today.getDate() + daysToAdd);\r\n\r\n        const options = { weekday: 'long', day: 'numeric', month: 'long' };\r\n        return delivery.toLocaleDateString('fr-FR', options);\r\n    };\r\n\r\n\r\n    const handleLocationSave = () => {\r\n        setSelectedCountry(tempCountry);\r\n        setSelectedCity(tempCity);\r\n        setSelectedDistrict(tempDistrict);\r\n        setDeliveryDate(calculateDeliveryDate(tempCity, tempCountry));\r\n        setShowLocationModal(false);\r\n    };\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (product) {\r\n            setSelectedImage(product.image || (product.images && product.images[0]));\r\n            // Don't auto-select color/size to force mandatory selection\r\n            setDeliveryDate(calculateDeliveryDate(selectedCity));\r\n        }\r\n        window.scrollTo(0, 0);\r\n    }, [product, id]);\r\n\r\n    if (!product) {\r\n        return <Container className=\"py-5 text-center mt-5\"><h3>Produit non trouvÃ©</h3></Container>;\r\n    }\r\n\r\n    const isClothing = ['Mode', 'VÃªtements', 'Robes', 'Chemises', 'Pantalons', 'Robe BohÃ¨me Chic'].includes(product.category) || product.category.toLowerCase().includes('robe') || product.category.toLowerCase().includes('vetement');\r\n    const isShoes = ['Chaussures', 'Sacs'].includes(product.category) || product.category.toLowerCase().includes('chaussure');\r\n    const isTech = ['Ã‰lectronique', 'TÃ©lÃ©phones', 'Ordinateurs', 'Tech', 'Smartphones'].includes(product.category) || product.category.toLowerCase().includes('tech');\r\n\r\n    const productReviews = reviews.filter(r => r.productId === product.id);\r\n    const averageRating = productReviews.length > 0\r\n        ? (productReviews.reduce((acc, curr) => acc + curr.rating, 0) / productReviews.length).toFixed(1)\r\n        : null;\r\n\r\n    const similarProducts = products.filter(p => p.category === product.category && p.id !== product.id).slice(0, 8);\r\n\r\n    const isVerifiedBuyer = user && orders.some(order =>\r\n        (order.email === user.email || order.userId === user.id) &&\r\n        (order.status === 'LivrÃ©e' || order.status === 'ComplÃ©tÃ©e') &&\r\n        order.items.some(item => item.id === product.id)\r\n    );\r\n\r\n    const productImages = product.images || [product.image];\r\n\r\n\r\n    const validateSelection = () => {\r\n        if (product.colors && product.colors.length > 0 && !selectedColor) {\r\n            setSelectionError('Veuillez sÃ©lectionner une couleur');\r\n            return false;\r\n        }\r\n        // Check if sizes exist, regardless of category\r\n        if (product.availableSizes && product.availableSizes.length > 0 && !selectedSize) {\r\n            setSelectionError(`Veuillez sÃ©lectionner une ${isShoes ? 'pointure' : 'taille'}`);\r\n            return false;\r\n        }\r\n        if (isTech && !selectedStorage) {\r\n            setSelectionError('Veuillez sÃ©lectionner une capacitÃ© de stockage');\r\n            return false;\r\n        }\r\n        setSelectionError(null);\r\n        return true;\r\n    };\r\n\r\n    const handleAddToCart = () => {\r\n        if (!validateSelection()) return;\r\n\r\n        const itemToAdd = { ...product, selectedColor };\r\n        if (product.availableSizes && product.availableSizes.length > 0) itemToAdd.selectedSize = selectedSize;\r\n        if (isTech) itemToAdd.selectedStorage = selectedStorage;\r\n\r\n        addToCart(itemToAdd);\r\n        toast.success(`AjoutÃ© au panier : ${product.name} ${selectedSize ? `(${selectedSize})` : ''}`, {\r\n            position: \"bottom-right\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n        });\r\n    };\r\n\r\n    const handleBuyNow = () => {\r\n        if (!validateSelection()) return;\r\n\r\n        const itemToAdd = { ...product, selectedColor };\r\n        if (product.availableSizes && product.availableSizes.length > 0) itemToAdd.selectedSize = selectedSize;\r\n        if (isTech) itemToAdd.selectedStorage = selectedStorage;\r\n\r\n        addToCart(itemToAdd);\r\n        navigate('/checkout');\r\n    };\r\n\r\n    const handleSubmitReview = (e) => {\r\n        e.preventDefault();\r\n        const newReview = {\r\n            id: Date.now(),\r\n            productId: product.id,\r\n            userName: user?.name || \"Utilisateur\",\r\n            rating: userRating,\r\n            comment: userComment,\r\n            images: reviewImages,\r\n            date: new Date().toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' })\r\n        };\r\n        addReview(newReview);\r\n        setUserComment('');\r\n        setReviewImages([]);\r\n        setShowReviewForm(false);\r\n    };\r\n\r\n    // Tech Design tokens\r\n    const colors = {\r\n        primary: '#FF6000', // Modern Tech Orange\r\n        background: '#FFFFFF',\r\n        textMain: '#1D1D1F',\r\n        textSecondary: '#86868B',\r\n        accent: '#FF7A29',\r\n        border: 'rgba(0,0,0,0.08)'\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"product-details-tech\" style={{ backgroundColor: colors.background, minHeight: '100vh', paddingTop: '10px', paddingBottom: '40px' }}>\r\n            <Container>\r\n                {/* Breadcrumb - Minimal */}\r\n                {/* Premium Breadcrumb */}\r\n                <div className=\"d-none d-md-flex align-items-center gap-2 mb-3\" style={{ fontSize: '0.85rem' }}>\r\n                    <div\r\n                        onClick={() => navigate('/')}\r\n                        className=\"d-flex align-items-center gap-1 cursor-pointer hover-opacity\"\r\n                        style={{ color: colors.textSecondary, cursor: 'pointer', transition: 'all 0.2s' }}\r\n                    >\r\n                        <i className=\"bi bi-house-door\" style={{ fontSize: '1rem' }}></i>\r\n                        <span>Accueil</span>\r\n                    </div>\r\n\r\n                    <i className=\"bi bi-chevron-right\" style={{ color: colors.border, fontSize: '0.7rem' }}></i>\r\n\r\n                    <div\r\n                        onClick={() => navigate('/shop')}\r\n                        className=\"cursor-pointer hover-opacity\"\r\n                        style={{ color: colors.textSecondary, cursor: 'pointer', transition: 'all 0.2s' }}\r\n                    >\r\n                        Boutique\r\n                    </div>\r\n\r\n                    <i className=\"bi bi-chevron-right\" style={{ color: colors.border, fontSize: '0.7rem' }}></i>\r\n\r\n                    <div style={{ color: colors.textMain, fontWeight: '600' }}>\r\n                        {product.name}\r\n                    </div>\r\n                </div>\r\n\r\n                <Row className=\"g-0 justify-content-center\">\r\n                    {/* --- IMAGE GALLERY (Floating Card) --- */}\r\n                    <Col lg={showReviews ? 4 : 5}>\r\n                        <div className=\"gallery-float-card bg-white p-2 shadow-sm border-0 d-flex flex-column mb-4\" style={{ borderRadius: '16px 0 0 16px', height: '620px' }}>\r\n                            <div className=\"position-relative overflow-hidden mb-2\" style={{ flex: '1 1 auto', maxHeight: '520px', borderRadius: '12px', backgroundColor: '#fcfcfc' }}>\r\n                                <img\r\n                                    src={selectedImage}\r\n                                    alt={product.name}\r\n                                    className=\"w-100 h-100\"\r\n                                    style={{ objectFit: 'contain' }}\r\n                                />\r\n\r\n                                {/* Float heart button */}\r\n                                <Button\r\n                                    variant=\"white\"\r\n                                    onClick={() => toggleFavorite(product.id)}\r\n                                    className=\"position-absolute top-0 end-0 m-4 rounded-circle border-0 shadow-sm d-flex align-items-center justify-content-center\"\r\n                                    style={{ width: '48px', height: '48px', backgroundColor: 'rgba(255,255,255,0.8)', backdropFilter: 'blur(10px)', zIndex: 10 }}\r\n                                >\r\n                                    <i className={`bi ${isFavorite(product.id) ? 'bi-heart-fill text-danger' : 'bi-heart text-dark'} fs-4`}></i>\r\n                                </Button>\r\n\r\n                                {/* Navigation Arrows */}\r\n                                {productImages.length > 1 && (\r\n                                    <>\r\n                                        <Button\r\n                                            variant=\"white\"\r\n                                            onClick={() => {\r\n                                                const currentIndex = productImages.indexOf(selectedImage);\r\n                                                const prevIndex = currentIndex === 0 ? productImages.length - 1 : currentIndex - 1;\r\n                                                setSelectedImage(productImages[prevIndex]);\r\n                                            }}\r\n                                            className=\"position-absolute top-50 start-0 translate-middle-y ms-3 rounded-circle border-0 shadow-sm d-flex align-items-center justify-content-center\"\r\n                                            style={{ width: '40px', height: '40px', backgroundColor: 'rgba(255,255,255,0.9)', backdropFilter: 'blur(10px)', zIndex: 10 }}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-left\" style={{ fontSize: '1.2rem' }}></i>\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"white\"\r\n                                            onClick={() => {\r\n                                                const currentIndex = productImages.indexOf(selectedImage);\r\n                                                const nextIndex = currentIndex === productImages.length - 1 ? 0 : currentIndex + 1;\r\n                                                setSelectedImage(productImages[nextIndex]);\r\n                                            }}\r\n                                            className=\"position-absolute top-50 end-0 translate-middle-y me-3 rounded-circle border-0 shadow-sm d-flex align-items-center justify-content-center\"\r\n                                            style={{ width: '40px', height: '40px', backgroundColor: 'rgba(255,255,255,0.9)', backdropFilter: 'blur(10px)', zIndex: 10 }}\r\n                                        >\r\n                                            <i className=\"bi bi-chevron-right\" style={{ fontSize: '1.2rem' }}></i>\r\n                                        </Button>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Horizontal Thumbnails (Low Profile) */}\r\n                            <div className=\"d-flex gap-2 overflow-auto py-1 px-1 no-scrollbar justify-content-center\" style={{ flex: '0 0 auto', minHeight: '75px' }}>\r\n                                {productImages.map((img, idx) => (\r\n                                    <div\r\n                                        key={idx}\r\n                                        className=\"thumbnail-tech rounded-3 overflow-hidden border-2\"\r\n                                        style={{\r\n                                            width: '70px',\r\n                                            height: '70px',\r\n                                            cursor: 'pointer',\r\n                                            flexShrink: 0,\r\n                                            transition: 'transform 0.2s',\r\n                                            borderColor: selectedImage === img ? colors.primary : 'transparent',\r\n                                            borderStyle: 'solid',\r\n                                            padding: '3px',\r\n                                            backgroundColor: '#f9f9f9'\r\n                                        }}\r\n                                        onClick={() => setSelectedImage(img)}\r\n                                    >\r\n                                        <img src={img} alt={`Thumb ${idx}`} className=\"w-100 h-100 rounded-2\" style={{ objectFit: 'cover' }} />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </Col>\r\n\r\n                    {/* --- INFO COLUMN --- */}\r\n                    <Col lg={showReviews ? 4 : 5}>\r\n                        {/* Static Container forming the middle or right part of the card */}\r\n                        <div\r\n                            className=\"bg-white shadow-sm border-0 position-relative\"\r\n                            style={{\r\n                                height: '620px',\r\n                                borderRadius: showReviews ? '0' : '0 16px 16px 0',\r\n                                overflow: 'hidden',\r\n                                borderLeft: '1px solid rgba(0,0,0,0.05)'\r\n                            }}\r\n                        >\r\n                            {/* Scrollable Content Area */}\r\n                            <div className=\"h-100 w-100 p-3 p-md-4 custom-scroll position-relative\" style={{ overflowY: 'auto' }}>\r\n                                <div className=\"vstack gap-2\">\r\n                                    {/* Rating in top-right corner */}\r\n                                    <div\r\n                                        className=\"position-absolute d-flex align-items-center gap-1 cursor-pointer transition-all bg-white p-2 rounded-3 shadow-sm\"\r\n                                        onClick={() => setShowReviews(!showReviews)}\r\n                                        style={{\r\n                                            cursor: 'pointer',\r\n                                            top: '20px',\r\n                                            right: '25px',\r\n                                            zIndex: 10,\r\n                                            border: '1px solid rgba(0,0,0,0.05)'\r\n                                        }}\r\n                                    >\r\n                                        <i className=\"bi bi-star-fill\" style={{ fontSize: '0.75rem', color: '#FFD700' }}></i>\r\n                                        <span className=\"fw-bold\" style={{ fontSize: '0.8rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>{averageRating || '4.0'}</span>\r\n                                        <span className=\"text-muted\" style={{ fontSize: '0.75rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>({productReviews.length})</span>\r\n                                        <i className={`bi bi-chevron-${showReviews ? 'up' : 'down'} small ms-1 text-muted`} style={{ fontSize: '0.65rem' }}></i>\r\n                                    </div>\r\n\r\n                                    {/* Category & Rating Mini Row */}\r\n                                    <h4 className=\"fw-bold mb-1 pe-5\" style={{ color: colors.textMain, letterSpacing: '-0.3px', fontFamily: '\"Segoe UI\", Roboto, Helvetica, Arial, sans-serif', fontSize: '1.35rem' }}>{product.name}</h4>\r\n                                    <div className=\"mb-3\" style={{ color: colors.textSecondary, lineHeight: '1.5', fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, Helvetica, Arial, sans-serif' }}>{product.description}</div>\r\n                                    <div className=\"price-tag mb-1\">\r\n                                        <span className=\"fw-bold\" style={{ color: colors.primary, fontSize: '1.5rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif', letterSpacing: '-0.3px' }}>{product.price.toLocaleString()} FCFA</span>\r\n                                    </div>\r\n\r\n\r\n                                    {/* Variant Selection: Colors (Rectangular Thumbnails) */}\r\n                                    {product.colors && product.colors.length > 0 && (\r\n                                        <div className=\"mb-2\">\r\n                                            <div className=\"d-flex align-items-center mb-2\">\r\n                                                <span className=\"fw-bold text-dark me-2\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>Couleur:</span>\r\n                                                <span className=\"text-muted\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>{selectedColor || 'Non sÃ©lectionnÃ©e'}</span>\r\n                                            </div>\r\n                                            <div className=\"d-flex flex-wrap gap-2\">\r\n                                                {product.colors.map((color, idx) => (\r\n                                                    <div\r\n                                                        key={idx}\r\n                                                        onClick={() => {\r\n                                                            setSelectedColor(color.name);\r\n                                                            if (color.image) setSelectedImage(color.image);\r\n                                                        }}\r\n                                                        className=\"position-relative overflow-hidden transition-all\"\r\n                                                        style={{\r\n                                                            cursor: 'pointer',\r\n                                                            width: '56px',\r\n                                                            height: '66px',\r\n                                                            borderRadius: '8px',\r\n                                                            border: selectedColor === color.name ? `2px solid ${colors.primary}` : '1px solid #f0f0f0',\r\n                                                            padding: '2px',\r\n                                                            backgroundColor: '#fff',\r\n                                                            boxShadow: selectedColor === color.name ? '0 2px 8px rgba(255, 96, 0, 0.15)' : 'none'\r\n                                                        }}\r\n                                                        title={color.name}\r\n                                                    >\r\n                                                        <div\r\n                                                            className=\"w-100 h-100 rounded-2\"\r\n                                                            style={{\r\n                                                                backgroundColor: color.code,\r\n                                                                backgroundImage: color.image ? `url(${color.image})` : 'none',\r\n                                                                backgroundSize: 'cover',\r\n                                                                backgroundPosition: 'center',\r\n                                                                opacity: selectedColor === color.name ? 1 : 0.8\r\n                                                            }}\r\n                                                        />\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Variant Selection: Size (Clothing / Shoes) */}\r\n                                    {product.availableSizes && product.availableSizes.length > 0 && (\r\n                                        <div className=\"mb-2\">\r\n                                            <div className=\"d-flex align-items-center mb-2\">\r\n                                                <span className=\"fw-bold text-dark me-2\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>{isShoes ? 'Pointure' : 'Taille'}:</span>\r\n                                                <span className=\"text-muted\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>{selectedSize || 'Non sÃ©lectionnÃ©e'}</span>\r\n                                            </div>\r\n                                            <div className=\"d-flex flex-wrap gap-2\">\r\n                                                {product.availableSizes.map((size) => (\r\n                                                    <div\r\n                                                        key={size}\r\n                                                        onClick={() => {\r\n                                                            setSelectedSize(size);\r\n                                                            setSelectionError(null);\r\n                                                        }}\r\n                                                        className=\"d-flex align-items-center justify-content-center fw-bold transition-all\"\r\n                                                        style={{\r\n                                                            cursor: 'pointer',\r\n                                                            minWidth: '46px',\r\n                                                            height: '38px',\r\n                                                            padding: '0 12px',\r\n                                                            borderRadius: '6px',\r\n                                                            border: selectedSize === size ? `1.5px solid ${colors.primary}` : '1px solid #f0f0f0',\r\n                                                            backgroundColor: selectedSize === size ? '#fff' : '#f8f9fa',\r\n                                                            color: selectedSize === size ? colors.primary : '#444',\r\n                                                            fontSize: '0.8rem',\r\n                                                            fontFamily: '\"Segoe UI\", Roboto, sans-serif'\r\n                                                        }}\r\n                                                    >\r\n                                                        {size}\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Variant Selection: Storage (Tech) */}\r\n                                    {(product.storageOptions || (isTech && (storageOptions && storageOptions.length > 0))) && (\r\n                                        <div className=\"mb-2\">\r\n                                            <div className=\"d-flex align-items-center mb-2\">\r\n                                                <span className=\"fw-bold text-dark me-2\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>Stockage:</span>\r\n                                                <span className=\"text-muted\" style={{ fontSize: '0.85rem', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>{selectedStorage || 'Non sÃ©lectionnÃ©'}</span>\r\n                                            </div>\r\n                                            <div className=\"d-flex flex-wrap gap-2\">\r\n                                                {(product.storageOptions || storageOptions).map((storage) => (\r\n                                                    <div\r\n                                                        key={storage}\r\n                                                        onClick={() => {\r\n                                                            setSelectedStorage(storage);\r\n                                                            setSelectionError(null);\r\n                                                        }}\r\n                                                        className=\"d-flex align-items-center justify-content-center fw-bold transition-all\"\r\n                                                        style={{\r\n                                                            cursor: 'pointer',\r\n                                                            minWidth: '60px',\r\n                                                            height: '38px',\r\n                                                            padding: '0 12px',\r\n                                                            borderRadius: '6px',\r\n                                                            border: selectedStorage === storage ? `1.5px solid ${colors.primary}` : '1px solid #f0f0f0',\r\n                                                            backgroundColor: selectedStorage === storage ? '#fff' : '#f8f9fa',\r\n                                                            color: selectedStorage === storage ? colors.primary : '#444',\r\n                                                            fontSize: '0.8rem',\r\n                                                            fontFamily: '\"Segoe UI\", Roboto, sans-serif'\r\n                                                        }}\r\n                                                    >\r\n                                                        {storage}\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Size Recommendation */}\r\n                                    {isClothing && (\r\n                                        <div className=\"d-flex align-items-center gap-2 mb-4 text-muted small\">\r\n                                            <i className=\"bi bi-hanger\"></i>\r\n                                            <span>La plupart des utilisateurs recommandent de prendre votre taille habituelle.</span>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Selection Error Alert */}\r\n                                    {selectionError && (\r\n                                        <div className=\"alert alert-danger py-2 px-3 border-0 small mb-3 animate-fade-in\" style={{ borderRadius: '8px', backgroundColor: '#fff2f2', color: '#d93025' }}>\r\n                                            <i className=\"bi bi-exclamation-circle-fill me-2\"></i>\r\n                                            {selectionError}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Action Buttons (Trendyol Style) */}\r\n                                    <div className=\"d-flex gap-3 mb-4\">\r\n                                        <Button\r\n                                            variant=\"outline-primary\"\r\n                                            className=\"flex-grow-1 py-3 fw-bold\"\r\n                                            style={{\r\n                                                borderRadius: '8px',\r\n                                                border: `2px solid ${colors.primary}`,\r\n                                                color: colors.primary,\r\n                                                backgroundColor: '#fff',\r\n                                                fontSize: '1rem'\r\n                                            }}\r\n                                            onClick={handleBuyNow}\r\n                                        >\r\n                                            Acheter maintenant\r\n                                        </Button>\r\n                                        <Button\r\n                                            className=\"flex-grow-1 py-3 fw-bold text-white border-0\"\r\n                                            style={{\r\n                                                borderRadius: '8px',\r\n                                                backgroundColor: colors.primary,\r\n                                                fontSize: '1rem'\r\n                                            }}\r\n                                            onClick={handleAddToCart}\r\n                                        >\r\n                                            Ajouter au panier\r\n                                        </Button>\r\n\r\n                                    </div>\r\n\r\n                                    {/* Delivery Info Box */}\r\n                                    <div className=\"bg-light p-3 mb-4 rounded-3\" style={{ backgroundColor: '#f8f9fa' }}>\r\n                                        <div className=\"d-flex align-items-start gap-3 mb-3\">\r\n                                            <div className=\"bg-white p-2 rounded-circle shadow-sm\">\r\n                                                <i className=\"bi bi-box-seam fs-5 text-primary\"></i>\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"fw-bold text-dark\" style={{ fontSize: '0.9rem' }}>\r\n                                                    Livraison estimÃ©e : <span className=\"text-success\">{deliveryDate}</span>\r\n                                                </div>\r\n                                                <div className=\"text-muted small\">\r\n                                                    {selectedCountry === \"Tchad\" && selectedCity === \"N'DjamÃ©na\" ? 'Livraison Express disponible' : 'Livraison Standard'}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div\r\n                                            className=\"d-flex align-items-center gap-3 p-2 rounded-3 hover-effect cursor-pointer\"\r\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.03)', cursor: 'pointer' }}\r\n                                            onClick={() => setShowLocationModal(true)}\r\n                                        >\r\n                                            <i className=\"bi bi-geo-alt-fill fs-5 text-danger\"></i>\r\n                                            <div className=\"flex-grow-1\">\r\n                                                <div className=\"fw-bold text-dark\" style={{ fontSize: '0.85rem' }}>Livrer Ã  : {selectedCountry}</div>\r\n                                                <div className=\"text-dark small fw-medium\">{selectedCity} - {selectedDistrict}</div>\r\n                                            </div>\r\n                                            <span className=\"fw-bold small cursor-pointer\" style={{ color: colors.primary }}>Changer &gt;</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                    {/* Refined Featured Attributes Squares */}\r\n                                    <div className=\"mb-4\">\r\n                                        <h6 className=\"fw-bold mb-3 d-flex align-items-center gap-2\" style={{ fontSize: '1rem', color: colors.textMain }}>\r\n                                            <i className=\"bi bi-info-circle text-primary\"></i>\r\n                                            CaractÃ©ristiques principales :\r\n                                        </h6>\r\n                                        <Row className=\"g-3\">\r\n                                            {(product.attributes && product.attributes.length > 0 ? product.attributes : [\r\n                                                { label: 'Coupe', value: 'Regular' },\r\n                                                { label: 'MatiÃ¨re', value: 'Polyester' },\r\n                                                { label: 'Doublure', value: 'Oui' },\r\n                                                { label: 'Col', value: 'Capuche' },\r\n                                                { label: 'Tissu', value: 'TissÃ©' },\r\n                                                { label: 'Couleur', value: selectedColor || 'Unie' },\r\n                                                { label: 'Fermeture', value: 'Ã‰clair' },\r\n                                                { label: 'Motif', value: 'Uni' }\r\n                                            ]).map((attr, idx) => (\r\n                                                <Col xs={6} md={3} key={idx}>\r\n                                                    <div\r\n                                                        className=\"p-2 h-100 transition-all text-center\"\r\n                                                        style={{\r\n                                                            backgroundColor: '#f5f5f5',\r\n                                                            borderRadius: '6px',\r\n                                                            transition: 'transform 0.2s ease',\r\n                                                            fontFamily: \"'Inter', sans-serif\"\r\n                                                        }}\r\n                                                    >\r\n                                                        <div className=\"text-secondary mb-0\" style={{ fontSize: '0.65rem', fontWeight: '500', opacity: 0.8, letterSpacing: '0.2px' }}>{attr.label}</div>\r\n                                                        <div className=\"fw-bold text-dark text-truncate\" style={{ fontSize: '0.82rem', fontFamily: \"'Manrope', sans-serif\", fontWeight: '700' }}>{attr.value}</div>\r\n                                                    </div>\r\n                                                </Col>\r\n                                            ))}\r\n                                        </Row>\r\n                                    </div>\r\n\r\n                                    {/* Bullet Points (Marketing) */}\r\n                                    <div className=\"small text-muted\">\r\n                                        <ul className=\"list-unstyled d-flex flex-column gap-2 mb-0\">\r\n                                            <li className=\"d-flex gap-2\">\r\n                                                <span style={{ color: colors.primary }}>â€¢</span>\r\n                                                Ce produit sera expÃ©diÃ© par <strong>TRYMYDAY</strong>.\r\n                                            </li>\r\n                                            <li className=\"d-flex gap-2\">\r\n                                                <span style={{ color: colors.primary }}>â€¢</span>\r\n                                                Plus de 50 articles en stock au prix promotionnel.\r\n                                            </li>\r\n                                            <li className=\"d-flex gap-2\">\r\n                                                <span style={{ color: colors.primary }}>â€¢</span>\r\n                                                PossibilitÃ© de commander jusqu'Ã  10 articles maximum par commande.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </div>\r\n                                    <Button\r\n                                        variant=\"link\"\r\n                                        className=\"w-100 text-center text-muted small text-decoration-none mt-2 bg-light py-2 rounded-3 fw-bold\"\r\n                                        onClick={() => setShowFullDescription(!showFullDescription)}\r\n                                    >\r\n                                        {showFullDescription ? 'MOINS de caractÃ©ristiques' : 'TOUTES les caractÃ©ristiques'}\r\n                                        <i className={`bi bi-chevron-${showFullDescription ? 'up' : 'down'} ms-1`}></i>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Col>\r\n\r\n                    {/* --- REVIEWS SIDE COLUMN --- */}\r\n                    {showReviews && (\r\n                        <Col lg={4} className=\"animate-fade-in\">\r\n                            <div\r\n                                className=\"bg-white shadow-sm border-0 position-relative\"\r\n                                style={{\r\n                                    height: '520px',\r\n                                    borderRadius: '0 16px 16px 0',\r\n                                    overflow: 'hidden',\r\n                                    borderLeft: '1px solid rgba(0,0,0,0.05)'\r\n                                }}\r\n                            >\r\n                                <div className=\"h-100 w-100 p-4 custom-scroll\" style={{ overflowY: 'auto' }}>\r\n                                    <div className=\"d-flex align-items-center justify-content-between mb-4\">\r\n                                        <h5 className=\"fw-bold mb-0\">Avis clients</h5>\r\n                                        <div className=\"d-flex gap-2\">\r\n                                            {isVerifiedBuyer && (\r\n                                                <Button\r\n                                                    variant=\"link\"\r\n                                                    className=\"p-0 text-decoration-none fw-bold\"\r\n                                                    style={{ color: colors.primary, fontSize: '0.85rem' }}\r\n                                                    onClick={() => setShowReviewForm(!showReviewForm)}\r\n                                                >\r\n                                                    {showReviewForm ? 'Annuler' : 'Noter'}\r\n                                                </Button>\r\n                                            )}\r\n                                            <Button\r\n                                                variant=\"link\"\r\n                                                className=\"p-0 text-muted\"\r\n                                                onClick={() => setShowReviews(false)}\r\n                                            >\r\n                                                <i className=\"bi bi-x-lg\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {showReviewForm && (\r\n                                        <div className=\"mb-4 p-3 bg-light rounded-3\">\r\n                                            <Form onSubmit={handleSubmitReview}>\r\n                                                <div className=\"d-flex gap-2 mb-3\">\r\n                                                    {[1, 2, 3, 4, 5].map(star => (\r\n                                                        <i\r\n                                                            key={star}\r\n                                                            className={`bi bi-star${star <= userRating ? '-fill' : ''} fs-4 cursor-pointer`}\r\n                                                            style={{ color: star <= userRating ? '#FFD700' : '#E5E5EA' }}\r\n                                                            onClick={() => setUserRating(star)}\r\n                                                        ></i>\r\n                                                    ))}\r\n                                                </div>\r\n                                                <Form.Control\r\n                                                    as=\"textarea\"\r\n                                                    rows={2}\r\n                                                    placeholder=\"Votre avis...\"\r\n                                                    value={userComment}\r\n                                                    onChange={(e) => setUserComment(e.target.value)}\r\n                                                    className=\"border-0 bg-white mb-2 shadow-none small\"\r\n                                                    style={{ borderRadius: '12px' }}\r\n                                                    required\r\n                                                />\r\n                                                <div className=\"mb-3\">\r\n                                                    <input\r\n                                                        type=\"file\"\r\n                                                        accept=\"image/*\"\r\n                                                        multiple\r\n                                                        onChange={handleImageUpload}\r\n                                                        className=\"form-control form-control-sm\"\r\n                                                        style={{ borderRadius: '8px' }}\r\n                                                    />\r\n                                                </div>\r\n                                                <Button size=\"sm\" type=\"submit\" className=\"border-0 rounded-pill px-3 py-1 text-white\" style={{ backgroundColor: colors.primary }}>Publier</Button>\r\n                                            </Form>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"vstack gap-3\">\r\n                                        {productReviews.length > 0 ? (\r\n                                            productReviews.map(review => (\r\n                                                <div key={review.id} className=\"pb-3 border-bottom border-light\">\r\n                                                    <div className=\"d-flex justify-content-between align-items-center mb-1\">\r\n                                                        <span className=\"fw-bold\" style={{ fontSize: '0.85rem' }}>{review.userName}</span>\r\n                                                        <div className=\"d-flex\">\r\n                                                            {[...Array(5)].map((_, i) => (\r\n                                                                <i key={i} className={`bi bi-star${i < review.rating ? '-fill' : ''}`} style={{ color: '#FFD700', fontSize: '0.7rem' }}></i>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <p className=\"mb-2 text-muted\" style={{ fontSize: '0.8rem', lineHeight: '1.4' }}>{review.comment}</p>\r\n                                                    {review.images && review.images.length > 0 && (\r\n                                                        <div className=\"d-flex flex-wrap gap-2 mt-2\">\r\n                                                            {review.images.map((img, imgIndex) => (\r\n                                                                <img\r\n                                                                    key={imgIndex}\r\n                                                                    src={img}\r\n                                                                    alt=\"Review\"\r\n                                                                    className=\"rounded\"\r\n                                                                    style={{ width: '60px', height: '60px', objectFit: 'cover' }}\r\n                                                                />\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            ))\r\n                                        ) : (\r\n                                            <div className=\"text-center py-4 text-muted small\">Aucun avis pour l'instant.</div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Col>\r\n                    )}\r\n                </Row>\r\n\r\n                {/* --- SIMILAR PRODUCTS --- */}\r\n                {\r\n                    similarProducts.length > 0 && (\r\n                        <div className=\"mt-5 pt-4 border-top\">\r\n                            <div className=\"d-flex align-items-center justify-content-between mb-4\">\r\n                                <h4 className=\"fw-bold mb-0\" style={{ letterSpacing: '-0.5px', fontFamily: '\"Segoe UI\", Roboto, sans-serif' }}>Produits Similaires</h4>\r\n                                <Button\r\n                                    variant=\"link\"\r\n                                    className=\"text-decoration-none fw-bold\"\r\n                                    style={{ color: colors.primary, fontSize: '0.9rem' }}\r\n                                    onClick={() => navigate('/shop')}\r\n                                >\r\n                                    Tout voir\r\n                                </Button>\r\n                            </div>\r\n                            <Row xs={2} sm={3} md={4} lg={6} className=\"g-3\">\r\n                                {similarProducts.map(p => (\r\n                                    <Col key={p.id}>\r\n                                        <ProductCard product={p} />\r\n                                    </Col>\r\n                                ))}\r\n                            </Row>\r\n                        </div>\r\n                    )\r\n                }\r\n            </Container >\r\n\r\n            {/* Location Selection Modal */}\r\n            < Modal show={showLocationModal} onHide={() => setShowLocationModal(false)} centered >\r\n                <Modal.Header closeButton className=\"border-0 pb-0\">\r\n                    <Modal.Title className=\"fw-bold fs-5\">Choisir votre localisation</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"pt-2\">\r\n                    <p className=\"text-muted small mb-4\">SÃ©lectionnez votre pays, ville et quartier pour voir la date de livraison.</p>\r\n\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">PAYS</Form.Label>\r\n                            <Form.Select\r\n                                value={tempCountry}\r\n                                onChange={(e) => {\r\n                                    const newCountry = e.target.value;\r\n                                    setTempCountry(newCountry);\r\n                                    // Reset City and District based on new Country\r\n                                    const firstCity = Object.keys(locationData[newCountry])[0];\r\n                                    setTempCity(firstCity);\r\n                                    setTempDistrict(locationData[newCountry][firstCity][0]);\r\n                                }}\r\n                                style={{ borderRadius: '8px', padding: '12px' }}\r\n                            >\r\n                                {Object.keys(locationData).map(country => (\r\n                                    <option key={country} value={country}>{country}</option>\r\n                                ))}\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">VILLE</Form.Label>\r\n                            <Form.Select\r\n                                value={tempCity}\r\n                                onChange={(e) => {\r\n                                    const newCity = e.target.value;\r\n                                    setTempCity(newCity);\r\n                                    setTempDistrict(locationData[tempCountry][newCity][0]); // Reset district\r\n                                }}\r\n                                style={{ borderRadius: '8px', padding: '12px' }}\r\n                            >\r\n                                {locationData[tempCountry] && Object.keys(locationData[tempCountry]).map(city => (\r\n                                    <option key={city} value={city}>{city}</option>\r\n                                ))}\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-4\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">QUARTIER / ZONE</Form.Label>\r\n                            <Form.Select\r\n                                value={tempDistrict}\r\n                                onChange={(e) => setTempDistrict(e.target.value)}\r\n                                style={{ borderRadius: '8px', padding: '12px' }}\r\n                            >\r\n                                {locationData[tempCountry] && locationData[tempCountry][tempCity] && locationData[tempCountry][tempCity].map(district => (\r\n                                    <option key={district} value={district}>{district}</option>\r\n                                ))}\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n\r\n                        <Button\r\n                            variant=\"primary\"\r\n                            className=\"w-100 py-2 fw-bold text-white border-0\"\r\n                            style={{ backgroundColor: colors.primary, borderRadius: '8px' }}\r\n                            onClick={handleLocationSave}\r\n                        >\r\n                            Appliquer\r\n                        </Button>\r\n                    </Form>\r\n                </Modal.Body>\r\n            </Modal >\r\n\r\n            <style>{`\r\n                .product-details-tech .no-scrollbar::-webkit-scrollbar {\r\n                    display: none;\r\n                }\r\n                .product-details-tech .custom-scroll::-webkit-scrollbar {\r\n                    width: 6px;\r\n                }\r\n                .product-details-tech .custom-scroll::-webkit-scrollbar-track {\r\n                    background: transparent;\r\n                }\r\n                .product-details-tech .custom-scroll::-webkit-scrollbar-thumb {\r\n                    background: transparent;\r\n                }\r\n                .product-details-tech .custom-scroll::-webkit-scrollbar-thumb:hover {\r\n                    background: transparent;\r\n                }\r\n                .product-details-tech .transition-all {\r\n                    transition: all 0.25s ease-in-out;\r\n                }\r\n                .product-details-tech .thumbnail-tech:hover {\r\n                    transform: scale(1.05);\r\n                }\r\n                .product-details-tech .hover-translate-y:hover {\r\n                    transform: translateY(-4px);\r\n                    border-color: #FF6000 !important;\r\n                }\r\n                .product-details-tech .pill-variant:hover {\r\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.08);\r\n                }\r\n                .product-details-tech .buy-actions button:hover {\r\n                    transform: scale(1.02);\r\n                    box-shadow: 0 8px 24px rgba(255, 96, 0, 0.25) !important;\r\n                }\r\n                .product-details-tech .buy-actions button:active {\r\n                    transform: scale(0.98);\r\n                }\r\n                @keyframes fadeIn {\r\n                    from { opacity: 0; transform: translateY(-10px); }\r\n                    to { opacity: 1; transform: translateY(0); }\r\n                }\r\n                .product-details-tech .animate-fade-in {\r\n                    animation: fadeIn 0.3s ease-out forwards;\r\n                }\r\n                .hover-effect {\r\n                    transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n                }\r\n                .hover-effect:hover {\r\n                    transform: translateY(-5px);\r\n                    box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;\r\n                }\r\n                @media (max-width: 768px) {\r\n                    .gallery-float-card {\r\n                        border-radius: 20px !important;\r\n                    }\r\n                    .info-card-tech, .reviews-card-tech {\r\n                        border-radius: 20px !important;\r\n                        padding: 24px !important;\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default ProductDetails;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Profile.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":1,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":50},{"ruleId":"no-unused-vars","severity":1,"message":"'navigate' is assigned a value but never used.","line":10,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"ï»¿import { Row, Col, Card, ListGroup, Badge, Button } from 'react-bootstrap';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useData } from '../context/DataContext';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst Profile = () => {\r\n    const { user } = useAuth();\r\n    const { orders } = useData();\r\n    const navigate = useNavigate();\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"py-5 text-center\">\r\n                <h3>Veuillez vous connecter pour accÃ©der Ã  votre profil</h3>\r\n                <Link to=\"/login\" className=\"btn btn-primary mt-3\">Se connecter</Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            {/* Welcome Card */}\r\n            <Card className=\"border-0 shadow-sm mb-4\">\r\n                <Card.Body className=\"p-4\">\r\n                    <h4 className=\"mb-2\">Bienvenue, {user.name} ! ðŸ‘‹</h4>\r\n                    <p className=\"text-muted mb-0\">\r\n                        Gerez vos commandes, vos informations personnelles et bien plus encore.\r\n                    </p>\r\n                </Card.Body>\r\n            </Card>\r\n\r\n            {/* Quick Stats */}\r\n            <Row className=\"mb-4 g-3\">\r\n                <Col md={3} sm={6}>\r\n                    <Card className=\"border-0 shadow-sm h-100\" style={{\r\n                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                        color: 'white'\r\n                    }}>\r\n                        <Card.Body className=\"text-center p-3\">\r\n                            <div className=\"mb-2\" style={{ fontSize: '2rem' }}>ðŸ“¦</div>\r\n                            <h4 className=\"mb-1 fw-bold\">\r\n                                {orders.filter(o => o.email === user.email).length}\r\n                            </h4>\r\n                            <small className=\"opacity-75\">Commandes</small>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3} sm={6}>\r\n                    <Card className=\"border-0 shadow-sm h-100\" style={{\r\n                        background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\r\n                        color: 'white'\r\n                    }}>\r\n                        <Card.Body className=\"text-center p-3\">\r\n                            <div className=\"mb-2\" style={{ fontSize: '2rem' }}>â¤ï¸</div>\r\n                            <h4 className=\"mb-1 fw-bold\">\r\n                                {(() => {\r\n                                    const favs = localStorage.getItem(`favorites_${user.email}`);\r\n                                    return favs ? JSON.parse(favs).length : 0;\r\n                                })()}\r\n                            </h4>\r\n                            <small className=\"opacity-75\">Favoris</small>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3} sm={6}>\r\n                    <Card className=\"border-0 shadow-sm h-100\" style={{\r\n                        background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\r\n                        color: 'white'\r\n                    }}>\r\n                        <Card.Body className=\"text-center p-3\">\r\n                            <div className=\"mb-2\" style={{ fontSize: '2rem' }}>ðŸŽŸï¸</div>\r\n                            <h4 className=\"mb-1 fw-bold\">\r\n                                {(() => {\r\n                                    const coupons = localStorage.getItem(`coupons_${user.email}`);\r\n                                    if (!coupons) return 3;\r\n                                    const parsed = JSON.parse(coupons);\r\n                                    return parsed.filter(c => !c.used && new Date(c.expiryDate) > new Date()).length;\r\n                                })()}\r\n                            </h4>\r\n                            <small className=\"opacity-75\">Coupons actifs</small>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3} sm={6}>\r\n                    <Card className=\"border-0 shadow-sm h-100\" style={{\r\n                        background: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\r\n                        color: 'white'\r\n                    }}>\r\n                        <Card.Body className=\"text-center p-3\">\r\n                            <div className=\"mb-2\" style={{ fontSize: '2rem' }}>ðŸ“</div>\r\n                            <h4 className=\"mb-1 fw-bold\">\r\n                                {(() => {\r\n                                    const addresses = localStorage.getItem(`addresses_${user.email}`);\r\n                                    return addresses ? JSON.parse(addresses).length : 0;\r\n                                })()}\r\n                            </h4>\r\n                            <small className=\"opacity-75\">Adresses</small>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row className=\"g-4\">\r\n                {/* Recent Orders - Full Width */}\r\n                <Col lg={12}>\r\n                    <Card className=\"border-0 shadow-sm\">\r\n                        <Card.Header className=\"bg-white border-bottom p-3\">\r\n                            <div className=\"d-flex justify-content-between align-items-center\">\r\n                                <h6 className=\"mb-0 fw-bold\">Commandes rÃ©centes</h6>\r\n                                <Link to=\"/profile/orders\" className=\"btn btn-sm btn-outline-warning\">\r\n                                    Voir tout\r\n                                </Link>\r\n                            </div>\r\n                        </Card.Header>\r\n                        <Card.Body className=\"p-0\">\r\n                            {orders.filter(o => o.email === user.email).slice(0, 3).length === 0 ? (\r\n                                <div className=\"text-center p-5\">\r\n                                    <i className=\"bi bi-box-seam\" style={{ fontSize: '3rem', color: '#ddd' }}></i>\r\n                                    <p className=\"text-muted mt-3 mb-0\">Aucune commande</p>\r\n                                </div>\r\n                            ) : (\r\n                                <ListGroup variant=\"flush\">\r\n                                    {orders.filter(o => o.email === user.email).slice(0, 3).map(order => (\r\n                                        <ListGroup.Item key={order.id} className=\"p-3\">\r\n                                            <div className=\"d-flex justify-content-between align-items-center\">\r\n                                                <div className=\"d-flex align-items-center flex-grow-1\">\r\n                                                    <div className=\"me-3\">\r\n                                                        <i className=\"bi bi-box-seam text-warning\" style={{ fontSize: '1.5rem' }}></i>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h6 className=\"mb-1\">Commande #{order.id}</h6>\r\n                                                        <small className=\"text-muted\">{order.date} â€¢ {order.items?.length || 0} article(s)</small>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"text-end\">\r\n                                                    {user.role === 'admin' ? (\r\n                                                        <div className=\"mb-2\">\r\n                                                            <select\r\n                                                                className=\"form-select form-select-sm\"\r\n                                                                value={order.status}\r\n                                                                onChange={(e) => {\r\n                                                                    const newStatus = e.target.value;\r\n                                                                    const updatedOrders = orders.map(o =>\r\n                                                                        o.id === order.id ? { ...o, status: newStatus } : o\r\n                                                                    );\r\n                                                                    localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n                                                                    window.location.reload();\r\n                                                                }}\r\n                                                                style={{ minWidth: '120px' }}\r\n                                                            >\r\n                                                                <option value=\"En attente\">En attente</option>\r\n                                                                <option value=\"En cours\">En cours</option>\r\n                                                                <option value=\"LivrÃ©e\">LivrÃ©e</option>\r\n                                                                <option value=\"AnnulÃ©e\">AnnulÃ©e</option>\r\n                                                            </select>\r\n                                                        </div>\r\n                                                    ) : (\r\n                                                        <Badge bg={\r\n                                                            order.status === 'LivrÃ©e' ? 'success' :\r\n                                                                order.status === 'En cours' ? 'warning' :\r\n                                                                    order.status === 'AnnulÃ©e' ? 'danger' : 'secondary'\r\n                                                        }>\r\n                                                            {order.status}\r\n                                                        </Badge>\r\n                                                    )}\r\n                                                    <div className=\"fw-bold text-success mt-1\">{order.total.toLocaleString()} FCFA</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            )}\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Register.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":61,"column":30,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2994,3060],"text":"\r\n                            S&apos;inscrire\r\n                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2994,3060],"text":"\r\n                            S&lsquo;inscrire\r\n                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2994,3060],"text":"\r\n                            S&#39;inscrire\r\n                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2994,3060],"text":"\r\n                            S&rsquo;inscrire\r\n                        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Container, Form, Button, Card } from 'react-bootstrap';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nconst Register = () => {\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const { register } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        register(name, email, password);\r\n        navigate('/');\r\n    };\r\n\r\n    return (\r\n        <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '80vh' }}>\r\n            <Card style={{ width: '450px' }} className=\"shadow-lg border-0\">\r\n                <Card.Body className=\"p-5\">\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"fw-bold\" style={{ fontSize: '1.1rem' }}>Nom complet</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Jean Dupont\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                style={{ fontSize: '1rem', padding: '12px' }}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"fw-bold\" style={{ fontSize: '1.1rem' }}>Adresse Email</Form.Label>\r\n                            <Form.Control\r\n                                type=\"email\"\r\n                                placeholder=\"votre@email.com\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                style={{ fontSize: '1rem', padding: '12px' }}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-4\">\r\n                            <Form.Label className=\"fw-bold\" style={{ fontSize: '1.1rem' }}>Mot de passe</Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                placeholder=\"Choisissez un mot de passe\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                style={{ fontSize: '1rem', padding: '12px' }}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Button variant=\"warning\" type=\"submit\" className=\"w-100 py-3 fw-bold mb-3 text-white\" style={{ borderRadius: '10px', fontSize: '1.1rem' }}>\r\n                            S'inscrire\r\n                        </Button>\r\n                    </Form>\r\n\r\n                    <div className=\"text-center mt-3\">\r\n                        <small className=\"text-muted\">DÃ©jÃ  un compte ? <Link to=\"/login\" className=\"fw-bold text-warning\">Connexion</Link></small>\r\n                    </div>\r\n                </Card.Body>\r\n            </Card>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Reorder.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\SavedCards.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Shop.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Form' is defined but never used.","line":1,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":35},{"ruleId":"no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":5,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'categoryList' is assigned a value but never used.","line":35,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Form } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useData, CATEGORIES } from '../context/DataContext';\r\nimport ProductCard from '../components/ProductCard';\r\nimport { useLocation, Link } from 'react-router-dom';\r\n\r\nconst Shop = () => {\r\n    const { products } = useData();\r\n    const location = useLocation();\r\n\r\n    // Get params from URL\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const catParam = queryParams.get('cat');\r\n    const subParam = queryParams.get('sub');\r\n    const brandParam = queryParams.get('brand');\r\n\r\n    const [filter, setFilter] = useState(catParam || 'All');\r\n    const [subFilter, setSubFilter] = useState(subParam || 'All');\r\n    const [brandFilter, setBrandFilter] = useState(brandParam || 'All');\r\n\r\n    // Sync state with URL params\r\n    useEffect(() => {\r\n        setFilter(catParam || 'All');\r\n        setSubFilter(subParam || 'All');\r\n        setBrandFilter(brandParam || 'All');\r\n    }, [catParam, subParam, brandParam]);\r\n\r\n    const filteredProducts = products.filter(p => {\r\n        const matchesCat = filter === 'All' || p.category === filter;\r\n        const matchesSub = subFilter === 'All' || p.subcategory === subFilter;\r\n        const matchesBrand = brandFilter === 'All' || (p.brand && p.brand.toLowerCase() === brandFilter.toLowerCase());\r\n        return matchesCat && matchesSub && matchesBrand;\r\n    });\r\n\r\n    const categoryList = ['All', ...Object.keys(CATEGORIES)];\r\n\r\n    return (\r\n        <Container className=\"py-3\">\r\n\r\n            <div className=\"d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-3 gap-3\">\r\n                <div>\r\n                    <h1 className=\"fw-bold mb-0 fs-2\">\r\n                        {brandFilter !== 'All' ? `Produits ${brandFilter}` : (filter === 'All' ? 'Tous nos produits' : (subFilter === 'All' ? filter : subFilter))}\r\n                    </h1>\r\n                    <p className=\"text-muted mb-0 small\">{filteredProducts.length} produits trouvÃ©s</p>\r\n                </div>\r\n\r\n\r\n            </div>\r\n\r\n            <Row className=\"g-4\">\r\n                {filteredProducts.map(product => (\r\n                    <Col key={product.id} xs={6} sm={4} md={3} lg={2}>\r\n                        <ProductCard product={product} />\r\n                    </Col>\r\n                ))}\r\n            </Row>\r\n\r\n            {filteredProducts.length === 0 && (\r\n                <div className=\"text-center py-5\">\r\n                    <h3 className=\"text-muted\">Aucun produit trouvÃ© dans cette catÃ©gorie.</h3>\r\n                </div>\r\n            )}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Shop;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\UserInfo.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":195,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8244,8262],"text":"Date d&apos;inscription"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8244,8262],"text":"Date d&lsquo;inscription"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8244,8262],"text":"Date d&#39;inscription"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8244,8262],"text":"Date d&rsquo;inscription"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card, Form, Button, Alert, Row, Col } from 'react-bootstrap';\r\nimport { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\n\r\nconst UserInfo = () => {\r\n    const { user, updateUser } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [formData, setFormData] = useState({\r\n        name: user?.name || '',\r\n        email: user?.email || '',\r\n        phone: user?.phone || '',\r\n        currentPassword: '',\r\n        newPassword: '',\r\n        confirmPassword: ''\r\n    });\r\n\r\n    const [showSuccess, setShowSuccess] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (formData.newPassword) {\r\n            if (formData.newPassword !== formData.confirmPassword) {\r\n                setError('Les mots de passe ne correspondent pas');\r\n                return;\r\n            }\r\n            if (formData.newPassword.length < 6) {\r\n                setError('Le mot de passe doit contenir au moins 6 caractÃ¨res');\r\n                return;\r\n            }\r\n        }\r\n\r\n        const updatedUser = {\r\n            ...user,\r\n            name: formData.name,\r\n            email: formData.email,\r\n            phone: formData.phone\r\n        };\r\n\r\n        if (updateUser) {\r\n            updateUser(updatedUser);\r\n        }\r\n\r\n        setShowSuccess(true);\r\n        setTimeout(() => setShowSuccess(false), 3000);\r\n\r\n        setFormData({\r\n            ...formData,\r\n            currentPassword: '',\r\n            newPassword: '',\r\n            confirmPassword: ''\r\n        });\r\n    };\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <div className=\"mb-4\">\r\n                <h3 className=\"fw-bold\">Informations utilisateur</h3>\r\n                <p className=\"text-muted\">GÃ©rez vos informations personnelles</p>\r\n            </div>\r\n\r\n            {showSuccess && (\r\n                <Alert variant=\"success\" dismissible onClose={() => setShowSuccess(false)}>\r\n                    Vos informations ont Ã©tÃ© mises Ã  jour avec succÃ¨s !\r\n                </Alert>\r\n            )}\r\n\r\n            {error && (\r\n                <Alert variant=\"danger\" dismissible onClose={() => setError('')}>\r\n                    {error}\r\n                </Alert>\r\n            )}\r\n\r\n            <Card className=\"border-0 shadow-sm mb-4\">\r\n                <Card.Body className=\"p-4\">\r\n                    <h5 className=\"fw-bold mb-4\">Informations personnelles</h5>\r\n                    <Form onSubmit={handleSubmit}>\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Nom complet *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        name=\"name\"\r\n                                        value={formData.name}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Email *</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        value={formData.email}\r\n                                        onChange={handleChange}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <Form.Group className=\"mb-4\">\r\n                            <Form.Label>TÃ©lÃ©phone</Form.Label>\r\n                            <Form.Control\r\n                                type=\"tel\"\r\n                                name=\"phone\"\r\n                                value={formData.phone}\r\n                                onChange={handleChange}\r\n                                placeholder=\"+90 XXX XXX XX XX\"\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <hr className=\"my-4\" />\r\n\r\n                        <h5 className=\"fw-bold mb-4\">Changer le mot de passe</h5>\r\n                        <p className=\"text-muted small mb-3\">\r\n                            Laissez ces champs vides si vous ne souhaitez pas changer votre mot de passe\r\n                        </p>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Mot de passe actuel</Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                name=\"currentPassword\"\r\n                                value={formData.currentPassword}\r\n                                onChange={handleChange}\r\n                                placeholder=\"Entrez votre mot de passe actuel\"\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Nouveau mot de passe</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        name=\"newPassword\"\r\n                                        value={formData.newPassword}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"Minimum 6 caractÃ¨res\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label>Confirmer le nouveau mot de passe</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        name=\"confirmPassword\"\r\n                                        value={formData.confirmPassword}\r\n                                        onChange={handleChange}\r\n                                        placeholder=\"Retapez le mot de passe\"\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                        <div className=\"d-flex justify-content-between mt-4\">\r\n                            <Button variant=\"outline-secondary\" onClick={() => navigate('/profile')}>\r\n                                Retour\r\n                            </Button>\r\n                            <Button variant=\"warning\" type=\"submit\" className=\"text-white fw-bold px-4\">\r\n                                Enregistrer les modifications\r\n                            </Button>\r\n                        </div>\r\n                    </Form>\r\n                </Card.Body>\r\n            </Card>\r\n\r\n            <Card className=\"border-0 shadow-sm\">\r\n                <Card.Body className=\"p-4\">\r\n                    <h5 className=\"fw-bold mb-3\">Informations du compte</h5>\r\n                    <div className=\"bg-light p-3 rounded\">\r\n                        <Row>\r\n                            <Col md={6} className=\"mb-2\">\r\n                                <small className=\"text-muted d-block\">ID Utilisateur</small>\r\n                                <strong className=\"small\">{user?.id || 'N/A'}</strong>\r\n                            </Col>\r\n                            <Col md={6} className=\"mb-2\">\r\n                                <small className=\"text-muted d-block\">Date d'inscription</small>\r\n                                <strong className=\"small\">\r\n                                    {user?.createdAt || new Date().toLocaleDateString('fr-FR')}\r\n                                </strong>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <small className=\"text-muted d-block\">Type de compte</small>\r\n                                <strong className=\"small\">{user?.role === 'admin' ? 'Administrateur' : 'Client'}</strong>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <small className=\"text-muted d-block\">Statut</small>\r\n                                <strong className=\"small text-success\">Actif</strong>\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n                </Card.Body>\r\n            </Card>\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default UserInfo;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\Wallet.jsx","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: Identifier 'useWallet' has already been declared","line":5,"column":10,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Row, Col, Card, Alert, Badge, Form, Button, InputGroup, Modal } from 'react-bootstrap';\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useWallet } from '../context/WalletContext';\r\nimport { useWallet } from '../context/WalletContext';\r\nimport ProfileLayout from '../components/ProfileLayout';\r\nimport API_BASE_URL from '../config';\r\n\r\nconst Wallet = () => {\r\n    const { user } = useAuth();\r\n    const { balance, transactions, loading, fetchBalance, fetchTransactions } = useWallet();\r\n    const [transferData, setTransferData] = useState({ toId: '', amount: '', description: '' });\r\n    const [transferStatus, setTransferStatus] = useState({ type: '', message: '' });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [showTransferModal, setShowTransferModal] = useState(false);\r\n\r\n    const [visibleTransactions, setVisibleTransactions] = useState(5);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchBalance();\r\n            fetchTransactions();\r\n        }\r\n    }, [user]);\r\n\r\n    const handleTransfer = async (e) => {\r\n        e.preventDefault();\r\n        setIsSubmitting(true);\r\n        setTransferStatus({ type: '', message: '' });\r\n\r\n        if (parseFloat(transferData.amount) > balance) {\r\n            setTransferStatus({ type: 'danger', message: 'Solde insuffisant pour ce transfert' });\r\n            setIsSubmitting(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/api/wallet/transfer`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    fromEmail: user.email,\r\n                    toEmail: transferData.toId,\r\n                    amount: parseFloat(transferData.amount),\r\n                    description: transferData.description || `Transfert de ${user.name}`\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                setTransferStatus({ type: 'success', message: 'Transfert effectuÃ© avec succÃ¨s !' });\r\n                setTransferData({ toId: '', amount: '', description: '' });\r\n                setTimeout(() => {\r\n                    setShowTransferModal(false);\r\n                    setTransferStatus({ type: '', message: '' });\r\n                }, 2000);\r\n                fetchBalance();\r\n                fetchTransactions();\r\n            } else {\r\n                setTransferStatus({ type: 'danger', message: data.message || 'Erreur lors du transfert' });\r\n            }\r\n        } catch (error) {\r\n            setTransferStatus({ type: 'danger', message: 'Impossible de contacter le serveur' });\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"py-5 text-center\">\r\n                <Alert variant=\"warning\">\r\n                    <Alert.Heading>Connexion requise</Alert.Heading>\r\n                    <p>Veuillez vous connecter pour accÃ©der Ã  votre portefeuille.</p>\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ProfileLayout>\r\n            <h3 className=\"mb-4 fw-bold\">\r\n                <i className=\"bi bi-coin me-2\"></i>\r\n                Mon portefeuille\r\n            </h3>\r\n\r\n            <Row className=\"g-4\">\r\n                {/* Wallet Balance & Transfer - Left Column (lg=4) */}\r\n                <Col lg={4} className=\"order-2 order-lg-1\">\r\n                    <Card className=\"border-0 shadow-sm mb-4\">\r\n                        <Card.Body className=\"p-4 text-center\">\r\n                            <h6 className=\"text-muted mb-1 small\">Solde disponible</h6>\r\n                            <h2 className=\"text-warning fw-bold mb-3\">{balance.toLocaleString()} FCFA</h2>\r\n\r\n                            <Alert variant=\"info\" className=\"mb-3 text-start py-2 px-3 border-0 bg-light\">\r\n                                <small>\r\n                                    <i className=\"bi bi-info-circle me-2 text-info\"></i>\r\n                                    Utilisez votre solde pour effectuer des achats sans carte bancaire.\r\n                                </small>\r\n                            </Alert>\r\n\r\n                            <Button\r\n                                variant=\"warning\"\r\n                                size=\"sm\"\r\n                                className=\"fw-bold text-white px-4 rounded-pill w-100 py-2\"\r\n                                onClick={() => setShowTransferModal(true)}\r\n                            >\r\n                                <i className=\"bi bi-send me-2\"></i>\r\n                                Faire un transfert\r\n                            </Button>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n\r\n                {/* Transactions History - Right Column (lg=8) */}\r\n                <Col lg={8} className=\"order-1 order-lg-2\">\r\n                    <Card className=\"border-0 shadow-sm\">\r\n                        <Card.Header className=\"bg-white p-4 text-warning\">\r\n                            <h5 className=\"mb-0 fw-bold\"><i className=\"bi bi-clock-history me-2\"></i>Historique des transactions</h5>\r\n                        </Card.Header>\r\n                        <Card.Body className=\"p-0\">\r\n                            {loading ? (\r\n                                <div className=\"text-center p-5\">\r\n                                    <div className=\"spinner-border text-warning\" role=\"status\">\r\n                                        <span className=\"visually-hidden\">Chargement...</span>\r\n                                    </div>\r\n                                </div>\r\n                            ) : transactions.length === 0 ? (\r\n                                <div className=\"text-center p-5 text-muted\">\r\n                                    <i className=\"bi bi-receipt mb-3 d-block\" style={{ fontSize: '3rem' }}></i>\r\n                                    <p>Aucune transaction pour le moment</p>\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"list-group list-group-flush\">\r\n                                        {transactions.slice(0, visibleTransactions).map((tx) => {\r\n                                            const isCancelled = tx.description?.toLowerCase().includes('annulÃ©e');\r\n                                            const balanceBefore = tx.type === 'credit' ? tx.balanceAfter - tx.amount : tx.balanceAfter + tx.amount;\r\n                                            const operator = tx.type === 'credit' ? '+' : '-';\r\n\r\n                                            return (\r\n                                                <div key={tx.id} className={`list-group-item p-3 ${isCancelled ? 'bg-light bg-opacity-50' : ''}`}>\r\n                                                    <div className=\"d-flex justify-content-between align-items-center flex-wrap gap-2\">\r\n                                                        <div className=\"flex-grow-1\">\r\n                                                            <div className=\"d-flex align-items-center mb-1 flex-wrap gap-2\">\r\n                                                                <Badge bg={isCancelled ? 'secondary' : (tx.type === 'credit' ? 'success' : 'danger')} className=\"px-2\" style={{ borderRadius: '6px', fontSize: '0.7rem' }}>\r\n                                                                    {isCancelled ? (\r\n                                                                        <><i className=\"bi bi-x-circle me-1\"></i> ANNULÃ‰E</>\r\n                                                                    ) : tx.description?.toLowerCase().includes('remboursement') ? (\r\n                                                                        <><i className=\"bi bi-arrow-return-left me-1\"></i> REMBOURSEMENT</>\r\n                                                                    ) : tx.type === 'credit' ? (\r\n                                                                        <><i className=\"bi bi-arrow-down-circle me-1\"></i> TRANSFERT</>\r\n                                                                    ) : (\r\n                                                                        <><i className=\"bi bi-cart-check me-1\"></i> ACHAT</>\r\n                                                                    )}\r\n                                                                </Badge>\r\n                                                                <span className={`fw-bold ${isCancelled ? 'text-muted text-decoration-line-through' : (tx.type === 'credit' ? 'text-success' : 'text-danger')}`} style={{ fontSize: '0.95rem' }}>\r\n                                                                    {operator}{tx.amount.toLocaleString()} FCFA\r\n                                                                </span>\r\n                                                            </div>\r\n                                                            <div className={`fw-bold mb-0 small ${isCancelled ? 'text-muted' : 'text-dark'}`}>\r\n                                                                {tx.description.replace(/credit/gi, 'Transfert').replace(/virement admin/gi, 'Transfert TRYMYDAY')}\r\n                                                            </div>\r\n                                                            <div className=\"text-muted\" style={{ fontSize: '0.75rem' }}>\r\n                                                                <i className=\"bi bi-calendar3 me-1\"></i>\r\n                                                                {new Date(tx.date).toLocaleString('fr-FR', {\r\n                                                                    day: '2-digit',\r\n                                                                    month: '2-digit',\r\n                                                                    year: 'numeric',\r\n                                                                    hour: '2-digit',\r\n                                                                    minute: '2-digit'\r\n                                                                })}\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        <div className=\"bg-white p-2 rounded-3 border shadow-sm\" style={{ minWidth: '180px' }}>\r\n                                                            <div className=\"d-flex flex-column gap-0\">\r\n                                                                <div className=\"d-flex justify-content-between\" style={{ fontSize: '0.75rem', opacity: 0.8 }}>\r\n                                                                    <span>Ancien solde:</span>\r\n                                                                    <span>{balanceBefore.toLocaleString()} FCFA</span>\r\n                                                                </div>\r\n                                                                <div className=\"d-flex justify-content-between fw-bold\" style={{ fontSize: '0.75rem' }}>\r\n                                                                    <span>{tx.type === 'credit' ? 'ReÃ§u:' : 'DÃ©bit:'}</span>\r\n                                                                    <span className={isCancelled ? 'text-decoration-line-through' : (tx.type === 'credit' ? 'text-success' : 'text-danger')}>\r\n                                                                        {operator}{tx.amount.toLocaleString()} FCFA\r\n                                                                    </span>\r\n                                                                </div>\r\n                                                                <hr className=\"my-1 opacity-25\" />\r\n                                                                <div className=\"d-flex justify-content-between align-items-center\">\r\n                                                                    <span className=\"fw-bold\" style={{ fontSize: '0.75rem' }}>Nouveau :</span>\r\n                                                                    <span className={`fw-bold ${isCancelled ? 'text-muted' : 'text-warning'}`} style={{ fontSize: '0.9rem' }}>\r\n                                                                        {tx.balanceAfter.toLocaleString()} FCFA\r\n                                                                    </span>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                    {transactions.length > visibleTransactions && (\r\n                                        <div className=\"p-3 text-center bg-light border-top\">\r\n                                            <Button\r\n                                                variant=\"link\"\r\n                                                className=\"text-warning fw-bold text-decoration-none\"\r\n                                                onClick={() => setVisibleTransactions(prev => prev + 10)}\r\n                                            >\r\n                                                Voir plus <i className=\"bi bi-plus-lg ms-1\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                    )}\r\n                                </>\r\n                            )}\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Transfer Modal */}\r\n            <Modal\r\n                show={showTransferModal}\r\n                onHide={() => setShowTransferModal(false)}\r\n                centered\r\n                className=\"animate__animated animate__fadeIn\"\r\n            >\r\n                <Modal.Header closeButton className=\"border-0 pb-0\">\r\n                    <Modal.Title className=\"fw-bold\">\r\n                        <i className=\"bi bi-send me-2 text-warning\"></i>Faire un transfert\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"p-4\">\r\n                    {transferStatus.message && (\r\n                        <Alert variant={transferStatus.type} className=\"animate__animated animate__fadeIn\">\r\n                            {transferStatus.message}\r\n                        </Alert>\r\n                    )}\r\n\r\n                    <Form onSubmit={handleTransfer}>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">ID du Compte (ex: 5RMEEQUT)</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Saisissez l'ID du destinataire\"\r\n                                value={transferData.toId}\r\n                                onChange={(e) => setTransferData({ ...transferData, toId: e.target.value })}\r\n                                required\r\n                                className=\"bg-light border-0\"\r\n                            />\r\n                            <Form.Text className=\"text-muted small\">\r\n                                L'ID se trouve sur le profil du destinataire.\r\n                            </Form.Text>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">Montant (FCFA)</Form.Label>\r\n                            <Form.Control\r\n                                type=\"number\"\r\n                                placeholder=\"Ex: 5000\"\r\n                                value={transferData.amount}\r\n                                onChange={(e) => setTransferData({ ...transferData, amount: e.target.value })}\r\n                                required\r\n                                min=\"1\"\r\n                                className=\"bg-light border-0\"\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-4\">\r\n                            <Form.Label className=\"small fw-bold text-muted\">Description (Optionnel)</Form.Label>\r\n                            <Form.Control\r\n                                as=\"textarea\"\r\n                                rows={2}\r\n                                placeholder=\"Ex: Pour le dÃ©jeuner\"\r\n                                value={transferData.description}\r\n                                onChange={(e) => setTransferData({ ...transferData, description: e.target.value })}\r\n                                className=\"bg-light border-0\"\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Button\r\n                            variant=\"warning\"\r\n                            type=\"submit\"\r\n                            className=\"w-100 fw-bold py-2 text-white shadow-sm\"\r\n                            disabled={isSubmitting}\r\n                        >\r\n                            {isSubmitting ? (\r\n                                <>\r\n                                    <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                    Traitement...\r\n                                </>\r\n                            ) : (\r\n                                'Confirmer le transfert'\r\n                            )}\r\n                        </Button>\r\n                    </Form>\r\n                </Modal.Body>\r\n            </Modal>\r\n\r\n            {/* Barcode Scanner Modal removed as per request */}\r\n        </ProfileLayout>\r\n    );\r\n};\r\n\r\nexport default Wallet;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminDashboard.jsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":57,"column":39,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3274,3288],"text":"Vue d&apos;ensemble"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3274,3288],"text":"Vue d&lsquo;ensemble"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3274,3288],"text":"Vue d&#39;ensemble"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3274,3288],"text":"Vue d&rsquo;ensemble"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":76,"column":115,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4321,4342],"text":"Demandes d&apos;annulation"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4321,4342],"text":"Demandes d&lsquo;annulation"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4321,4342],"text":"Demandes d&#39;annulation"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4321,4342],"text":"Demandes d&rsquo;annulation"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":77,"column":140,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4475,4533],"text":" demande(s) d&apos;annulation en attente de votre confirmation."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4475,4533],"text":" demande(s) d&lsquo;annulation en attente de votre confirmation."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4475,4533],"text":" demande(s) d&#39;annulation en attente de votre confirmation."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4475,4533],"text":" demande(s) d&rsquo;annulation en attente de votre confirmation."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Row, Col, Card } from 'react-bootstrap';\r\nimport { useData } from '../../context/DataContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useWallet } from '../../context/WalletContext';\r\n\r\nconst AdminDashboard = () => {\r\n    const { products, orders, users } = useData();\r\n    const { user: authUser } = useAuth();\r\n    const { balance } = useWallet();\r\n    const { expenses } = useData();\r\n\r\n    const isManager = authUser?.role === 'manager';\r\n    const isExpediteur = authUser?.role === 'expediteur';\r\n\r\n    // Filter orders (last 30 days for manager/expediteur)\r\n    const displayOrders = (isManager || isExpediteur) ? (orders || []).filter(order => {\r\n        try {\r\n            if (!order || !order.date) return true;\r\n            const orderDate = new Date(order.date);\r\n            const thirtyDaysAgo = new Date();\r\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n            if (!isNaN(orderDate.getTime())) {\r\n                return orderDate >= thirtyDaysAgo;\r\n            }\r\n            // Fallback for formats like DD/MM/YYYY\r\n            if (typeof order.date === 'string' && order.date.includes('/')) {\r\n                const [d, m, y] = order.date.split('/');\r\n                const parsedDate = new Date(`${y}-${m}-${d}`);\r\n                return parsedDate >= thirtyDaysAgo;\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }) : (orders || []);\r\n\r\n    const totalRevenue = displayOrders.reduce((acc, o) => acc + (o.total || 0), 0);\r\n\r\n    const totalExpenses = (expenses || []).reduce((acc, e) => acc + (Number(e.amount) || 0), 0);\r\n    const grossMargin = totalRevenue;\r\n    const netProfit = grossMargin - totalExpenses;\r\n\r\n    const stats = [\r\n        !isExpediteur && { label: 'Total Produits', value: products.length, gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },\r\n        { label: 'Commandes', value: displayOrders.filter(o => o.status !== 'AnnulÃ©e').length, gradient: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' },\r\n        isManager && { label: 'Mon Solde', value: (balance || 0).toLocaleString() + ' FCFA', gradient: 'linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)' },\r\n        (!isManager && !isExpediteur) && { label: 'Clients', value: (users || []).length, gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' },\r\n        (!isManager && !isExpediteur) && { label: 'Chiffre d\\'Affaires', value: totalRevenue.toLocaleString() + ' FCFA', gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)' },\r\n        (!isManager && !isExpediteur) && { label: 'Marge Brute', value: grossMargin.toLocaleString() + ' FCFA', gradient: 'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)' },\r\n        (!isManager && !isExpediteur) && { label: 'Charges Fixes', value: totalExpenses.toLocaleString() + ' FCFA', gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' },\r\n        (!isManager && !isExpediteur) && { label: 'BÃ©nÃ©fice Net', value: netProfit.toLocaleString() + ' FCFA', gradient: netProfit >= 0 ? 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' : 'linear-gradient(135deg, #ff0844 0%, #ffb199 100%)' },\r\n    ].filter(Boolean);\r\n\r\n    return (\r\n        <div>\r\n            <h2 className=\"mb-4\">Vue d'ensemble</h2>\r\n            <Row className=\"g-3\">\r\n                {stats.map((stat, idx) => (\r\n                    <Col key={idx} md={3}>\r\n                        <Card className=\"border-0 shadow-sm text-white\" style={{ background: stat.gradient }}>\r\n                            <Card.Body>\r\n                                <h6 className=\"opacity-90\">{stat.label}</h6>\r\n                                <h3 className=\"fw-bold mb-0\">{stat.value}</h3>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                ))}\r\n            </Row>\r\n\r\n            {/* Cancellation Alerts */}\r\n            {displayOrders.filter(o => o.status === \"Demande d'annulation\").length > 0 && (\r\n                <Card className=\"border-0 shadow-sm mt-4 bg-danger text-white\">\r\n                    <Card.Body className=\"d-flex justify-content-between align-items-center\">\r\n                        <div>\r\n                            <h5 className=\"mb-1\"><i className=\"bi bi-exclamation-octagon-fill me-2\"></i>Demandes d'annulation</h5>\r\n                            <p className=\"mb-0\">Il y a {displayOrders.filter(o => o.status === \"Demande d'annulation\").length} demande(s) d'annulation en attente de votre confirmation.</p>\r\n                        </div>\r\n                        <a href=\"/admin/orders\" className=\"btn btn-light btn-sm fw-bold\">Voir et GÃ©rer</a>\r\n                    </Card.Body>\r\n                </Card>\r\n            )}\r\n\r\n            {/* Active Orders Section */}\r\n            <div className=\"mt-5\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                    <h4 className=\"mb-0\">\r\n                        <i className=\"bi bi-clock-history text-warning me-2\"></i>\r\n                        Commandes en cours\r\n                    </h4>\r\n                    <span className=\"badge bg-warning text-dark\">\r\n                        {displayOrders.filter(o => o.status !== 'LivrÃ©e' && o.status !== 'LivrÃ©' && o.status !== 'AnnulÃ©e').length}\r\n                    </span>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                    <table className=\"table table-hover\">\r\n                        <thead className=\"table-light\">\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>Client</th>\r\n                                <th>ID Client</th>\r\n                                <th>TÃ©lÃ©phone</th>\r\n                                <th>Date</th>\r\n                                <th>Montant</th>\r\n                                <th>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {displayOrders.filter(o => o.status !== 'LivrÃ©e' && o.status !== 'LivrÃ©' && o.status !== 'AnnulÃ©e').slice(0, 5).length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan=\"7\" className=\"text-center text-muted py-4\">\r\n                                        Aucune commande en cours\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                displayOrders.filter(o => o.status !== 'LivrÃ©e' && o.status !== 'LivrÃ©' && o.status !== 'AnnulÃ©e').slice(0, 5).map(order => (\r\n                                    <tr key={order.id}>\r\n                                        <td>#{order.id}</td>\r\n                                        <td>{order.customerName || order.customer || 'Client'}</td>\r\n                                        <td className=\"small\">{order.customerId || order.userId || '-'}</td>\r\n                                        <td className=\"small\">{order.phone || '-'}</td>\r\n                                        <td className=\"small\">{order.date}</td>\r\n                                        <td className=\"fw-bold text-success\">{order.total.toLocaleString()} FCFA</td>\r\n                                        <td>\r\n                                            <span className={`badge bg-${order.status === 'En expÃ©dition' ? 'info' :\r\n                                                order.status === 'En cours' ? 'warning' :\r\n                                                    order.status === 'En attente' ? 'secondary' :\r\n                                                        order.status === \"Demande d'annulation\" ? 'danger animate-pulse' :\r\n                                                            order.status === 'AnnulÃ©e' ? 'danger' : 'primary'\r\n                                                }`}>\r\n                                                {order.status}\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Delivered Orders Section */}\r\n            <div className=\"mt-5\">\r\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                    <h4 className=\"mb-0\">\r\n                        <i className=\"bi bi-check-circle text-success me-2\"></i>\r\n                        Commandes livrÃ©es\r\n                    </h4>\r\n                    <span className=\"badge bg-success\">\r\n                        {displayOrders.filter(o => o.status === 'LivrÃ©e' || o.status === 'LivrÃ©').length}\r\n                    </span>\r\n                </div>\r\n                <div className=\"table-responsive\">\r\n                    <table className=\"table table-hover\">\r\n                        <thead className=\"table-light\">\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>Client</th>\r\n                                <th>ID Client</th>\r\n                                <th>TÃ©lÃ©phone</th>\r\n                                <th>Date</th>\r\n                                <th>Montant</th>\r\n                                <th>Status</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"table-success table-success-subtle\">\r\n                            {displayOrders.filter(o => o.status === 'LivrÃ©e' || o.status === 'LivrÃ©').slice(0, 5).length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan=\"7\" className=\"text-center text-muted py-4\">\r\n                                        Aucune commande livrÃ©e\r\n                                    </td>\r\n                                </tr>\r\n                            ) : (\r\n                                displayOrders.filter(o => o.status === 'LivrÃ©e' || o.status === 'LivrÃ©').slice(0, 5).map(order => (\r\n                                    <tr key={order.id}>\r\n                                        <td>#{order.id}</td>\r\n                                        <td>{order.customerName || order.customer || 'Client'}</td>\r\n                                        <td className=\"small\">{order.customerId || order.userId || '-'}</td>\r\n                                        <td className=\"small\">{order.phone || '-'}</td>\r\n                                        <td className=\"small\">{order.date}</td>\r\n                                        <td className=\"fw-bold text-success\">{order.total.toLocaleString()} FCFA</td>\r\n                                        <td>\r\n                                            <span className=\"badge bg-success\">\r\n                                                LivrÃ©e\r\n                                            </span>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminFinance.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'products' is assigned a value but never used.","line":8,"column":73,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":81},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":19,"column":39,"nodeType":"Identifier","endLine":19,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":20,"column":49,"nodeType":"Identifier","endLine":20,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":21,"column":37,"nodeType":"Identifier","endLine":21,"endColumn":45},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":93,"column":65,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3298,3316],"text":"Chiffre d&apos;Affaires"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3298,3316],"text":"Chiffre d&lsquo;Affaires"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3298,3316],"text":"Chiffre d&#39;Affaires"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3298,3316],"text":"Chiffre d&rsquo;Affaires"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Row, Col, Card, Table, Button, Modal, Form, Badge } from 'react-bootstrap';\r\nimport { useData } from '../../context/DataContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AdminFinance = () => {\r\n    const { expenses, addExpense, deleteExpense, updateExpense, orders, products } = useData();\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (user?.role === 'manager') {\r\n            navigate('/admin');\r\n        }\r\n    }, [user, navigate]);\r\n\r\n    if (user?.role === 'manager') return null;\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingExpense, setEditingExpense] = useState(null);\r\n    const [formData, setFormData] = useState({\r\n        description: '',\r\n        amount: '',\r\n        category: 'GÃ©nÃ©ral',\r\n        date: new Date().toISOString().split('T')[0]\r\n    });\r\n\r\n    const categories = ['Stock', 'Marketing', 'Logistique', 'Loyer', 'Salaires', 'Outils IT', 'GÃ©nÃ©ral'];\r\n\r\n    const totalRevenue = (orders || []).reduce((acc, o) => acc + (o.total || 0), 0);\r\n\r\n    const totalExpenses = (expenses || []).reduce((acc, e) => acc + (Number(e.amount) || 0), 0);\r\n    const grossProfit = totalRevenue;\r\n    const netProfit = grossProfit - totalExpenses;\r\n\r\n    const handleClose = () => {\r\n        setShowModal(false);\r\n        setEditingExpense(null);\r\n        setFormData({\r\n            description: '',\r\n            amount: '',\r\n            category: 'GÃ©nÃ©ral',\r\n            date: new Date().toISOString().split('T')[0]\r\n        });\r\n    };\r\n\r\n    const handleShow = (expense = null) => {\r\n        if (expense) {\r\n            setEditingExpense(expense);\r\n            setFormData({\r\n                description: expense.description,\r\n                amount: expense.amount,\r\n                category: expense.category,\r\n                date: expense.date\r\n            });\r\n        }\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const data = {\r\n            ...formData,\r\n            amount: Number(formData.amount)\r\n        };\r\n\r\n        if (editingExpense) {\r\n            updateExpense(editingExpense.id, data);\r\n        } else {\r\n            addExpense(data);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-1\">\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2 className=\"mb-0\">Gestion FinanciÃ¨re</h2>\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => handleShow()}\r\n                    className=\"d-flex align-items-center\"\r\n                    style={{ background: '#ef9c52ff', borderColor: '#ef9c52ff' }}\r\n                >\r\n                    <i className=\"bi bi-plus-lg me-2\"></i> Ajouter une dÃ©pense\r\n                </Button>\r\n            </div>\r\n\r\n            <Row className=\"g-3 mb-4\">\r\n                <Col md={3}>\r\n                    <Card className=\"border-0 shadow-sm text-white\" style={{ background: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)' }}>\r\n                        <Card.Body>\r\n                            <h6 className=\"opacity-90\">Chiffre d'Affaires</h6>\r\n                            <h3 className=\"fw-bold mb-0\">{totalRevenue.toLocaleString()} FCFA</h3>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3}>\r\n                    <Card className=\"border-0 shadow-sm text-white\" style={{ background: 'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)' }}>\r\n                        <Card.Body>\r\n                            <h6 className=\"opacity-90\">Investissement</h6>\r\n                            <h3 className=\"fw-bold mb-0\">{grossProfit.toLocaleString()} FCFA</h3>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3}>\r\n                    <Card className=\"border-0 shadow-sm text-white\" style={{ background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' }}>\r\n                        <Card.Body>\r\n                            <h6 className=\"opacity-90\">Charges Fixes</h6>\r\n                            <h3 className=\"fw-bold mb-0\">{totalExpenses.toLocaleString()} FCFA</h3>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col md={3}>\r\n                    <Card className=\"border-0 shadow-sm text-white\" style={{ background: netProfit >= 0 ? 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' : 'linear-gradient(135deg, #ff0844 0%, #ffb199 100%)' }}>\r\n                        <Card.Body>\r\n                            <h6 className=\"opacity-90\">BÃ©nÃ©fice Net</h6>\r\n                            <h3 className=\"fw-bold mb-0\">{netProfit.toLocaleString()} FCFA</h3>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Card className=\"border-0 shadow-sm\">\r\n                <Card.Header className=\"bg-white border-0 py-3\">\r\n                    <h5 className=\"mb-0\">Historique des DÃ©penses</h5>\r\n                </Card.Header>\r\n                <Card.Body className=\"p-0\">\r\n                    <div className=\"table-responsive\">\r\n                        <Table hover className=\"align-middle mb-0\">\r\n                            <thead className=\"bg-light text-muted small text-uppercase\">\r\n                                <tr>\r\n                                    <th className=\"ps-4\">Date</th>\r\n                                    <th>Description</th>\r\n                                    <th>CatÃ©gorie</th>\r\n                                    <th>Montant</th>\r\n                                    <th className=\"text-end pe-4\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {expenses.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan=\"5\" className=\"text-center py-5 text-muted\">\r\n                                            Aucune dÃ©pense enregistrÃ©e\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    expenses.map(expense => (\r\n                                        <tr key={expense.id}>\r\n                                            <td className=\"ps-4 small\">{expense.date}</td>\r\n                                            <td className=\"fw-medium\">{expense.description}</td>\r\n                                            <td>\r\n                                                <Badge bg=\"light\" text=\"dark\" className=\"border\">\r\n                                                    {expense.category}\r\n                                                </Badge>\r\n                                            </td>\r\n                                            <td className=\"fw-bold text-danger\">-{Number(expense.amount).toLocaleString()} FCFA</td>\r\n                                            <td className=\"text-end pe-4\">\r\n                                                <Button\r\n                                                    variant=\"link\"\r\n                                                    className=\"text-primary p-0 me-3\"\r\n                                                    onClick={() => handleShow(expense)}\r\n                                                >\r\n                                                    <i className=\"bi bi-pencil\"></i>\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"link\"\r\n                                                    className=\"text-danger p-0\"\r\n                                                    onClick={() => deleteExpense(expense.id)}\r\n                                                >\r\n                                                    <i className=\"bi bi-trash\"></i>\r\n                                                </Button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </Table>\r\n                    </div>\r\n                </Card.Body>\r\n            </Card>\r\n\r\n            <Modal show={showModal} onHide={handleClose} centered>\r\n                <Modal.Header closeButton className=\"border-0 pb-0\">\r\n                    <Modal.Title className=\"fw-bold\">\r\n                        {editingExpense ? 'Modifier la dÃ©pense' : 'Ajouter une dÃ©pense'}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Form onSubmit={handleSubmit}>\r\n                    <Modal.Body className=\"pt-4\">\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted text-uppercase\">Description</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"ex: Facture Ã©lectricitÃ©, Achat stock...\"\r\n                                value={formData.description}\r\n                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                                required\r\n                            />\r\n                        </Form.Group>\r\n                        <Row>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label className=\"small fw-bold text-muted text-uppercase\">Montant (FCFA)</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        step=\"0.01\"\r\n                                        placeholder=\"0.00\"\r\n                                        value={formData.amount}\r\n                                        onChange={(e) => setFormData({ ...formData, amount: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                            <Col md={6}>\r\n                                <Form.Group className=\"mb-3\">\r\n                                    <Form.Label className=\"small fw-bold text-muted text-uppercase\">Date</Form.Label>\r\n                                    <Form.Control\r\n                                        type=\"date\"\r\n                                        value={formData.date}\r\n                                        onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label className=\"small fw-bold text-muted text-uppercase\">CatÃ©gorie</Form.Label>\r\n                            <Form.Select\r\n                                value={formData.category}\r\n                                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                            >\r\n                                {categories.map(cat => (\r\n                                    <option key={cat} value={cat}>{cat}</option>\r\n                                ))}\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n                    </Modal.Body>\r\n                    <Modal.Footer className=\"border-0 pt-0\">\r\n                        <Button variant=\"light\" onClick={handleClose}>Annuler</Button>\r\n                        <Button variant=\"primary\" type=\"submit\" style={{ background: '#ef9c52ff', borderColor: '#ef9c52ff' }}>\r\n                            {editingExpense ? 'Mettre Ã  jour' : 'Enregistrer'}\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminFinance;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminLayout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminProducts.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'isManager' is assigned a value but never used.","line":12,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":20},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":19,"column":39,"nodeType":"Identifier","endLine":19,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":20,"column":49,"nodeType":"Identifier","endLine":20,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":21,"column":39,"nodeType":"Identifier","endLine":21,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":22,"column":43,"nodeType":"Identifier","endLine":22,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":23,"column":43,"nodeType":"Identifier","endLine":23,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":24,"column":55,"nodeType":"Identifier","endLine":24,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":37,"column":43,"nodeType":"Identifier","endLine":37,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":40,"column":33,"nodeType":"Identifier","endLine":40,"endColumn":41},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":41,"column":37,"nodeType":"Identifier","endLine":41,"endColumn":45},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":43,"column":39,"nodeType":"Identifier","endLine":43,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":44,"column":53,"nodeType":"Identifier","endLine":44,"endColumn":61},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":45,"column":53,"nodeType":"Identifier","endLine":45,"endColumn":61},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":48,"column":45,"nodeType":"Identifier","endLine":48,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":122,"column":41,"nodeType":"Identifier","endLine":122,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":123,"column":49,"nodeType":"Identifier","endLine":123,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":124,"column":39,"nodeType":"Identifier","endLine":124,"endColumn":47}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Table, Button, Form, Modal, Badge, Row, Col, InputGroup } from 'react-bootstrap';\r\nimport { useData, CATEGORIES } from '../../context/DataContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Barcode from 'react-barcode';\r\nimport BarcodeScanner from '../../components/BarcodeScanner';\r\n\r\nconst AdminProducts = () => {\r\n    const { products, addProduct, deleteProduct, updateProduct } = useData();\r\n    const { user } = useAuth();\r\n    const isManager = user?.role === 'manager';\r\n    const navigate = useNavigate();\r\n\r\n    if (user?.role === 'expediteur') {\r\n        navigate('/admin');\r\n        return null;\r\n    }\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [currentProduct, setCurrentProduct] = useState({ name: '', brand: '', collection: '', tags: '', sku: '', price: '', stock: '', category: 'Femme', subcategory: '', description: '', images: [], attributes: [], availableSizes: [], barcode: '' });\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [newImageUrl, setNewImageUrl] = useState('');\r\n    const [showScanner, setShowScanner] = useState(false);\r\n    const [showSearchScanner, setShowSearchScanner] = useState(false);\r\n\r\n    // Generate EAN-13\r\n    const generateEAN13 = () => {\r\n        const base = Date.now().toString().slice(-8) + Math.floor(Math.random() * 10000).toString().padStart(4, '0');\r\n        let sum = 0;\r\n        for (let i = 0; i < 12; i++) {\r\n            sum += parseInt(base[i]) * (i % 2 === 0 ? 1 : 3);\r\n        }\r\n        const checkDigit = (10 - (sum % 10)) % 10;\r\n        return base + checkDigit;\r\n    };\r\n\r\n    const [imageSource, setImageSource] = useState('upload');\r\n\r\n    // Color Variant State\r\n    const [colors, setColors] = useState([]);\r\n    const [newColor, setNewColor] = useState({ name: '', hex: '#000000', images: [] });\r\n    // Main color associated with the main images\r\n    const [mainColor, setMainColor] = useState({ name: '', hex: '#000000' });\r\n    const [colorImageSource, setColorImageSource] = useState('upload');\r\n    const [newColorImageUrl, setNewColorImageUrl] = useState('');\r\n\r\n    // Attributes State\r\n    const [newAttribute, setNewAttribute] = useState({ label: '', value: '' });\r\n\r\n    const addAttribute = () => {\r\n        if (newAttribute.label && newAttribute.value) {\r\n            setCurrentProduct({\r\n                ...currentProduct,\r\n                attributes: [...(currentProduct.attributes || []), newAttribute]\r\n            });\r\n            setNewAttribute({ label: '', value: '' });\r\n        }\r\n    };\r\n\r\n    const removeAttribute = (index) => {\r\n        const updatedAttributes = currentProduct.attributes.filter((_, i) => i !== index);\r\n        setCurrentProduct({ ...currentProduct, attributes: updatedAttributes });\r\n    };\r\n\r\n    // Attribute Templates configuration\r\n    const ATTRIBUTE_TEMPLATES = {\r\n        'Clothing': ['MatiÃ¨re', 'Coupe', 'Doublure', 'Col', 'Motif', 'Fermeture', 'Longueur'],\r\n        'Tech': ['Processeur', 'RAM', 'Stockage', 'Ã‰cran', 'Batterie', 'SystÃ¨me'],\r\n        'Beauty': ['Type de peau', 'Volume', 'IngrÃ©dients', 'Usage'],\r\n        'Home': ['Dimensions', 'MatiÃ¨re', 'Poids', 'Assemblage'],\r\n        'Shoes': ['MatiÃ¨re ExtÃ©r.', 'Semelle', 'Fermeture', 'Largeur'],\r\n        'Bags': ['MatiÃ¨re', 'Dimensions', 'Type de fermeture', 'Nb compartiments']\r\n    };\r\n\r\n    const getTemplateKey = (cat) => {\r\n        if (['Femme', 'Homme', 'Enfant'].includes(cat)) return 'Clothing';\r\n        if (['Ã‰lectronique'].includes(cat)) return 'Tech';\r\n        if (['CosmÃ©tique'].includes(cat)) return 'Beauty';\r\n        if (['Maison & Meuble'].includes(cat)) return 'Home';\r\n        if (['Chaussures'].includes(cat)) return 'Shoes';\r\n        if (['Sacs'].includes(cat)) return 'Bags';\r\n        return null;\r\n    };\r\n\r\n    const handleTemplateFieldChange = (label, value) => {\r\n        const existingAttributes = currentProduct.attributes || [];\r\n        const index = existingAttributes.findIndex(a => a.label === label);\r\n\r\n        let updatedAttributes = [...existingAttributes];\r\n        if (index > -1) {\r\n            if (value === '') {\r\n                updatedAttributes.splice(index, 1);\r\n            } else {\r\n                updatedAttributes[index] = { ...updatedAttributes[index], value };\r\n            }\r\n        } else if (value !== '') {\r\n            updatedAttributes.push({ label, value });\r\n        }\r\n\r\n        setCurrentProduct({ ...currentProduct, attributes: updatedAttributes });\r\n    };\r\n\r\n    const getFieldValue = (label) => {\r\n        const attr = (currentProduct.attributes || []).find(a => a.label === label);\r\n        return attr ? attr.value : '';\r\n    };\r\n\r\n    const toggleSize = (size) => {\r\n        const currentSizes = currentProduct.availableSizes || [];\r\n        const updatedSizes = currentSizes.includes(size)\r\n            ? currentSizes.filter(s => s !== size)\r\n            : [...currentSizes, size];\r\n        setCurrentProduct({ ...currentProduct, availableSizes: updatedSizes });\r\n    };\r\n\r\n    const SIZE_PRESETS = {\r\n        'Clothing': ['XS', 'S', 'M', 'L', 'XL', 'XXL'],\r\n        'Shoes': ['36', '37', '38', '39', '40', '41', '42', '43', '44', '45']\r\n    };\r\n\r\n    // Filter states\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [categoryFilter, setCategoryFilter] = useState('all');\r\n    const [showLimit, setShowLimit] = useState(10);\r\n\r\n    const handleSave = () => {\r\n        // Ensure at least one image is present, otherwise use placeholder\r\n        const productImages = currentProduct.images && currentProduct.images.length > 0\r\n            ? currentProduct.images\r\n            : ['/assets/category_tech_1766034965148.png'];\r\n\r\n        // Combine main color (if defined) with other variants\r\n        let finalColors = [...colors];\r\n        if (mainColor.name) {\r\n            // Create a variant for the main images\r\n            const mainVariant = {\r\n                name: mainColor.name,\r\n                hex: mainColor.hex,\r\n                images: productImages\r\n            };\r\n            finalColors = [mainVariant, ...colors];\r\n        }\r\n\r\n        const productData = {\r\n            ...currentProduct,\r\n            images: productImages,\r\n            image: productImages[0], // Main image is the first one\r\n            colors: finalColors, // Save combined colors\r\n            price: Number(currentProduct.price),\r\n            stock: Number(currentProduct.stock)\r\n        };\r\n\r\n        if (isEditing) {\r\n            updateProduct(currentProduct.id, productData);\r\n        } else {\r\n            addProduct(productData);\r\n        }\r\n        setShowModal(false);\r\n        resetForm();\r\n    };\r\n\r\n    const resetForm = () => {\r\n        setCurrentProduct({ name: '', brand: '', collection: '', tags: '', sku: '', price: '', stock: '', category: '', description: '', images: [], attributes: [], availableSizes: [], barcode: '' });\r\n        setColors([]);\r\n        setNewImageUrl('');\r\n        setNewColor({ name: '', hex: '#000000', images: [] });\r\n        setNewColorImageUrl('');\r\n        setMainColor({ name: '', hex: '#000000' });\r\n        setNewAttribute({ label: '', value: '' });\r\n    };\r\n\r\n    const openEdit = (product) => {\r\n        setIsEditing(true);\r\n        // Ensure images array exists\r\n        setCurrentProduct({\r\n            ...product,\r\n            brand: product.brand || '',\r\n            collection: product.collection || '',\r\n            tags: product.tags || '',\r\n            sku: product.sku || '',\r\n            images: product.images || [product.image],\r\n            attributes: product.attributes || [],\r\n            availableSizes: product.availableSizes || [],\r\n            barcode: product.barcode || ''\r\n        });\r\n\r\n        // Handle colors: Extract first color as \"Main Color\" if it exists, rest are variants\r\n        const productColors = product.colors || [];\r\n        if (productColors.length > 0) {\r\n            setMainColor({ name: productColors[0].name, hex: productColors[0].hex });\r\n            setColors(productColors.slice(1));\r\n        } else {\r\n            setMainColor({ name: '', hex: '#000000' });\r\n            setColors([]);\r\n        }\r\n\r\n        setShowModal(true);\r\n    };\r\n\r\n    const openAdd = () => {\r\n        setIsEditing(false);\r\n        resetForm();\r\n        const defaultCat = Object.keys(CATEGORIES)[0];\r\n        const firstSubGroup = Object.values(CATEGORIES[defaultCat].groups)[0];\r\n        setCurrentProduct({\r\n            name: '',\r\n            brand: '',\r\n            collection: '',\r\n            tags: '',\r\n            sku: '',\r\n            price: '',\r\n            stock: '',\r\n            category: defaultCat,\r\n            subcategory: firstSubGroup[0] || 'GÃ©nÃ©ral',\r\n            description: '',\r\n            images: [],\r\n            attributes: [],\r\n            availableSizes: [],\r\n            barcode: ''\r\n        });\r\n        setColors([]);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const addImage = () => {\r\n        if (newImageUrl.trim()) {\r\n            setCurrentProduct({\r\n                ...currentProduct,\r\n                images: [...(currentProduct.images || []), newImageUrl]\r\n            });\r\n            setNewImageUrl('');\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = (e) => {\r\n        const files = Array.from(e.target.files);\r\n\r\n        files.forEach(file => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setCurrentProduct(prev => ({\r\n                    ...prev,\r\n                    images: [...(prev.images || []), reader.result]\r\n                }));\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n\r\n        // Reset input\r\n        e.target.value = '';\r\n    };\r\n\r\n    const removeImage = (index) => {\r\n        const updatedImages = currentProduct.images.filter((_, i) => i !== index);\r\n        setCurrentProduct({ ...currentProduct, images: updatedImages });\r\n    };\r\n\r\n    // Color Management Functions\r\n    const addColor = () => {\r\n        if (newColor.name && newColor.hex) {\r\n            setColors([...colors, newColor]);\r\n            setNewColor({ name: '', hex: '#000000', images: [] });\r\n        } else {\r\n            alert('Veuillez entrer un nom et une couleur.');\r\n        }\r\n    };\r\n\r\n    const removeColor = (index) => {\r\n        setColors(colors.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const addColorImage = () => {\r\n        if (newColorImageUrl.trim()) {\r\n            setNewColor({\r\n                ...newColor,\r\n                images: [...(newColor.images || []), newColorImageUrl]\r\n            });\r\n            setNewColorImageUrl('');\r\n        }\r\n    };\r\n\r\n    const removeColorImage = (index) => {\r\n        const updatedImages = newColor.images.filter((_, i) => i !== index);\r\n        setNewColor({ ...newColor, images: updatedImages });\r\n    };\r\n\r\n    const handleColorFileUpload = (e) => {\r\n        const files = Array.from(e.target.files);\r\n        files.forEach(file => {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setNewColor(prev => ({\r\n                    ...prev,\r\n                    images: [...(prev.images || []), reader.result]\r\n                }));\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n        e.target.value = '';\r\n    };\r\n\r\n    // Filtering logic\r\n    const filteredProducts = products.filter(product => {\r\n        const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            product.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (product.barcode && product.barcode.toLowerCase().includes(searchTerm.toLowerCase()));\r\n        const matchesCategory = categoryFilter === 'all' || product.category === categoryFilter;\r\n        return matchesSearch && matchesCategory;\r\n    });\r\n\r\n    const displayedProducts = filteredProducts.slice(0, showLimit);\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2>Gestion des Produits</h2>\r\n                <Button onClick={openAdd}>+ Nouveau Produit</Button>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-3 rounded shadow-sm mb-4 border\">\r\n                <Row className=\"g-3\">\r\n                    <Col md={6}>\r\n                        <InputGroup>\r\n                            <InputGroup.Text className=\"bg-white border-end-0\">\r\n                                <i className=\"bi bi-search text-muted\"></i>\r\n                            </InputGroup.Text>\r\n                            <Form.Control\r\n                                placeholder=\"Rechercher par nom, description ou code-barre...\"\r\n                                className=\"border-start-0\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                            />\r\n                            <Button\r\n                                variant=\"outline-primary\"\r\n                                className=\"border-start-0\"\r\n                                style={{ borderLeft: 'none' }}\r\n                                onClick={() => setShowSearchScanner(true)}\r\n                                title=\"Scanner un produit\"\r\n                            >\r\n                                <i className=\"bi bi-camera\"></i>\r\n                            </Button>\r\n                        </InputGroup>\r\n                    </Col>\r\n                    <Col md={4}>\r\n                        <Form.Select\r\n                            value={categoryFilter}\r\n                            onChange={(e) => setCategoryFilter(e.target.value)}\r\n                        >\r\n                            <option value=\"all\">Toutes les catÃ©gories</option>\r\n                            {Object.keys(CATEGORIES).map(cat => (\r\n                                <option key={cat} value={cat}>{cat}</option>\r\n                            ))}\r\n                        </Form.Select>\r\n                    </Col>\r\n                    <Col md={2}>\r\n                        <div className=\"text-muted small text-end mt-2\">\r\n                            {filteredProducts.length} produits trouvÃ©s\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded shadow-sm border overflow-hidden\">\r\n                <Table hover responsive className=\"mb-0 align-middle\">\r\n                    <thead className=\"bg-light\">\r\n                        <tr>\r\n                            <th className=\"ps-3\" style={{ width: '80px' }}>Image</th>\r\n                            <th>Produit</th>\r\n                            <th>CatÃ©gorie</th>\r\n                            <th>Prix Vente</th>\r\n                            <th>Stock</th>\r\n                            <th style={{ width: '150px' }}>Code-Barre</th>\r\n                            <th className=\"text-end pe-3\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {displayedProducts.map(product => (\r\n                            <tr key={product.id}>\r\n                                <td className=\"ps-3\">\r\n                                    <div className=\"rounded border bg-light d-flex align-items-center justify-content-center\" style={{ width: '50px', height: '50px', overflow: 'hidden' }}>\r\n                                        <img\r\n                                            src={(product.images && product.images[0]) || product.image || '/assets/category_tech_1766034965148.png'}\r\n                                            alt={product.name}\r\n                                            style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                                            onError={(e) => { e.target.src = '/assets/category_tech_1766034965148.png'; }}\r\n                                        />\r\n                                    </div>\r\n                                </td>\r\n                                <td>\r\n                                    <div className=\"fw-bold text-dark\">{product.name}</div>\r\n                                    <div className=\"text-muted small text-truncate\" style={{ maxWidth: '200px' }}>{product.description}</div>\r\n                                </td>\r\n                                <td>\r\n                                    <Badge bg=\"info\" className=\"me-1\" style={{ fontSize: '0.7rem' }}>{product.category}</Badge>\r\n                                    <Badge bg=\"secondary\" style={{ fontSize: '0.7rem' }}>{product.subcategory}</Badge>\r\n                                </td>\r\n                                <td className=\"fw-bold text-success\">{product.price.toLocaleString()} FCFA</td>\r\n                                <td>\r\n                                    <div className={product.stock < 10 ? 'text-danger fw-bold' : 'text-success'}>\r\n                                        <i className={`bi bi-circle-fill me-1`} style={{ fontSize: '0.5rem' }}></i>\r\n                                        {product.stock} en stock\r\n                                    </div>\r\n                                </td>\r\n                                <td>\r\n                                    {product.barcode ? (\r\n                                        <div className=\"d-flex align-items-center gap-2\">\r\n                                            <Barcode value={product.barcode} width={1} height={30} fontSize={10} displayValue={false} />\r\n                                            <small className=\"text-muted\" style={{ fontSize: '0.65rem' }}>{product.barcode}</small>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <small className=\"text-muted fst-italic\">Non dÃ©fini</small>\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"text-end pe-3\">\r\n                                    <Button size=\"sm\" variant=\"outline-primary\" className=\"me-2 rounded-pill px-3\" onClick={() => openEdit(product)}>\r\n                                        <i className=\"bi bi-pencil me-1\"></i> Modif\r\n                                    </Button>\r\n                                    <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"outline-danger\"\r\n                                        className=\"rounded-pill px-3\"\r\n                                        onClick={() => {\r\n                                            if (window.confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer \"${product.name}\" ?`)) {\r\n                                                deleteProduct(product.id);\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        <i className=\"bi bi-trash me-1\"></i> Suppr\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </Table>\r\n\r\n                {filteredProducts.length > showLimit && (\r\n                    <div className=\"p-3 text-center border-top bg-light\">\r\n                        <Button variant=\"link\" onClick={() => setShowLimit(prev => prev + 10)} className=\"text-decoration-none fw-bold\">\r\n                            Afficher plus de produits ({filteredProducts.length - showLimit} restants)\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <Modal show={showModal} onHide={() => setShowModal(false)} size=\"lg\">\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{isEditing ? 'Modifier Produit' : 'Ajouter Produit'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Row>\r\n                        <Col md={6}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Nom du produit</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    value={currentProduct.name}\r\n                                    onChange={e => setCurrentProduct({ ...currentProduct, name: e.target.value })}\r\n                                />\r\n                            </Form.Group>\r\n                            <Row>\r\n                                <Col md={6}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Marque</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"ex: Zara, Apple...\"\r\n                                            value={currentProduct.brand}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, brand: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                                <Col md={6}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Collection</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"ex: Ã‰tÃ© 2024\"\r\n                                            value={currentProduct.collection}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, collection: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col md={6}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>SKU / RÃ©fÃ©rence</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Code unique\"\r\n                                            value={currentProduct.sku}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, sku: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                                <Col md={6}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Tags (Mots-clÃ©s)</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"ex: casual, fÃªte, vintage\"\r\n                                            value={currentProduct.tags}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, tags: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Col md={12}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Code-Barre EAN-13</Form.Label>\r\n                                        <InputGroup>\r\n                                            <Form.Control\r\n                                                type=\"text\"\r\n                                                placeholder=\"Code-barre auto ou manuel\"\r\n                                                value={currentProduct.barcode}\r\n                                                onChange={e => setCurrentProduct({ ...currentProduct, barcode: e.target.value })}\r\n                                                maxLength=\"13\"\r\n                                            />\r\n                                            <Button\r\n                                                variant=\"outline-primary\"\r\n                                                onClick={() => setShowScanner(true)}\r\n                                                title=\"Scanner avec la camÃ©ra\"\r\n                                            >\r\n                                                <i className=\"bi bi-camera\"></i>\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outline-warning\"\r\n                                                onClick={() => setCurrentProduct({ ...currentProduct, barcode: generateEAN13() })}\r\n                                                title=\"GÃ©nÃ©rer code-barre automatique\"\r\n                                            >\r\n                                                <i className=\"bi bi-upc-scan\"></i> GÃ©nÃ©rer\r\n                                            </Button>\r\n                                        </InputGroup>\r\n                                        <Form.Text className=\"text-muted small\">\r\n                                            13 chiffres - Cliquez sur le bouton pour gÃ©nÃ©rer automatiquement\r\n                                        </Form.Text>\r\n                                    </Form.Group>\r\n                                </Col>\r\n                            </Row>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>CatÃ©gorie</Form.Label>\r\n                                <Form.Select\r\n                                    value={currentProduct.category}\r\n                                    onChange={e => {\r\n                                        const newCat = e.target.value;\r\n                                        const firstSubGroup = Object.values(CATEGORIES[newCat].groups)[0];\r\n                                        setCurrentProduct({\r\n                                            ...currentProduct,\r\n                                            category: newCat,\r\n                                            subcategory: firstSubGroup[0] || 'GÃ©nÃ©ral'\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    {Object.keys(CATEGORIES).map(cat => (\r\n                                        <option key={cat} value={cat}>{cat}</option>\r\n                                    ))}\r\n                                </Form.Select>\r\n                            </Form.Group>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Sous-CatÃ©gorie</Form.Label>\r\n                                <Form.Select\r\n                                    value={currentProduct.subcategory}\r\n                                    onChange={e => setCurrentProduct({ ...currentProduct, subcategory: e.target.value })}\r\n                                >\r\n                                    {Object.entries(CATEGORIES[currentProduct.category]?.groups || {}).map(([group, items]) => (\r\n                                        <optgroup key={group} label={group}>\r\n                                            {items.map(sub => (\r\n                                                <option key={sub} value={sub}>{sub}</option>\r\n                                            ))}\r\n                                        </optgroup>\r\n                                    ))}\r\n                                </Form.Select>\r\n                            </Form.Group>\r\n                            <Row>\r\n                                <Col md={4}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Prix Vente (FCFA)</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"number\"\r\n                                            value={currentProduct.price}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, price: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                                <Col md={8}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Stock</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"number\"\r\n                                            value={currentProduct.stock}\r\n                                            onChange={e => setCurrentProduct({ ...currentProduct, stock: e.target.value })}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Col>\r\n                            </Row>\r\n                        </Col>\r\n                        <Col md={6}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label className=\"d-flex justify-content-between align-items-center\">\r\n                                    <span>Images du produit</span>\r\n                                    <Badge bg=\"info\" className=\"ms-2\">\r\n                                        {currentProduct.images?.length || 0} image(s)\r\n                                    </Badge>\r\n                                </Form.Label>\r\n\r\n                                <div className=\"mb-3\">\r\n                                    <div className=\"btn-group btn-group-sm w-100 mb-2\">\r\n                                        <Button\r\n                                            variant={imageSource === 'upload' ? 'primary' : 'outline-primary'}\r\n                                            onClick={() => setImageSource('upload')}\r\n                                        >\r\n                                            <i className=\"bi bi-upload me-1\"></i> Charger\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant={imageSource === 'url' ? 'primary' : 'outline-primary'}\r\n                                            onClick={() => setImageSource('url')}\r\n                                        >\r\n                                            <i className=\"bi bi-link-45deg me-1\"></i> Lien URL\r\n                                        </Button>\r\n                                    </div>\r\n\r\n                                    {imageSource === 'upload' ? (\r\n                                        <Form.Control\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            multiple\r\n                                            onChange={handleFileUpload}\r\n                                        />\r\n                                    ) : (\r\n                                        <div className=\"d-flex gap-2\">\r\n                                            <Form.Control\r\n                                                type=\"text\"\r\n                                                placeholder=\"https://...\"\r\n                                                value={newImageUrl}\r\n                                                onChange={e => setNewImageUrl(e.target.value)}\r\n                                                onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), addImage())}\r\n                                            />\r\n                                            <Button variant=\"outline-secondary\" onClick={addImage}>Ajouter</Button>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"border p-3 rounded bg-light\" style={{ minHeight: '150px', maxHeight: '250px', overflowY: 'auto' }}>\r\n                                    {currentProduct.images && currentProduct.images.length > 0 ? (\r\n                                        <div className=\"row g-2\">\r\n                                            {currentProduct.images.map((img, idx) => (\r\n                                                <div key={idx} className=\"col-4\">\r\n                                                    <div className=\"position-relative border rounded p-1 bg-white shadow-sm\">\r\n                                                        <img\r\n                                                            src={img}\r\n                                                            alt=\"preview\"\r\n                                                            style={{ width: '100%', height: '80px', objectFit: 'cover' }}\r\n                                                            className=\"rounded\"\r\n                                                        />\r\n                                                        {idx === 0 && (\r\n                                                            <div\r\n                                                                className=\"position-absolute top-0 start-0 bg-primary text-white p-1 rounded-end\"\r\n                                                                style={{ fontSize: '0.6rem', fontWeight: 'bold' }}\r\n                                                            >\r\n                                                                PRINCIPALE\r\n                                                            </div>\r\n                                                        )}\r\n                                                        <Button\r\n                                                            variant=\"danger\"\r\n                                                            size=\"sm\"\r\n                                                            className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill p-1 shadow\"\r\n                                                            style={{ fontSize: '0.6rem', border: '2px solid white' }}\r\n                                                            onClick={() => removeImage(idx)}\r\n                                                        >\r\n                                                            <i className=\"bi bi-x\"></i>\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"text-center py-4\">\r\n                                            <i className=\"bi bi-images text-muted\" style={{ fontSize: '2rem' }}></i>\r\n                                            <p className=\"text-muted small mt-2\">Aucune image ajoutÃ©e.</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </Form.Group>\r\n\r\n                            {/* Main Color Section - Moved Here */}\r\n                            <div className=\"p-3 bg-light rounded mb-3 border\">\r\n                                <h6 className=\"small fw-bold text-muted mb-2\">Couleur des images principales</h6>\r\n                                <Row className=\"g-2\">\r\n                                    <Col md={7}>\r\n                                        <Form.Label className=\"small\">Nom de la couleur</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            size=\"sm\"\r\n                                            placeholder=\"ex: Original, Noir...\"\r\n                                            value={mainColor.name}\r\n                                            onChange={e => setMainColor({ ...mainColor, name: e.target.value })}\r\n                                        />\r\n                                    </Col>\r\n                                    <Col md={5}>\r\n                                        <Form.Label className=\"small\">Code Hex</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"color\"\r\n                                            size=\"sm\"\r\n                                            value={mainColor.hex}\r\n                                            onChange={e => setMainColor({ ...mainColor, hex: e.target.value })}\r\n                                            className=\"p-1 w-100\"\r\n                                        />\r\n                                    </Col>\r\n                                </Row>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {/* Color Variants Section */}\r\n                    <div className=\"mb-4 border-top pt-3\">\r\n                        <h5 className=\"mb-3\">Variantes de Couleur</h5>\r\n                        <Row className=\"align-items-start g-2 mb-3 bg-light p-3 rounded\">\r\n                            <Col md={3}>\r\n                                <Form.Label className=\"small\">Nom (ex: Rouge)</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    size=\"sm\"\r\n                                    placeholder=\"Nom\"\r\n                                    value={newColor.name}\r\n                                    onChange={e => setNewColor({ ...newColor, name: e.target.value })}\r\n                                />\r\n                            </Col>\r\n                            <Col md={2}>\r\n                                <Form.Label className=\"small\">Couleur</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"color\"\r\n                                    size=\"sm\"\r\n                                    value={newColor.hex}\r\n                                    onChange={e => setNewColor({ ...newColor, hex: e.target.value })}\r\n                                    className=\"p-1\"\r\n                                />\r\n                            </Col>\r\n                            <Col md={7}>\r\n                                <div className=\"border p-2 rounded bg-white\">\r\n                                    <Form.Label className=\"small d-flex justify-content-between\">\r\n                                        <span>Images pour {newColor.name || 'cette variante'}</span>\r\n                                        <Badge bg=\"secondary\">{newColor.images?.length || 0}</Badge>\r\n                                    </Form.Label>\r\n                                    <div className=\"d-flex gap-2 mb-2\">\r\n                                        <div className=\"btn-group btn-group-sm\">\r\n                                            <Button variant={colorImageSource === 'upload' ? 'secondary' : 'outline-secondary'} onClick={() => setColorImageSource('upload')}>Upload</Button>\r\n                                            <Button variant={colorImageSource === 'url' ? 'secondary' : 'outline-secondary'} onClick={() => setColorImageSource('url')}>URL</Button>\r\n                                        </div>\r\n                                        {colorImageSource === 'url' ? (\r\n                                            <div className=\"d-flex gap-1 flex-grow-1\">\r\n                                                <Form.Control size=\"sm\" type=\"text\" placeholder=\"URL image\" value={newColorImageUrl} onChange={e => setNewColorImageUrl(e.target.value)} onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), addColorImage())} />\r\n                                                <Button size=\"sm\" variant=\"outline-dark\" onClick={addColorImage}>+</Button>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <Form.Control size=\"sm\" type=\"file\" multiple accept=\"image/*\" onChange={handleColorFileUpload} />\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"d-flex gap-2 overflow-auto\" style={{ maxHeight: '100px' }}>\r\n                                        {newColor.images?.map((img, idx) => (\r\n                                            <div key={idx} className=\"position-relative border rounded\" style={{ minWidth: '60px', width: '60px', height: '60px' }}>\r\n                                                <img src={img} alt=\"\" className=\"w-100 h-100 rounded object-fit-cover\" />\r\n                                                <div className=\"position-absolute top-0 end-0 translate-middle p-1 bg-danger rounded-circle text-white d-flex align-items-center justify-content-center\" style={{ width: '16px', height: '16px', cursor: 'pointer' }} onClick={() => removeColorImage(idx)}>\r\n                                                    <span style={{ fontSize: '10px', lineHeight: 0 }}>Ã—</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                        {(!newColor.images || newColor.images.length === 0) && <div className=\"text-muted small fst-italic p-2\">Aucune image</div>}\r\n                                    </div>\r\n                                    <div className=\"mt-2 text-end\">\r\n                                        <Button variant=\"dark\" size=\"sm\" onClick={addColor}>Ajouter la variante</Button>\r\n                                    </div>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                        {/* Colors List */}\r\n                        {colors.length > 0 ? (\r\n                            <div className=\"d-flex flex-wrap gap-2\">\r\n                                {colors.map((color, idx) => (\r\n                                    <div key={idx} className=\"border rounded p-2 bg-white shadow-sm\" style={{ minWidth: '150px' }}>\r\n                                        <div className=\"d-flex align-items-center mb-1\">\r\n                                            <div className=\"rounded-circle border me-2\" style={{ width: '20px', height: '20px', backgroundColor: color.hex }}></div>\r\n                                            <div className=\"fw-bold small\">{color.name}</div>\r\n                                            <Button variant=\"link\" className=\"text-danger p-0 ms-auto\" size=\"sm\" onClick={() => removeColor(idx)}>\r\n                                                <i className=\"bi bi-x\"></i>\r\n                                            </Button>\r\n                                        </div>\r\n                                        <div className=\"d-flex gap-1 overflow-hidden\" style={{ height: '30px' }}>\r\n                                            {color.images && color.images.length > 0 ? (\r\n                                                color.images.map((img, imgIdx) => (\r\n                                                    <img key={imgIdx} src={img} alt=\"\" className=\"h-100 rounded border\" style={{ width: '30px', objectFit: 'cover' }} />\r\n                                                ))\r\n                                            ) : (\r\n                                                <span className=\"text-muted small\" style={{ fontSize: '0.7rem' }}>Sans images</span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <p className=\"text-muted small fst-italic\">Aucune variante de couleur dÃ©finie.</p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control\r\n                            as=\"textarea\"\r\n                            rows={3}\r\n                            value={currentProduct.description}\r\n                            onChange={e => setCurrentProduct({ ...currentProduct, description: e.target.value })}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    {/* Sizes Selection Section */}\r\n                    {(getTemplateKey(currentProduct.category) === 'Clothing' || getTemplateKey(currentProduct.category) === 'Shoes') && (\r\n                        <div className=\"mb-4 border-top pt-3\">\r\n                            <h5 className=\"mb-3 d-flex align-items-center gap-2\">\r\n                                <i className=\"bi bi-rulers text-primary\"></i>\r\n                                Tailles / Pointures Disponibles\r\n                            </h5>\r\n                            <p className=\"text-muted small mb-3\">SÃ©lectionnez les tailles qui seront proposÃ©es au client.</p>\r\n\r\n                            <div className=\"d-flex flex-wrap gap-2 mb-3\">\r\n                                {(getTemplateKey(currentProduct.category) === 'Shoes' ? SIZE_PRESETS.Shoes : SIZE_PRESETS.Clothing).map(size => (\r\n                                    <Button\r\n                                        key={size}\r\n                                        variant={currentProduct.availableSizes?.includes(size) ? 'primary' : 'outline-secondary'}\r\n                                        size=\"sm\"\r\n                                        className=\"px-3 rounded-pill\"\r\n                                        onClick={() => toggleSize(size)}\r\n                                    >\r\n                                        {size}\r\n                                    </Button>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <InputGroup size=\"sm\" style={{ maxWidth: '300px' }}>\r\n                                <Form.Control\r\n                                    placeholder=\"Ajouter une taille perso...\"\r\n                                    id=\"customSizeInput\"\r\n                                    onKeyPress={(e) => {\r\n                                        if (e.key === 'Enter') {\r\n                                            if (e.target.value) toggleSize(e.target.value.toUpperCase());\r\n                                            e.target.value = '';\r\n                                        }\r\n                                    }}\r\n                                />\r\n                                <Button variant=\"outline-primary\" onClick={() => {\r\n                                    const input = document.getElementById('customSizeInput');\r\n                                    if (input.value) toggleSize(input.value.toUpperCase());\r\n                                    input.value = '';\r\n                                }}>\r\n                                    Ajouter\r\n                                </Button>\r\n                            </InputGroup>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Dynamic Attributes Section */}\r\n                    <div className=\"mb-4 border-top pt-3\">\r\n                        <h5 className=\"mb-3 d-flex align-items-center gap-2\">\r\n                            <i className=\"bi bi-list-stars text-primary\"></i>\r\n                            DÃ©tails & SpÃ©cifications\r\n                        </h5>\r\n\r\n                        {/* Template Fields based on Category */}\r\n                        {getTemplateKey(currentProduct.category) && (\r\n                            <div className=\"p-3 bg-light rounded mb-3 border\">\r\n                                <h6 className=\"small fw-bold text-muted mb-3 border-bottom pb-2\">CHAMPS RECOMMANDÃ‰S POUR {currentProduct.category.toUpperCase()}</h6>\r\n                                <Row className=\"g-3\">\r\n                                    {ATTRIBUTE_TEMPLATES[getTemplateKey(currentProduct.category)].map(field => (\r\n                                        <Col md={6} key={field}>\r\n                                            <Form.Group>\r\n                                                <Form.Label className=\"small fw-medium mb-1\">{field}</Form.Label>\r\n                                                <Form.Control\r\n                                                    size=\"sm\"\r\n                                                    type=\"text\"\r\n                                                    placeholder={`Saisir ${field.toLowerCase()}...`}\r\n                                                    value={getFieldValue(field)}\r\n                                                    onChange={e => handleTemplateFieldChange(field, e.target.value)}\r\n                                                    style={{ borderRadius: '6px' }}\r\n                                                />\r\n                                            </Form.Group>\r\n                                        </Col>\r\n                                    ))}\r\n                                </Row>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"bg-white border rounded p-3\">\r\n                            <h6 className=\"small fw-bold text-muted mb-3\">AUTRES DÃ‰TAILS PERSONNALISÃ‰S</h6>\r\n                            <Row className=\"g-2 mb-3 align-items-end\">\r\n                                <Col md={5}>\r\n                                    <Form.Control\r\n                                        size=\"sm\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"LibellÃ© (ex: Garantie)\"\r\n                                        value={newAttribute.label}\r\n                                        onChange={e => setNewAttribute({ ...newAttribute, label: e.target.value })}\r\n                                    />\r\n                                </Col>\r\n                                <Col md={5}>\r\n                                    <Form.Control\r\n                                        size=\"sm\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Valeur (ex: 2 ans)\"\r\n                                        value={newAttribute.value}\r\n                                        onChange={e => setNewAttribute({ ...newAttribute, value: e.target.value })}\r\n                                    />\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                    <Button size=\"sm\" variant=\"outline-dark\" className=\"w-100\" onClick={addAttribute}>\r\n                                        <i className=\"bi bi-plus-lg\"></i>\r\n                                    </Button>\r\n                                </Col>\r\n                            </Row>\r\n\r\n                            {/* List of non-template attributes if any, or all if no template */}\r\n                            {currentProduct.attributes && currentProduct.attributes.length > 0 && (\r\n                                <div className=\"d-flex flex-wrap gap-2\">\r\n                                    {currentProduct.attributes\r\n                                        .filter(attr => !getTemplateKey(currentProduct.category) || !ATTRIBUTE_TEMPLATES[getTemplateKey(currentProduct.category)].includes(attr.label))\r\n                                        .map((attr, idx) => (\r\n                                            <div key={idx} className=\"d-flex align-items-center bg-light border rounded ps-3 pe-2 py-1\">\r\n                                                <span className=\"text-muted small me-1\">{attr.label}:</span>\r\n                                                <span className=\"fw-bold small\">{attr.value}</span>\r\n                                                <Button\r\n                                                    variant=\"link\"\r\n                                                    className=\"text-danger p-0 ms-2 d-flex align-items-center\"\r\n                                                    style={{ textDecoration: 'none' }}\r\n                                                    onClick={() => {\r\n                                                        const realIndex = currentProduct.attributes.indexOf(attr);\r\n                                                        removeAttribute(realIndex);\r\n                                                    }}\r\n                                                >\r\n                                                    <i className=\"bi bi-x\"></i>\r\n                                                </Button>\r\n                                            </div>\r\n                                        ))\r\n                                    }\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>Annuler</Button>\r\n                    <Button variant=\"primary\" onClick={handleSave}>Enregistrer</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            {/* Barcode Scanner Modal for new/edit */}\r\n            <BarcodeScanner\r\n                show={showScanner}\r\n                onHide={() => setShowScanner(false)}\r\n                onScan={(code) => setCurrentProduct({ ...currentProduct, barcode: code })}\r\n            />\r\n\r\n            {/* Barcode Scanner Modal for search */}\r\n            <BarcodeScanner\r\n                show={showSearchScanner}\r\n                onHide={() => setShowSearchScanner(false)}\r\n                onScan={(code) => setSearchTerm(code)}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminProducts;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminUsers.jsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":26,"column":39,"nodeType":"Identifier","endLine":26,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":27,"column":43,"nodeType":"Identifier","endLine":27,"endColumn":51},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":28,"column":41,"nodeType":"Identifier","endLine":28,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":29,"column":41,"nodeType":"Identifier","endLine":29,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":30,"column":37,"nodeType":"Identifier","endLine":30,"endColumn":45},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":260,"column":38,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[10500,10604],"text":"\r\n                                    L&apos;email ne peut pas Ãªtre modifiÃ©\r\n                                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[10500,10604],"text":"\r\n                                    L&lsquo;email ne peut pas Ãªtre modifiÃ©\r\n                                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[10500,10604],"text":"\r\n                                    L&#39;email ne peut pas Ãªtre modifiÃ©\r\n                                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[10500,10604],"text":"\r\n                                    L&rsquo;email ne peut pas Ãªtre modifiÃ©\r\n                                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Table, Button, Modal, Form, Badge, Row, Col, InputGroup } from 'react-bootstrap';\r\nimport { useData } from '../../context/DataContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// Fonction pour gÃ©nÃ©rer un ID unique (identique Ã  AuthContext)\r\nconst generateUserId = () => {\r\n    const chars = '0123456789';\r\n    let id = '';\r\n    for (let i = 0; i < 6; i++) {\r\n        id += chars.charAt(Math.floor(Math.random() * chars.length));\r\n    }\r\n    return id;\r\n};\r\n\r\nconst AdminUsers = () => {\r\n    const { users, setUsers } = useData();\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    if (user?.role === 'expediteur' || user?.role === 'manager') {\r\n        navigate('/admin');\r\n        return null;\r\n    }\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingUser, setEditingUser] = useState(null);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [roleFilter, setRoleFilter] = useState('all');\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        role: 'client'\r\n    });\r\n\r\n    // Filter users\r\n    const filteredUsers = users.filter(user => {\r\n        const matchesSearch = user.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            user.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n        const matchesRole = roleFilter === 'all' || user.role === roleFilter;\r\n        return matchesSearch && matchesRole;\r\n    });\r\n\r\n    // Open modal for creating new user\r\n    const handleCreate = () => {\r\n        setEditingUser(null);\r\n        setFormData({\r\n            name: '',\r\n            email: '',\r\n            password: '',\r\n            role: 'client'\r\n        });\r\n        setShowModal(true);\r\n    };\r\n\r\n    // Open modal for editing user\r\n    const handleEdit = (user) => {\r\n        setEditingUser(user);\r\n        setFormData({\r\n            name: user.name || '',\r\n            email: user.email || '',\r\n            password: '',\r\n            role: user.role || 'client'\r\n        });\r\n        setShowModal(true);\r\n    };\r\n\r\n    // Save user (create or update)\r\n    const handleSave = () => {\r\n        if (!formData.name || !formData.email) {\r\n            alert('Veuillez remplir tous les champs obligatoires');\r\n            return;\r\n        }\r\n\r\n        if (editingUser) {\r\n            // Update existing user\r\n            const updatedUsers = users.map(u =>\r\n                u.email === editingUser.email\r\n                    ? {\r\n                        ...u,\r\n                        name: formData.name,\r\n                        email: formData.email,\r\n                        role: formData.role,\r\n                        ...(formData.password && { password: formData.password })\r\n                    }\r\n                    : u\r\n            );\r\n            setUsers(updatedUsers);\r\n            alert('Utilisateur modifiÃ© avec succÃ¨s !');\r\n        } else {\r\n            // Create new user\r\n            if (!formData.password) {\r\n                alert('Le mot de passe est obligatoire pour un nouveau compte');\r\n                return;\r\n            }\r\n\r\n            // Check if email already exists\r\n            if (users.some(u => u.email === formData.email)) {\r\n                alert('Cet email est dÃ©jÃ  utilisÃ©');\r\n                return;\r\n            }\r\n\r\n            const newUser = {\r\n                id: generateUserId(),\r\n                name: formData.name,\r\n                email: formData.email,\r\n                password: formData.password,\r\n                role: formData.role,\r\n                joined: new Date().toISOString().split('T')[0],\r\n                balance: 0,\r\n                avatar: 'ðŸ‘¤'\r\n            };\r\n            setUsers([...users, newUser]);\r\n            alert('Utilisateur crÃ©Ã© avec succÃ¨s !');\r\n        }\r\n\r\n        setShowModal(false);\r\n    };\r\n\r\n    // Delete user\r\n    const handleDelete = (user) => {\r\n        if (user.role === 'admin' && users.filter(u => u.role === 'admin').length === 1) {\r\n            alert('Impossible de supprimer le dernier administrateur !');\r\n            return;\r\n        }\r\n\r\n        if (window.confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer ${user.name} ?`)) {\r\n            setUsers(users.filter(u => u.email !== user.email));\r\n            alert('Utilisateur supprimÃ© avec succÃ¨s !');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h4 className=\"mb-0\">Gestion des Clients</h4>\r\n                <Button variant=\"primary\" onClick={handleCreate}>\r\n                    <i className=\"bi bi-plus-circle me-2\"></i>\r\n                    Nouveau Client\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Search and Filter */}\r\n            <Row className=\"mb-4\">\r\n                <Col md={6}>\r\n                    <InputGroup>\r\n                        <InputGroup.Text>\r\n                            <i className=\"bi bi-search\"></i>\r\n                        </InputGroup.Text>\r\n                        <Form.Control\r\n                            placeholder=\"Rechercher par nom ou email...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </InputGroup>\r\n                </Col>\r\n                <Col md={3}>\r\n                    <Form.Select value={roleFilter} onChange={(e) => setRoleFilter(e.target.value)}>\r\n                        <option value=\"all\">Tous les rÃ´les</option>\r\n                        <option value=\"client\">Clients</option>\r\n                        <option value=\"admin\">Administrateurs</option>\r\n                        <option value=\"manager\">Managers</option>\r\n                        <option value=\"expediteur\">ExpÃ©diteurs</option>\r\n                    </Form.Select>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Users Table */}\r\n            {filteredUsers.length === 0 ? (\r\n                <div className=\"text-center text-muted py-5\">\r\n                    <i className=\"bi bi-people\" style={{ fontSize: '3rem' }}></i>\r\n                    <p className=\"mt-3\">Aucun utilisateur trouvÃ©</p>\r\n                </div>\r\n            ) : (\r\n                <Table hover responsive>\r\n                    <thead className=\"table-light\">\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>Nom</th>\r\n                            <th>Email</th>\r\n                            <th>RÃ´le</th>\r\n                            <th>Inscrit le</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {filteredUsers.map((user, index) => (\r\n                            <tr key={user.email}>\r\n                                <td>{user.id || index + 1}</td>\r\n                                <td>{user.name}</td>\r\n                                <td>{user.email}</td>\r\n                                <td>\r\n                                    <Badge bg={user.role === 'admin' ? 'danger' : 'info'}>\r\n                                        {user.role}\r\n                                    </Badge>\r\n                                </td>\r\n                                <td>\r\n                                    {user.joined ? (\r\n                                        new Date(user.joined).toLocaleDateString('fr-FR', {\r\n                                            day: '2-digit',\r\n                                            month: '2-digit',\r\n                                            year: 'numeric'\r\n                                        })\r\n                                    ) : 'Date inconnue'}\r\n                                </td>\r\n                                <td>\r\n                                    <Button\r\n                                        variant=\"outline-primary\"\r\n                                        size=\"sm\"\r\n                                        className=\"me-2\"\r\n                                        onClick={() => handleEdit(user)}\r\n                                    >\r\n                                        <i className=\"bi bi-pencil\"></i>\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outline-danger\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => handleDelete(user)}\r\n                                    >\r\n                                        <i className=\"bi bi-trash\"></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </Table>\r\n            )}\r\n\r\n            {/* Create/Edit Modal */}\r\n            <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        {editingUser ? 'Modifier l\\'utilisateur' : 'Nouveau utilisateur'}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Nom complet *</Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Jean Dupont\"\r\n                                value={formData.name}\r\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Email *</Form.Label>\r\n                            <Form.Control\r\n                                type=\"email\"\r\n                                placeholder=\"jean@example.com\"\r\n                                value={formData.email}\r\n                                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                disabled={!!editingUser}\r\n                            />\r\n                            {editingUser && (\r\n                                <Form.Text className=\"text-muted\">\r\n                                    L'email ne peut pas Ãªtre modifiÃ©\r\n                                </Form.Text>\r\n                            )}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>\r\n                                Mot de passe {!editingUser && '*'}\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"password\"\r\n                                placeholder={editingUser ? 'Laisser vide pour ne pas changer' : 'Mot de passe'}\r\n                                value={formData.password}\r\n                                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                            />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>RÃ´le *</Form.Label>\r\n                            <Form.Select\r\n                                value={formData.role}\r\n                                onChange={(e) => setFormData({ ...formData, role: e.target.value })}\r\n                            >\r\n                                <option value=\"client\">Client</option>\r\n                                <option value=\"admin\">Administrateur</option>\r\n                                <option value=\"manager\">Manager</option>\r\n                                <option value=\"expediteur\">ExpÃ©diteur</option>\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={handleSave}>\r\n                        {editingUser ? 'Modifier' : 'CrÃ©er'}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminUsers;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminViews.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'newStatus' is defined but never used.","line":121,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":49},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":421,"column":35,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[19055,19135],"text":"\r\n                        Demandes d&apos;annulation en attente\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[19055,19135],"text":"\r\n                        Demandes d&lsquo;annulation en attente\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[19055,19135],"text":"\r\n                        Demandes d&#39;annulation en attente\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[19055,19135],"text":"\r\n                        Demandes d&rsquo;annulation en attente\r\n                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":598,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[29259,29393],"text":"\r\n                                Cette note sera visible par le client dans l&apos;historique de sa commande\r\n                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[29259,29393],"text":"\r\n                                Cette note sera visible par le client dans l&lsquo;historique de sa commande\r\n                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[29259,29393],"text":"\r\n                                Cette note sera visible par le client dans l&#39;historique de sa commande\r\n                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[29259,29393],"text":"\r\n                                Cette note sera visible par le client dans l&rsquo;historique de sa commande\r\n                            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Table, Badge, Button, Modal, Form, InputGroup, Row, Col, Card } from 'react-bootstrap';\r\nimport { useData } from '../../context/DataContext';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport Barcode from 'react-barcode';\r\nimport BarcodeScanner from '../../components/BarcodeScanner';\r\nimport API_BASE_URL from '../../config';\r\n\r\nexport const AdminOrders = () => {\r\n    const { orders } = useData();\r\n    const { user } = useAuth();\r\n    const isManager = user?.role === 'manager';\r\n    const isExpediteur = user?.role === 'expediteur';\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [statusFilter, setStatusFilter] = useState('all');\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [selectedOrder, setSelectedOrder] = useState(null);\r\n    const [statusNote, setStatusNote] = useState('');\r\n    const [trackingNumber, setTrackingNumber] = useState('');\r\n    const [showDetailsModal, setShowDetailsModal] = useState(false);\r\n    const [detailsOrder, setDetailsOrder] = useState(null);\r\n    const [showScanner, setShowScanner] = useState(false);\r\n\r\n    // Auto-open order on barcode scan / exact search\r\n    const handleSearchChange = (val) => {\r\n        setSearchTerm(val);\r\n    };\r\n\r\n    const handlePrintSlip = (order) => {\r\n        const printWindow = window.open('', '_blank', 'width=400,height=600');\r\n        const barcodeSvg = document.getElementById(`barcode-svg-${order.id}`)?.outerHTML || '';\r\n\r\n        printWindow.document.write(`\r\n            <html>\r\n                <head>\r\n                    <title>Fiche Commande #${order.id}</title>\r\n                    <style>\r\n                        body { font-family: 'Inter', sans-serif; padding: 20px; text-align: center; }\r\n                        .ticket { border: 1px dashed #000; padding: 15px; width: 80mm; margin: 0 auto; }\r\n                        .header { font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; }\r\n                        .details { text-align: left; font-size: 0.9rem; margin: 15px 0; }\r\n                        .barcode { margin: 20px 0; }\r\n                        .footer { font-size: 0.7rem; color: #666; margin-top: 10px; }\r\n                        @media print {\r\n                            body { margin: 0; padding: 0; }\r\n                            .ticket { border: none; }\r\n                        }\r\n                    </style>\r\n                </head>\r\n                <body>\r\n                    <div class=\"ticket\">\r\n                        <div class=\"header\">TRY MY DAY</div>\r\n                        <div class=\"header\">Commande #${order.id}</div>\r\n                        <div class=\"barcode\">\r\n                            ${barcodeSvg}\r\n                        </div>\r\n                        <div class=\"details\">\r\n                            <strong>Client:</strong> ${order.customerName || order.customer}<br>\r\n                            <strong>Tel:</strong> ${order.phone || 'N/A'}<br>\r\n                            <strong>Date:</strong> ${order.date}<br>\r\n                            <strong>Total:</strong> ${order.total.toLocaleString()} FCFA<br><br>\r\n                            <strong>Articles:</strong><br>\r\n                            ${order.items?.map(i => `- ${i.name} (x${i.quantity})`).join('<br>')}\r\n                        </div>\r\n                        <div class=\"footer\">Merci de votre confiance !</div>\r\n                    </div>\r\n                    <script>\r\n                        setTimeout(() => {\r\n                            window.print();\r\n                            window.close();\r\n                        }, 500);\r\n                    </script>\r\n                </body>\r\n            </html>\r\n        `);\r\n        printWindow.document.close();\r\n    };\r\n\r\n    // Filter orders (last 30 days for manager/expediteur)\r\n    const displayOrders = (isManager || isExpediteur) ? orders.filter(order => {\r\n        try {\r\n            const orderDate = new Date(order.date);\r\n            const thirtyDaysAgo = new Date();\r\n            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n            if (!isNaN(orderDate.getTime())) return orderDate >= thirtyDaysAgo;\r\n            if (order.date.includes('/')) {\r\n                const [d, m, y] = order.date.split('/');\r\n                const parsedDate = new Date(`${y}-${m}-${d}`);\r\n                return parsedDate >= thirtyDaysAgo;\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    }) : orders;\r\n\r\n    // Filter orders with UI search/status\r\n    const filteredOrders = displayOrders.filter(order => {\r\n        const matchesSearch =\r\n            order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            (order.customerName && order.customerName.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n            (order.customer && order.customer.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n            (order.email && order.email.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n        const matchesStatus = statusFilter === 'all' || order.status === statusFilter;\r\n\r\n        return matchesSearch && matchesStatus;\r\n    });\r\n\r\n    // Statistics based on displayOrders (last 30 days if manager)\r\n    const stats = {\r\n        total: displayOrders.length,\r\n        pending: displayOrders.filter(o => o.status === 'En attente').length,\r\n        inProgress: displayOrders.filter(o => o.status === 'En cours de prÃ©paration').length,\r\n        shipping: displayOrders.filter(o => o.status === 'En route').length,\r\n        delivered: displayOrders.filter(o => o.status === 'LivrÃ©e' || o.status === 'LivrÃ©').length,\r\n        cancelled: displayOrders.filter(o => o.status === 'AnnulÃ©e').length,\r\n        totalRevenue: displayOrders.reduce((sum, o) => sum + parseFloat(o.total || 0), 0)\r\n    };\r\n\r\n    const handleStatusChange = (order, newStatus) => {\r\n        setSelectedOrder(order);\r\n        setShowModal(true);\r\n        setStatusNote('');\r\n        setTrackingNumber(order.trackingNumber || '');\r\n    };\r\n\r\n    const sendEmailNotification = async (order, newStatus, note) => {\r\n        try {\r\n            console.log('ðŸ“§ Sending email notification for order:', order.id);\r\n            const response = await fetch(`${API_BASE_URL}/api/admin/order-email`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    order: order,\r\n                    status: newStatus,\r\n                    note: note\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                console.log('âœ… Email notification sent successfully');\r\n            } else {\r\n                console.error('âŒ Failed to send email notification:', data.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('âŒ Error calling email API:', error);\r\n        }\r\n    };\r\n\r\n    const saveStatusChange = async () => {\r\n        if (!selectedOrder) return;\r\n\r\n        const now = new Date();\r\n        const timestamp = now.toLocaleString('fr-FR');\r\n        const newStatus = document.getElementById('newStatus').value;\r\n\r\n        // Create timeline entry\r\n        const timelineEntry = {\r\n            date: timestamp,\r\n            oldStatus: selectedOrder.status,\r\n            newStatus: newStatus,\r\n            note: statusNote,\r\n            admin: 'Trymyday'\r\n        };\r\n\r\n        // Update order\r\n        const updatedOrders = orders.map(o => {\r\n            if (o.id === selectedOrder.id) {\r\n                return {\r\n                    ...o,\r\n                    status: newStatus,\r\n                    trackingNumber: trackingNumber,\r\n                    timeline: [...(o.timeline || []), timelineEntry],\r\n                    lastUpdated: timestamp\r\n                };\r\n            }\r\n            return o;\r\n        });\r\n\r\n        localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n\r\n        // Send email notification to customer\r\n        await sendEmailNotification(selectedOrder, newStatus, statusNote);\r\n\r\n        setShowModal(false);\r\n        window.location.reload();\r\n    };\r\n\r\n    const handleApproveCancellation = async (order) => {\r\n        if (!window.confirm(`Approuver l'annulation de la commande #${order.id} et rembourser ${order.total.toLocaleString()} FCFA ?`)) return;\r\n\r\n        // 1. Update order status\r\n        const timestamp = new Date().toLocaleString('fr-FR');\r\n        const timelineEntry = {\r\n            date: timestamp,\r\n            oldStatus: order.status,\r\n            newStatus: \"AnnulÃ©e\",\r\n            note: \"Annulation approuvÃ©e par l'admin. Client remboursÃ©.\",\r\n            admin: 'Trymyday'\r\n        };\r\n\r\n        const updatedOrders = orders.map(o => {\r\n            if (o.id === order.id) {\r\n                return {\r\n                    ...o,\r\n                    status: 'AnnulÃ©e',\r\n                    timeline: [...(o.timeline || []), timelineEntry],\r\n                    lastUpdated: timestamp\r\n                };\r\n            }\r\n            return o;\r\n        });\r\n        localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n\r\n        // 2. Process Real Refund via Backend\r\n        try {\r\n            console.log('ðŸ’° Triggering real refund for order:', order.id);\r\n            const response = await fetch(`${API_BASE_URL}/api/admin/order-refund`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    order: order,\r\n                    note: 'Annulation approuvÃ©e par Trymyday. Remboursement effectuÃ©.'\r\n                }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                console.log('âœ… Refund processed successfully:', data.newBalance);\r\n            } else {\r\n                console.error('âŒ Failed to process refund:', data.message);\r\n                alert(`âš ï¸ Le statut de la commande a Ã©tÃ© mis Ã  jour, mais le remboursement a Ã©chouÃ© : ${data.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('âŒ Error calling refund API:', error);\r\n            alert('âš ï¸ Erreur lors de la communication avec le serveur pour le remboursement.');\r\n        }\r\n\r\n        alert(`âœ… Commande #${order.id} annulÃ©e et remboursement effectuÃ©.`);\r\n        window.location.reload();\r\n    };\r\n\r\n    const handleRefuseCancellation = async (order) => {\r\n        if (!window.confirm(`Refuser la demande d'annulation pour la commande #${order.id} ?`)) return;\r\n\r\n        const timestamp = new Date().toLocaleString('fr-FR');\r\n        const timelineEntry = {\r\n            date: timestamp,\r\n            oldStatus: order.status,\r\n            newStatus: \"En cours de prÃ©paration\",\r\n            note: \"Demande d'annulation refusÃ©e par Trymyday.\",\r\n            admin: 'Trymyday'\r\n        };\r\n\r\n        const updatedOrders = orders.map(o => {\r\n            if (o.id === order.id) {\r\n                return {\r\n                    ...o,\r\n                    status: 'En cours de prÃ©paration',\r\n                    timeline: [...(o.timeline || []), timelineEntry],\r\n                    lastUpdated: timestamp\r\n                };\r\n            }\r\n            return o;\r\n        });\r\n        localStorage.setItem('orders', JSON.stringify(updatedOrders));\r\n\r\n        // Send Email\r\n        await sendEmailNotification(order, 'En cours de prÃ©paration', 'Demande d\\'annulation refusÃ©e par Trymyday.');\r\n\r\n        alert(`âŒ Demande d'annulation refusÃ©e. Le statut est passÃ© Ã  \"En cours de prÃ©paration\".`);\r\n        window.location.reload();\r\n    };\r\n\r\n    const exportToCSV = () => {\r\n        const headers = ['ID Commande', 'ID Client', 'Nom', 'TÃ©lÃ©phone', 'Date', 'Montant', 'Statut', 'Lien Suivi'];\r\n        const rows = filteredOrders.map(o => [\r\n            o.id,\r\n            o.customerId || o.userId || '-',\r\n            o.customerName || o.customer || 'Client',\r\n            o.phone || '-',\r\n            o.date,\r\n            `${o.total.toLocaleString()} FCFA`,\r\n            o.status,\r\n            o.trackingNumber || '-'\r\n        ]);\r\n\r\n        // Utilisation de point-virgule pour Excel FR et encodage UTF-8 BOM\r\n        const csvContent = \"\\uFEFF\" + [\r\n            headers.join(';'),\r\n            ...rows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(';'))\r\n        ].join('\\n');\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.setAttribute('download', `commandes_trymyday_${new Date().toISOString().split('T')[0]}.csv`);\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Statistics Cards */}\r\n            <Row className=\"mb-3 g-2\">\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>Total</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.total}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>En attente</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.pending}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>PrÃ©paration</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.inProgress}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>En route</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.shipping}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>LivrÃ©es</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.delivered}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                <Col>\r\n                    <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)' }}>\r\n                        <Card.Body className=\"text-center p-2 text-white\">\r\n                            <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>AnnulÃ©es</div>\r\n                            <h6 className=\"mb-0 fw-bold\">{stats.cancelled}</h6>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n                {!isManager && !isExpediteur && (\r\n                    <Col>\r\n                        <Card className=\"border-0 shadow-sm\" style={{ background: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' }}>\r\n                            <Card.Body className=\"text-center p-2 text-white\">\r\n                                <div style={{ fontSize: '0.65rem', opacity: 0.9 }}>Revenu Total</div>\r\n                                <h6 className=\"mb-0 fw-bold\">{stats.totalRevenue.toLocaleString()} FCFA</h6>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                )}\r\n            </Row>\r\n\r\n            {/* Header */}\r\n            <h5 className=\"mb-3 mt-3\">Gestion des Commandes</h5>\r\n\r\n            {/* Search and Filter */}\r\n            <Row className=\"mb-4\">\r\n                <Col md={6}>\r\n                    <InputGroup>\r\n                        <InputGroup.Text>\r\n                            <i className=\"bi bi-search\"></i>\r\n                        </InputGroup.Text>\r\n                        <Form.Control\r\n                            placeholder=\"Scanner le code-barre ou rechercher...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => handleSearchChange(e.target.value)}\r\n                        />\r\n                        <Button\r\n                            variant=\"outline-primary\"\r\n                            onClick={() => setShowScanner(true)}\r\n                            title=\"Scanner le code-barre\"\r\n                        >\r\n                            <i className=\"bi bi-camera\"></i>\r\n                        </Button>\r\n                    </InputGroup>\r\n                </Col>\r\n                <Col md={3}>\r\n                    <Form.Select value={statusFilter} onChange={(e) => setStatusFilter(e.target.value)}>\r\n                        <option value=\"all\">Tous les statuts</option>\r\n                        <option value=\"En attente\">En attente</option>\r\n                        <option value=\"En cours de prÃ©paration\">En prÃ©paration</option>\r\n                        <option value=\"En route\">En route</option>\r\n                        <option value=\"LivrÃ©e\">LivrÃ©e</option>\r\n                        <option value=\"AnnulÃ©e\">AnnulÃ©e</option>\r\n                    </Form.Select>\r\n                </Col>\r\n                <Col md={2}>\r\n                    <Button variant=\"success\" onClick={exportToCSV} className=\"w-100\" size=\"sm\">\r\n                        <i className=\"bi bi-download me-1\"></i>\r\n                        Exporter\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Cancellation Requests Section */}\r\n            {orders.filter(o => o.status === \"Demande d'annulation\").length > 0 && (\r\n                <div className=\"mb-4\">\r\n                    <h6 className=\"text-danger fw-bold mb-3\">\r\n                        <i className=\"bi bi-exclamation-triangle-fill me-2\"></i>\r\n                        Demandes d'annulation en attente\r\n                    </h6>\r\n                    <Row className=\"g-3\">\r\n                        {orders.filter(o => o.status === \"Demande d'annulation\").map(order => (\r\n                            <Col key={order.id} md={6} lg={4}>\r\n                                <Card className=\"border-danger shadow-sm h-100\">\r\n                                    <Card.Body className=\"p-3\">\r\n                                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                                            <div>\r\n                                                <div className=\"fw-bold\">Commande #{order.id}</div>\r\n                                                <small className=\"text-muted\">{order.customerName || order.customer}</small>\r\n                                            </div>\r\n                                            <div className=\"fw-bold text-danger\">{order.total.toLocaleString()} FCFA</div>\r\n                                        </div>\r\n                                        <div className=\"d-flex gap-2\">\r\n                                            <Button\r\n                                                variant=\"success\"\r\n                                                size=\"sm\"\r\n                                                className=\"flex-grow-1\"\r\n                                                onClick={() => handleApproveCancellation(order)}\r\n                                            >\r\n                                                <i className=\"bi bi-check-circle me-1\"></i> Approuver\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outline-secondary\"\r\n                                                size=\"sm\"\r\n                                                className=\"flex-grow-1\"\r\n                                                onClick={() => handleRefuseCancellation(order)}\r\n                                            >\r\n                                                <i className=\"bi bi-x-circle me-1\"></i> Refuser\r\n                                            </Button>\r\n                                        </div>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        ))}\r\n                    </Row>\r\n                </div>\r\n            )}\r\n\r\n            {/* Orders Table */}\r\n            {filteredOrders.length === 0 ? (\r\n                <div className=\"text-center text-muted py-5\">\r\n                    <i className=\"bi bi-inbox\" style={{ fontSize: '3rem' }}></i>\r\n                    <p className=\"mt-3\">Aucune commande trouvÃ©e</p>\r\n                </div>\r\n            ) : (\r\n                <Table hover responsive>\r\n                    <thead className=\"table-light\">\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>Nom</th>\r\n                            <th>ID Client</th>\r\n                            <th>TÃ©lÃ©phone</th>\r\n                            <th>Date</th>\r\n                            <th>Montant</th>\r\n                            <th>Suivi</th>\r\n                            <th>Statut</th>\r\n                            <th>Imprimer</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {filteredOrders.map(order => (\r\n                            <tr key={order.id}>\r\n                                <td className=\"fw-mono\">#{order.id}</td>\r\n                                <td>{order.customerName || order.customer || 'Client'}</td>\r\n                                <td className=\"small\">{order.customerId || order.userId || '-'}</td>\r\n                                <td className=\"small\">{order.phone || '-'}</td>\r\n                                <td className=\"small\">{order.date}</td>\r\n                                <td className=\"fw-bold text-success\">{order.total.toLocaleString()} FCFA</td>\r\n                                <td>\r\n                                    {order.trackingNumber ? (\r\n                                        <span className=\"badge bg-info\">\r\n                                            <i className=\"bi bi-truck me-1\"></i>\r\n                                            {order.trackingNumber}\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span className=\"text-muted small\">-</span>\r\n                                    )}\r\n                                </td>\r\n                                <td>\r\n                                    <Badge bg={\r\n                                        order.status === 'LivrÃ©e' || order.status === 'LivrÃ©' ? 'success' :\r\n                                            order.status === 'En route' ? 'info' :\r\n                                                order.status === 'En cours de prÃ©paration' ? 'warning' :\r\n                                                    order.status === 'En attente' ? 'secondary' :\r\n                                                        order.status === \"Demande d'annulation\" ? 'danger' :\r\n                                                            order.status === 'AnnulÃ©e' ? 'danger' : 'primary'\r\n                                    }>\r\n                                        {order.status}\r\n                                    </Badge>\r\n                                </td>\r\n                                <td>\r\n                                    <div style={{ display: 'none' }}>\r\n                                        <Barcode id={`barcode-svg-${order.id}`} value={order.id} width={1} height={40} fontSize={12} />\r\n                                    </div>\r\n                                    <Button\r\n                                        variant=\"outline-dark\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => handlePrintSlip(order)}\r\n                                        title=\"Imprimer la fiche\"\r\n                                    >\r\n                                        <i className=\"bi bi-printer\"></i>\r\n                                    </Button>\r\n                                </td>\r\n                                <td>\r\n                                    <Button\r\n                                        variant=\"outline-primary\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => handleStatusChange(order)}\r\n                                        className=\"me-1\"\r\n                                    >\r\n                                        <i className=\"bi bi-pencil\"></i>\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outline-secondary\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => {\r\n                                            setDetailsOrder(order);\r\n                                            setShowDetailsModal(true);\r\n                                        }}\r\n                                    >\r\n                                        <i className=\"bi bi-eye\"></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </Table>\r\n            )}\r\n\r\n            {/* Status Change Modal */}\r\n            <Modal show={showModal} onHide={() => setShowModal(false)} size=\"lg\">\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Modifier le statut - Commande #{selectedOrder?.id}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Statut actuel</Form.Label>\r\n                            <Form.Control value={selectedOrder?.status || ''} disabled />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Nouveau statut *</Form.Label>\r\n                            <Form.Select id=\"newStatus\" defaultValue={selectedOrder?.status}>\r\n                                <option value=\"En attente\">En attente</option>\r\n                                <option value=\"En cours de prÃ©paration\">En cours de prÃ©paration</option>\r\n                                <option value=\"En route\">En route</option>\r\n                                <option value=\"LivrÃ©e\">LivrÃ©e</option>\r\n                                <option value=\"AnnulÃ©e\">AnnulÃ©e</option>\r\n                            </Form.Select>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>NumÃ©ro de suivi</Form.Label>\r\n                            <Form.Control\r\n                                placeholder=\"Ex: DHL123456789\"\r\n                                value={trackingNumber}\r\n                                onChange={(e) => setTrackingNumber(e.target.value)}\r\n                            />\r\n                            <Form.Text className=\"text-muted\">\r\n                                Optionnel - Le client pourra suivre sa commande\r\n                            </Form.Text>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\">\r\n                            <Form.Label>Note pour le client</Form.Label>\r\n                            <Form.Control\r\n                                as=\"textarea\"\r\n                                rows={3}\r\n                                placeholder=\"Ex: Votre colis est en cours de prÃ©paration...\"\r\n                                value={statusNote}\r\n                                onChange={(e) => setStatusNote(e.target.value)}\r\n                            />\r\n                            <Form.Text className=\"text-muted\">\r\n                                Cette note sera visible par le client dans l'historique de sa commande\r\n                            </Form.Text>\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={saveStatusChange}>\r\n                        Enregistrer\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n            {/* Order Details Modal */}\r\n            <Modal show={showDetailsModal} onHide={() => setShowDetailsModal(false)} size=\"lg\" centered>\r\n                <Modal.Header closeButton className=\"border-0\">\r\n                    <Modal.Title className=\"fw-bold\">DÃ©tails Commande #{detailsOrder?.id}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"pt-0\">\r\n                    {detailsOrder && (\r\n                        <div className=\"d-flex flex-column gap-4\">\r\n                            {/* Status and Summary Header */}\r\n                            <div className=\"bg-light p-3 rounded-3 d-flex justify-content-between align-items-center\">\r\n                                <div>\r\n                                    <div className=\"text-muted small mb-1\">Date de commande</div>\r\n                                    <div className=\"fw-bold\">{detailsOrder.date}</div>\r\n                                </div>\r\n                                <div className=\"text-end\">\r\n                                    <Badge bg={\r\n                                        detailsOrder.status === 'LivrÃ©e' || detailsOrder.status === 'LivrÃ©' ? 'success' :\r\n                                            detailsOrder.status === 'En route' ? 'info' :\r\n                                                detailsOrder.status === 'En cours de prÃ©paration' ? 'warning' :\r\n                                                    detailsOrder.status === 'En attente' ? 'secondary' : 'danger'\r\n                                    } className=\"px-3 py-2 fs-6\">\r\n                                        {detailsOrder.status}\r\n                                    </Badge>\r\n                                    <div className=\"mt-1 fw-bold text-success fs-5\">\r\n                                        Total: {detailsOrder.total.toLocaleString()} FCFA\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Customer Info */}\r\n                            <div>\r\n                                <h6 className=\"fw-bold border-bottom pb-2 mb-3\">Informations Client</h6>\r\n                                <Row className=\"g-3\">\r\n                                    <Col sm={6}>\r\n                                        <div className=\"text-muted small\">Nom :</div>\r\n                                        <div className=\"fw-medium\">{detailsOrder.customerName || detailsOrder.customer || 'N/A'}</div>\r\n                                    </Col>\r\n                                    <Col sm={6}>\r\n                                        <div className=\"text-muted small\">TÃ©lÃ©phone :</div>\r\n                                        <div className=\"fw-medium\">{detailsOrder.phone || 'N/A'}</div>\r\n                                    </Col>\r\n                                    <Col sm={6}>\r\n                                        <div className=\"text-muted small\">Email :</div>\r\n                                        <div className=\"fw-medium\">{detailsOrder.email || 'N/A'}</div>\r\n                                    </Col>\r\n                                    <Col sm={6}>\r\n                                        <div className=\"text-muted small\">ID Client :</div>\r\n                                        <div className=\"fw-medium\">{(() => {\r\n                                            // Chercher l'utilisateur Ã  partir de l'email\r\n                                            const users = JSON.parse(localStorage.getItem('users') || '[]');\r\n                                            const orderUser = users.find(u => u.email === detailsOrder.email);\r\n                                            return orderUser?.id || detailsOrder.customerId || detailsOrder.userId || 'N/A';\r\n                                        })()}</div>\r\n                                    </Col>\r\n                                    <Col sm={12}>\r\n                                        <div className=\"text-muted small\">Adresse de livraison :</div>\r\n                                        <div className=\"fw-medium bg-light p-2 rounded mt-1\">\r\n                                            {detailsOrder.shippingAddress ? (\r\n                                                <>\r\n                                                    {detailsOrder.shippingAddress.fullName && <>{detailsOrder.shippingAddress.fullName}<br /></>}\r\n                                                    {detailsOrder.shippingAddress.address}<br />\r\n                                                    {detailsOrder.shippingAddress.city}, {detailsOrder.shippingAddress.country} <br />\r\n                                                    {detailsOrder.shippingAddress.postalCode && <>{detailsOrder.shippingAddress.postalCode}<br /></>}\r\n                                                    {detailsOrder.shippingAddress.phone || detailsOrder.phone}\r\n                                                </>\r\n                                            ) : (\r\n                                                <span className=\"text-muted fst-italic\">Adresse non disponible</span>\r\n                                            )}\r\n                                        </div>\r\n                                    </Col>\r\n                                </Row>\r\n                            </div>\r\n\r\n                            {/* Items List */}\r\n                            <div>\r\n                                <h6 className=\"fw-bold border-bottom pb-2 mb-3\">Articles ({detailsOrder.items?.length || 0})</h6>\r\n                                <div className=\"d-flex flex-column gap-3\">\r\n                                    {detailsOrder.items?.map((item, idx) => (\r\n                                        <div key={idx} className=\"d-flex align-items-center border-bottom pb-3 last-border-0\">\r\n                                            <div className=\"bg-light rounded p-1 border me-3\" style={{ width: '60px', height: '60px' }}>\r\n                                                <img src={item.image} alt={item.name} className=\"w-100 h-100 object-fit-contain\" />\r\n                                            </div>\r\n                                            <div className=\"flex-grow-1\">\r\n                                                <div className=\"fw-bold text-truncate\" style={{ maxWidth: '300px' }}>{item.name}</div>\r\n                                                <div className=\"text-muted small\">\r\n                                                    Prix u. : {parseFloat(item.price).toLocaleString()} FCFA\r\n                                                    {item.size && <span className=\"ms-2 badge bg-light text-dark border\">Taille: {item.size}</span>}\r\n                                                    {item.color && (\r\n                                                        <span className=\"ms-1 d-inline-block border rounded-circle\"\r\n                                                            style={{ width: '10px', height: '10px', backgroundColor: item.color }}\r\n                                                            title={item.color}\r\n                                                        ></span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"text-end\">\r\n                                                <div className=\"fw-bold\">x{item.quantity}</div>\r\n                                                <div className=\"fw-bold text-primary\">{(parseFloat(item.price) * item.quantity).toLocaleString()} FCFA</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"border-0\">\r\n                    <Button variant=\"outline-dark\" onClick={() => handlePrintSlip(detailsOrder)}>\r\n                        <i className=\"bi bi-printer me-2\"></i>Imprimer la fiche\r\n                    </Button>\r\n                    <Button variant=\"light\" onClick={() => setShowDetailsModal(false)}>Fermer</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            {/* Barcode Scanner Modal */}\r\n            <BarcodeScanner\r\n                show={showScanner}\r\n                onHide={() => setShowScanner(false)}\r\n                onScan={(code) => setSearchTerm(code)}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const AdminUsers = () => {\r\n    const { users } = useData();\r\n    return (\r\n        <div>\r\n            <h2 className=\"mb-4\">Gestion des Clients</h2>\r\n            <Table hover responsive>\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Nom</th>\r\n                        <th>Email</th>\r\n                        <th>RÃ´le</th>\r\n                        <th>Inscrit le</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map(user => (\r\n                        <tr key={user.id}>\r\n                            <td>{user.id}</td>\r\n                            <td className=\"fw-bold\">{user.name}</td>\r\n                            <td>{user.email}</td>\r\n                            <td>\r\n                                <Badge bg={user.role === 'admin' ? 'danger' : 'info'}>\r\n                                    {user.role}\r\n                                </Badge>\r\n                            </td>\r\n                            <td>{user.joined}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\nexport const AdminSupport = () => {\r\n    const { helpQuestions, updateHelpQuestion, deleteHelpQuestion } = useData();\r\n    const [selectedQ, setSelectedQ] = useState(null);\r\n    const [answerText, setAnswerText] = useState('');\r\n    const [showAnswerModal, setShowAnswerModal] = useState(false);\r\n\r\n    const handleAnswer = (q) => {\r\n        setSelectedQ(q);\r\n        setAnswerText(q.answer || '');\r\n        setShowAnswerModal(true);\r\n    };\r\n\r\n    const saveAnswer = () => {\r\n        if (!selectedQ) return;\r\n        updateHelpQuestion(selectedQ.id, {\r\n            answer: answerText,\r\n            status: 'approved' // Auto-approve when answered\r\n        });\r\n        setShowAnswerModal(false);\r\n    };\r\n\r\n    const toggleStatus = (q) => {\r\n        const newStatus = q.status === 'approved' ? 'pending' : 'approved';\r\n        updateHelpQuestion(q.id, { status: newStatus });\r\n    };\r\n\r\n    const pendingCount = helpQuestions.filter(q => q.status === 'pending').length;\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <h2 className=\"mb-0 fw-bold\">Support & CommunautÃ©</h2>\r\n                {pendingCount > 0 && (\r\n                    <Badge bg=\"danger\" pill className=\"px-3 py-2\">\r\n                        {pendingCount} Question{pendingCount > 1 ? 's' : ''} en attente\r\n                    </Badge>\r\n                )}\r\n            </div>\r\n\r\n            <Table hover responsive className=\"align-middle\">\r\n                <thead className=\"table-light\">\r\n                    <tr>\r\n                        <th>Date</th>\r\n                        <th>Utilisateur</th>\r\n                        <th>Question</th>\r\n                        <th>Statut</th>\r\n                        <th>RÃ©ponse</th>\r\n                        <th className=\"text-end\">Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {helpQuestions.length === 0 ? (\r\n                        <tr>\r\n                            <td colSpan=\"6\" className=\"text-center py-5 text-muted\">Aucune question pour le moment.</td>\r\n                        </tr>\r\n                    ) : (\r\n                        helpQuestions.map(q => (\r\n                            <tr key={q.id}>\r\n                                <td className=\"small text-muted\">{q.date}</td>\r\n                                <td className=\"fw-bold\">{q.userName}</td>\r\n                                <td style={{ maxWidth: '300px' }}>\r\n                                    <div className=\"text-truncate\" title={q.question}>{q.question}</div>\r\n                                </td>\r\n                                <td>\r\n                                    <Badge\r\n                                        bg={q.status === 'approved' ? 'success' : 'warning'}\r\n                                        className=\"cursor-pointer\"\r\n                                        onClick={() => toggleStatus(q)}\r\n                                        style={{ cursor: 'pointer' }}\r\n                                    >\r\n                                        {q.status === 'approved' ? 'ApprouvÃ©e' : 'En attente'}\r\n                                    </Badge>\r\n                                </td>\r\n                                <td style={{ maxWidth: '250px' }}>\r\n                                    {q.answer ? (\r\n                                        <div className=\"text-truncate small text-muted\" title={q.answer}>{q.answer}</div>\r\n                                    ) : (\r\n                                        <span className=\"fst-italic text-danger small\">Pas encore de rÃ©ponse</span>\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"text-end\">\r\n                                    <Button\r\n                                        variant=\"outline-primary\"\r\n                                        size=\"sm\"\r\n                                        className=\"me-2\"\r\n                                        onClick={() => handleAnswer(q)}\r\n                                    >\r\n                                        <i className=\"bi bi-chat-left-dots me-1\"></i> RÃ©pondre\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outline-danger\"\r\n                                        size=\"sm\"\r\n                                        onClick={() => { if (window.confirm('Supprimer cette question ?')) deleteHelpQuestion(q.id) }}\r\n                                    >\r\n                                        <i className=\"bi bi-trash\"></i>\r\n                                    </Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))\r\n                    )}\r\n                </tbody>\r\n            </Table>\r\n\r\n            {/* Answer Modal */}\r\n            <Modal show={showAnswerModal} onHide={() => setShowAnswerModal(false)} centered>\r\n                <Modal.Header closeButton className=\"border-0\">\r\n                    <Modal.Title className=\"fw-bold\">RÃ©pondre Ã  la question</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"pt-0\">\r\n                    <div className=\"mb-4\">\r\n                        <label className=\"text-muted small mb-1\">Question de {selectedQ?.userName} :</label>\r\n                        <div className=\"p-3 bg-light rounded-3 fw-medium\">{selectedQ?.question}</div>\r\n                    </div>\r\n                    <Form.Group>\r\n                        <label className=\"fw-bold mb-2\">Votre RÃ©ponse</label>\r\n                        <Form.Control\r\n                            as=\"textarea\"\r\n                            rows={5}\r\n                            placeholder=\"Ã‰crivez votre rÃ©ponse ici...\"\r\n                            value={answerText}\r\n                            onChange={(e) => setAnswerText(e.target.value)}\r\n                            className=\"rounded-3\"\r\n                        />\r\n                        <Form.Text className=\"text-muted\">\r\n                            En enregistrant, la question sera automatiquement approuvÃ©e et visible par tous.\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"border-0\">\r\n                    <Button variant=\"light\" onClick={() => setShowAnswerModal(false)}>Fermer</Button>\r\n                    <Button variant=\"primary\" onClick={saveAnswer} disabled={!answerText.trim()}>\r\n                        Enregistrer et Approuver\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\USER\\OneDrive\\Bureau\\TRY MY DAY\\src\\pages\\admin\\AdminWalletManagement.jsx","messages":[{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useWallet\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":17,"column":78,"nodeType":"Identifier","endLine":17,"endColumn":87},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":20,"column":31,"nodeType":"Identifier","endLine":20,"endColumn":39},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":21,"column":45,"nodeType":"Identifier","endLine":21,"endColumn":53},{"ruleId":"no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":22,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":19},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":22,"column":35,"nodeType":"Identifier","endLine":22,"endColumn":43},{"ruleId":"no-unused-vars","severity":1,"message":"'setSearchTerm' is assigned a value but never used.","line":23,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":37},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":23,"column":41,"nodeType":"Identifier","endLine":23,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":24,"column":45,"nodeType":"Identifier","endLine":24,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":25,"column":41,"nodeType":"Identifier","endLine":25,"endColumn":49},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":26,"column":55,"nodeType":"Identifier","endLine":26,"endColumn":63},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":27,"column":45,"nodeType":"Identifier","endLine":27,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":28,"column":49,"nodeType":"Identifier","endLine":28,"endColumn":57},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":29,"column":59,"nodeType":"Identifier","endLine":29,"endColumn":67},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":30,"column":35,"nodeType":"Identifier","endLine":30,"endColumn":43},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":31,"column":45,"nodeType":"Identifier","endLine":31,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":32,"column":45,"nodeType":"Identifier","endLine":32,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":33,"column":39,"nodeType":"Identifier","endLine":33,"endColumn":47},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":34,"column":59,"nodeType":"Identifier","endLine":34,"endColumn":67},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":35,"column":45,"nodeType":"Identifier","endLine":35,"endColumn":53},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":202,"column":5,"nodeType":"Identifier","endLine":202,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'filteredUsers' is assigned a value but never used.","line":226,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":226,"endColumn":24},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useEffect\" is called conditionally. React Hooks must be called in the exact same order in every component render. Did you accidentally call a React Hook after an early return?","line":299,"column":5,"nodeType":"Identifier","endLine":299,"endColumn":14},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":373,"column":59,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[17686,17703],"text":"Tout l&apos;historique"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[17686,17703],"text":"Tout l&lsquo;historique"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[17686,17703],"text":"Tout l&#39;historique"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[17686,17703],"text":"Tout l&rsquo;historique"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":491,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[27049,27136],"text":"\r\n                                                    Aucune transaction trouvÃ©e pour &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[27049,27136],"text":"\r\n                                                    Aucune transaction trouvÃ©e pour &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[27049,27136],"text":"\r\n                                                    Aucune transaction trouvÃ©e pour &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[27049,27136],"text":"\r\n                                                    Aucune transaction trouvÃ©e pour &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":491,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[27150,27201],"text":"&quot;\r\n                                                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[27150,27201],"text":"&ldquo;\r\n                                                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[27150,27201],"text":"&#34;\r\n                                                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[27150,27201],"text":"&rdquo;\r\n                                                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Row, Col, Card, Form, Button, Table, Badge, Alert, Modal } from 'react-bootstrap';\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useWallet } from '../../context/WalletContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport API_BASE_URL from '../../config';\r\n\r\nconst AdminWalletManagement = () => {\r\n    const { user: authUser } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    if (authUser?.role === 'expediteur') {\r\n        navigate('/admin');\r\n        return null;\r\n    }\r\n\r\n    const { balance: managerBalance, fetchBalance: refreshManagerBalance } = useWallet();\r\n    const isManager = authUser?.role === 'manager';\r\n\r\n    const [users, setUsers] = useState([]);\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [txSearchTerm, setTxSearchTerm] = useState('');\r\n    const [timeFilter, setTimeFilter] = useState('month'); // month, 3months, 6months, year, all\r\n    const [showVirementModal, setShowVirementModal] = useState(false);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [virementAmount, setVirementAmount] = useState('');\r\n    const [virementDescription, setVirementDescription] = useState('');\r\n    const [message, setMessage] = useState(null);\r\n    const [isIdVirement, setIsIdVirement] = useState(false);\r\n    const [directUserId, setDirectUserId] = useState('');\r\n    const [foundUser, setFoundUser] = useState(null);\r\n    const [selectedTransaction, setSelectedTransaction] = useState(null); // New state for details modal\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n    // Fetch data from localStorage\r\n    const fetchData = () => {\r\n        setLoading(true);\r\n        try {\r\n            // Load users\r\n            const localUsers = JSON.parse(localStorage.getItem('users')) || [];\r\n            const safeUsers = Array.isArray(localUsers) ? localUsers.filter(u => u && typeof u === 'object') : [];\r\n            setUsers(safeUsers);\r\n\r\n            // Load transactions\r\n            const localTransactions = JSON.parse(localStorage.getItem('wallet_transactions')) || [];\r\n            const safeTransactions = Array.isArray(localTransactions) ? localTransactions.filter(t => t && typeof t === 'object') : [];\r\n            // Sort by date descending\r\n            const sortedTransactions = safeTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n            setTransactions(sortedTransactions);\r\n        } catch (error) {\r\n            console.error('Error fetching localStorage data:', error);\r\n            setMessage({ type: 'danger', text: 'Erreur lors du chargement des donnÃ©es locales' });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Virement user wallet\r\n    const handleVirementWallet = async () => {\r\n        const targetUser = isIdVirement ? foundUser : selectedUser;\r\n        if (!targetUser || !virementAmount || parseFloat(virementAmount) <= 0) {\r\n            setMessage({ type: 'danger', text: 'Veuillez remplir tous les champs correctement' });\r\n            return;\r\n        }\r\n\r\n        if (!window.confirm(`ÃŠtes-vous sÃ»r de vouloir effectuer un virement de ${parseFloat(virementAmount).toLocaleString()} FCFA Ã  ${targetUser.name} (${targetUser.id}) ?`)) {\r\n            return;\r\n        }\r\n\r\n        setIsProcessing(true);\r\n        try {\r\n            const amount = parseFloat(virementAmount);\r\n            const targetEmail = isIdVirement ? (foundUser?.email) : selectedUser?.email;\r\n\r\n            if (isManager && targetEmail === authUser.email) {\r\n                setMessage({ type: 'danger', text: 'Vous ne pouvez pas vous envoyer des fonds Ã  vous-mÃªme' });\r\n                setIsProcessing(false);\r\n                return;\r\n            }\r\n\r\n            // 1. Appel API Backend\r\n            let response;\r\n            if (isManager) {\r\n                response = await fetch(`${API_BASE_URL}/api/wallet/transfer`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        fromEmail: authUser.email,\r\n                        toEmail: targetEmail,\r\n                        amount: amount,\r\n                        description: virementDescription || 'Virement Manager'\r\n                    }),\r\n                });\r\n            } else {\r\n                response = await fetch(`${API_BASE_URL}/api/admin/wallet/credit`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({\r\n                        email: targetEmail,\r\n                        userId: isIdVirement ? directUserId : selectedUser?.id,\r\n                        amount: amount,\r\n                        description: virementDescription || 'Virement TRYMYDAY'\r\n                    }),\r\n                });\r\n            }\r\n\r\n            const result = await response.json();\r\n\r\n            if (!result.success) {\r\n                throw new Error(result.message);\r\n            }\r\n\r\n            // Sync with current data logic\r\n            const localUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n            const userToCredit = isIdVirement ? foundUser : selectedUser;\r\n            const userIndex = localUsers.findIndex(u => u.id === userToCredit.id);\r\n\r\n            if (userIndex !== -1) {\r\n                const oldBalance = localUsers[userIndex].balance || 0;\r\n                localUsers[userIndex].balance = oldBalance + amount;\r\n                if (isManager) {\r\n                    const managerIdx = localUsers.findIndex(u => u.email === authUser.email);\r\n                    if (managerIdx !== -1) localUsers[managerIdx].balance -= amount;\r\n                }\r\n                localStorage.setItem('users', JSON.stringify(localUsers));\r\n\r\n                const localTransactions = JSON.parse(localStorage.getItem('wallet_transactions') || '[]');\r\n                localTransactions.push({\r\n                    id: Date.now(),\r\n                    userId: localUsers[userIndex].id,\r\n                    userEmail: localUsers[userIndex].email,\r\n                    amount: amount,\r\n                    type: 'credit',\r\n                    description: virementDescription || (isManager ? 'Virement Manager' : 'Virement TRYMYDAY'),\r\n                    date: new Date().toISOString(),\r\n                    balanceAfter: localUsers[userIndex].balance\r\n                });\r\n                localStorage.setItem('wallet_transactions', JSON.stringify(localTransactions));\r\n            }\r\n\r\n            if (isManager) refreshManagerBalance();\r\n\r\n            setMessage({ type: 'success', text: `Virement de ${amount.toLocaleString()} FCFA effectuÃ© avec succÃ¨s !` });\r\n            handleCloseModal();\r\n            fetchData();\r\n        } catch (error) {\r\n            setMessage({ type: 'danger', text: 'Erreur lors de la mise Ã  jour du solde : ' + error.message });\r\n            handleCloseModal();\r\n            console.error(error);\r\n        } finally {\r\n            setIsProcessing(false);\r\n        }\r\n    };\r\n\r\n    // Undo a transaction\r\n    const handleUndoTransaction = (transactionId) => {\r\n        if (!window.confirm(\"ÃŠtes-vous sÃ»r de vouloir annuler cette transaction ? Le montant sera dÃ©duit du solde de l'utilisateur.\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const localTransactions = JSON.parse(localStorage.getItem('wallet_transactions') || '[]');\r\n            const txIndex = localTransactions.findIndex(tx => tx.id === transactionId);\r\n\r\n            if (txIndex === -1) {\r\n                setMessage({ type: 'danger', text: 'Transaction introuvable' });\r\n                return;\r\n            }\r\n\r\n            const tx = localTransactions[txIndex];\r\n\r\n            // Revert balance for the user\r\n            const localUsers = JSON.parse(localStorage.getItem('users') || '[]');\r\n            const userIndex = localUsers.findIndex(u => u.id === tx.userId);\r\n\r\n            if (userIndex !== -1) {\r\n                localUsers[userIndex].balance = (localUsers[userIndex].balance || 0) - tx.amount;\r\n                localStorage.setItem('users', JSON.stringify(localUsers));\r\n            }\r\n\r\n            // Mark as cancelled instead of deleting\r\n            localTransactions[txIndex] = {\r\n                ...tx,\r\n                status: 'cancelled',\r\n                description: tx.description + ' (AnnulÃ©e par l\\'admin)',\r\n                cancelledAt: new Date().toISOString()\r\n            };\r\n            localStorage.setItem('wallet_transactions', JSON.stringify(localTransactions));\r\n\r\n            setMessage({ type: 'success', text: 'Transaction marquÃ©e comme annulÃ©e' });\r\n            fetchData();\r\n        } catch (error) {\r\n            setMessage({ type: 'danger', text: 'Erreur lors de l\\'annulation' });\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    // Filter users based on search\r\n    // Handle direct ID search (Modified to search by Phone or ID)\r\n    useEffect(() => {\r\n        if (isIdVirement && directUserId) {\r\n            const user = users.find(u =>\r\n                (u.phone && String(u.phone).includes(directUserId)) ||\r\n                (u.id && String(u.id).toLowerCase() === directUserId.toLowerCase())\r\n            );\r\n            setFoundUser(user || null);\r\n        } else {\r\n            setFoundUser(null);\r\n        }\r\n    }, [directUserId, isIdVirement, users]);\r\n\r\n    // Handle modal close\r\n    const handleCloseModal = () => {\r\n        setShowVirementModal(false);\r\n        setIsIdVirement(false);\r\n        setDirectUserId('');\r\n        setFoundUser(null);\r\n        setVirementAmount('');\r\n        setVirementDescription('');\r\n        setSelectedUser(null);\r\n        setIsProcessing(false);\r\n    };\r\n\r\n    const filteredUsers = users.filter(user => {\r\n        const matchesSearch = (user.id && String(user.id).toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n            (user.name && String(user.name).toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n            (user.phone && String(user.phone).includes(searchTerm)); // Include phone in global search\r\n\r\n        if (isManager && user.email === authUser.email) return false;\r\n        return matchesSearch;\r\n    });\r\n\r\n\r\n\r\n    // Filter transactions based on search and manager restrictions\r\n    const filteredTransactions = transactions.filter(tx => {\r\n        const matchesSearch =\r\n            (tx.userEmail && String(tx.userEmail).toLowerCase().includes(txSearchTerm.toLowerCase())) ||\r\n            (tx.userId && String(tx.userId).toLowerCase().includes(txSearchTerm.toLowerCase())) || // Added userId search\r\n            (tx.description && String(tx.description).toLowerCase().includes(txSearchTerm.toLowerCase())) ||\r\n            (tx.amount !== undefined && tx.amount !== null && String(tx.amount).includes(txSearchTerm)) ||\r\n            (tx.type && String(tx.type).toLowerCase().includes(txSearchTerm.toLowerCase()));\r\n\r\n        // Restriction pour les managers : 30 derniers jours (dÃ©jÃ  appliquÃ© par timeFilter ci-dessous si dÃ©faut, mais on garde la logique mÃ©tier si nÃ©cessaire)\r\n        // Ici on applique le filtre de temps sÃ©lectionnÃ© par l'admin\r\n        let matchesDate = true;\r\n        if (timeFilter !== 'all') {\r\n            const dateLimit = new Date();\r\n            if (timeFilter === 'month') dateLimit.setMonth(dateLimit.getMonth() - 1);\r\n            if (timeFilter === '3months') dateLimit.setMonth(dateLimit.getMonth() - 3);\r\n            if (timeFilter === '6months') dateLimit.setMonth(dateLimit.getMonth() - 6);\r\n            if (timeFilter === 'year') dateLimit.setFullYear(dateLimit.getFullYear() - 1);\r\n\r\n            matchesDate = new Date(tx.date || Date.now()) >= dateLimit;\r\n        }\r\n\r\n        return matchesSearch && matchesDate;\r\n    });\r\n\r\n    // Export transactions to CSV\r\n    const exportTransactionsCSV = () => {\r\n        if (transactions.length === 0) {\r\n            setMessage({ type: 'warning', text: 'Aucune transaction Ã  exporter' });\r\n            return;\r\n        }\r\n\r\n        const headers = ['Date', 'Type', 'ID', 'Nom', 'TÃ©lÃ©phone', 'Montant', 'Description', 'Solde AprÃ¨s'];\r\n        const rows = filteredTransactions.map(tx => {\r\n            const user = users.find(u => u.id === tx.userId || u.email === tx.userEmail);\r\n            return [\r\n                new Date(tx.date || Date.now()).toLocaleDateString('fr-FR'),\r\n                tx.type === 'credit' ? 'Virement' : 'DÃ©bit',\r\n                user?.id || tx.userId || '-',\r\n                user?.name || '-',\r\n                user?.phone || '-',\r\n                `${(tx.amount || 0).toLocaleString()} FCFA`,\r\n                tx.description || '',\r\n                `${(tx.balanceAfter || 0).toLocaleString()} FCFA`\r\n            ];\r\n        });\r\n\r\n        const csvContent = \"\\uFEFF\" + [\r\n            headers.join(';'),\r\n            ...rows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(';'))\r\n        ].join('\\n');\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.setAttribute('download', `transactions_trymyday_${new Date().toISOString().split('T')[0]}.csv`);\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    return (\r\n        <Container fluid className=\"pb-4 pt-0\">\r\n            <div className=\"d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4 gap-3\">\r\n                <div>\r\n                    <h3 className=\"fw-bold mb-0\">\r\n                        <i className=\"bi bi-wallet2 me-2 text-warning\"></i>\r\n                        Gestion des Portefeuilles\r\n                    </h3>\r\n                    {isManager && (\r\n                        <p className=\"text-muted small mb-0 mt-1 d-none d-md-block\">\r\n                            GÃ©rez les soldes clients en utilisant votre solde de manager.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"d-flex align-items-center gap-3\">\r\n                    {isManager && (\r\n                        <div className=\"d-flex align-items-center bg-white border border-info-subtle shadow-sm px-3 py-2 rounded-3\">\r\n                            <div className=\"me-3\">\r\n                                <div className=\"text-muted\" style={{ fontSize: '0.6rem', fontWeight: '800', textTransform: 'uppercase', letterSpacing: '0.5px' }}>SOLDE MANAGER</div>\r\n                                <div className=\"fw-bold text-dark fs-5\">{managerBalance.toLocaleString()} FCFA</div>\r\n                            </div>\r\n                            <div className=\"bg-info-subtle p-2 rounded-circle text-info\">\r\n                                <i className=\"bi bi-wallet2\"></i>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <Badge bg=\"dark\" className=\"px-3 py-2 fs-6 shadow-sm\" style={{ borderRadius: '8px' }}>\r\n                        {users.length} Clients\r\n                    </Badge>\r\n                </div>\r\n            </div>\r\n\r\n            {message && (\r\n                <Alert variant={message.type} className=\"border-0 shadow-sm animate__animated animate__fadeIn mb-4\" dismissible onClose={() => setMessage(null)}>\r\n                    <i className={`bi bi-${message.type === 'success' ? 'check-circle' : 'exclamation-triangle'} me-2`}></i>\r\n                    {message.text}\r\n                </Alert>\r\n            )}\r\n\r\n            <Row className=\"mb-4\">\r\n                <Col xs={12}>\r\n                    <div className=\"d-flex justify-content-between align-items-center bg-white p-3 rounded-3 shadow-sm border\">\r\n                        <div className=\"d-flex align-items-center gap-3\">\r\n                            <h5 className=\"mb-0 fw-bold text-muted\">Actions Rapides</h5>\r\n                            <Button\r\n                                variant=\"warning\"\r\n                                className=\"text-white fw-bold px-4\"\r\n                                style={{ borderRadius: '8px' }}\r\n                                onClick={() => {\r\n                                    setIsIdVirement(true);\r\n                                    setShowVirementModal(true);\r\n                                }}\r\n                            >\r\n                                <i className=\"bi bi-person-badge me-2\"></i>\r\n                                Virement par ID\r\n                            </Button>\r\n                        </div>\r\n                        <div className=\"d-flex gap-2\">\r\n                            <Form.Select\r\n                                value={timeFilter}\r\n                                onChange={(e) => setTimeFilter(e.target.value)}\r\n                                style={{ borderRadius: '8px', cursor: 'pointer', border: '1px solid #dee2e6', width: 'auto' }}\r\n                                className=\"bg-white text-muted fw-bold shadow-sm\"\r\n                            >\r\n                                <option value=\"month\">Ce mois</option>\r\n                                <option value=\"3months\">3 mois</option>\r\n                                <option value=\"6months\">6 mois</option>\r\n                                <option value=\"year\">Cette annÃ©e</option>\r\n                                <option value=\"all\">Tout l'historique</option>\r\n                            </Form.Select>\r\n                            <div className=\"position-relative\" style={{ minWidth: '300px' }}>\r\n                                <i className=\"bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 text-muted\"></i>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    placeholder=\"Rechercher transaction (ID, Nom, Montant)...\"\r\n                                    className=\"ps-5 border bg-light\"\r\n                                    style={{ borderRadius: '8px' }}\r\n                                    value={txSearchTerm}\r\n                                    onChange={(e) => setTxSearchTerm(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline-success\"\r\n                                onClick={exportTransactionsCSV}\r\n                                style={{ borderRadius: '8px' }}\r\n                            >\r\n                                <i className=\"bi bi-file-earmark-spreadsheet me-2\"></i>\r\n                                CSV\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row className=\"g-4\">\r\n                {/* Full Width Transactions History */}\r\n                <Col xs={12}>\r\n                    <Card className=\"border-0 shadow-sm overflow-hidden\" style={{ borderRadius: '15px' }}>\r\n                        <Card.Header className=\"bg-white p-3 border-bottom-0\">\r\n                            <h5 className=\"mb-0 fw-bold\">Historique des Transactions</h5>\r\n                        </Card.Header>\r\n                        <Card.Body className=\"p-0\">\r\n                            <div className=\"table-responsive\">\r\n                                <Table hover className=\"align-middle mb-0\">\r\n                                    <thead className=\"bg-light text-muted small text-uppercase\">\r\n                                        <tr>\r\n                                            <th className=\"ps-4\">Date</th>\r\n                                            <th>Utilisateur</th>\r\n                                            <th>Type</th>\r\n                                            <th>Description</th>\r\n                                            <th>Montant</th>\r\n                                            <th>Solde AprÃ¨s</th>\r\n                                            <th className=\"text-end pe-4\">Actions</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {filteredTransactions.length > 0 ? (\r\n                                            filteredTransactions.map((tx) => {\r\n                                                const u = users.find(usr => usr.email === tx.userEmail || usr.id === tx.userId);\r\n                                                return (\r\n                                                    <tr key={tx.id}>\r\n                                                        <td className=\"ps-4 text-nowrap text-muted small\">\r\n                                                            {new Date(tx.date).toLocaleDateString('fr-FR', {\r\n                                                                day: '2-digit', month: 'short', year: 'numeric',\r\n                                                                hour: '2-digit', minute: '2-digit'\r\n                                                            })}\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <div className=\"d-flex align-items-center\">\r\n                                                                <div className=\"bg-light rounded-circle d-flex align-items-center justify-content-center me-2 text-muted border\" style={{ width: '32px', height: '32px' }}>\r\n                                                                    {u?.avatar || 'ðŸ‘¤'}\r\n                                                                </div>\r\n                                                                <div>\r\n                                                                    <div className=\"fw-bold text-dark small\">{u?.name || 'Inconnu'}</div>\r\n                                                                    <div className=\"text-muted\" style={{ fontSize: '0.7rem' }}>ID: {u?.id || tx.userId}</div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td>\r\n                                                            <Badge bg={tx.status === 'cancelled' ? 'secondary' : (tx.type === 'credit' ? 'success' : 'danger')} className=\"px-2\" style={{ borderRadius: '5px' }}>\r\n                                                                {tx.status === 'cancelled' ? 'ANNULÃ‰E' : (\r\n                                                                    tx.description?.toLowerCase().includes('remboursement') ? 'REMBOURSEMENT' :\r\n                                                                        tx.type === 'credit' ? 'VIREMENT' : 'ACHAT'\r\n                                                                )}\r\n                                                            </Badge>\r\n                                                        </td>\r\n                                                        <td className=\"small text-muted text-truncate\" style={{ maxWidth: '200px' }}>\r\n                                                            {tx.description}\r\n                                                        </td>\r\n                                                        <td className={`fw-bold ${tx.status === 'cancelled' ? 'text-decoration-line-through text-muted' : (tx.type === 'credit' ? 'text-success' : 'text-danger')}`}>\r\n                                                            {tx.type === 'credit' ? '+' : '-'}{(tx.amount || 0).toLocaleString()} FCFA\r\n                                                        </td>\r\n                                                        <td className=\"fw-bold text-dark\">\r\n                                                            {(tx.balanceAfter || 0).toLocaleString()} FCFA\r\n                                                        </td>\r\n                                                        <td className=\"text-end pe-4\">\r\n                                                            <div className=\"d-flex align-items-center justify-content-end gap-2\">\r\n                                                                <Button\r\n                                                                    variant=\"light\"\r\n                                                                    size=\"sm\"\r\n                                                                    className=\"btn-sm-square border\"\r\n                                                                    title=\"Voir l'historique de ce client\"\r\n                                                                    onClick={() => setTxSearchTerm(u?.id || tx.userId)}\r\n                                                                >\r\n                                                                    <i className=\"bi bi-clock-history text-primary\"></i>\r\n                                                                </Button>\r\n                                                                {tx.type === 'credit' && tx.status !== 'cancelled' && (\r\n                                                                    <Button\r\n                                                                        variant=\"light\"\r\n                                                                        size=\"sm\"\r\n                                                                        className=\"btn-sm-square border\"\r\n                                                                        onClick={() => handleUndoTransaction(tx.id)}\r\n                                                                        title=\"Annuler cette transaction\"\r\n                                                                    >\r\n                                                                        <i className=\"bi bi-x-lg text-danger\"></i>\r\n                                                                    </Button>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                );\r\n                                            })\r\n                                        ) : (\r\n                                            <tr>\r\n                                                <td colSpan=\"6\" className=\"text-center p-5 text-muted\">\r\n                                                    <i className=\"bi bi-search fs-1 d-block mb-3 opacity-25\"></i>\r\n                                                    Aucune transaction trouvÃ©e pour \"{txSearchTerm}\"\r\n                                                </td>\r\n                                            </tr>\r\n                                        )}\r\n                                    </tbody>\r\n                                </Table>\r\n                            </div>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Virement Modal */}\r\n            <Modal show={showVirementModal} onHide={handleCloseModal} centered>\r\n                <Modal.Header closeButton className=\"border-0 pb-0\">\r\n                    <Modal.Title className=\"fw-bold\">Faire un Virement</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className=\"pt-3\">\r\n                    {(selectedUser || isIdVirement) && (\r\n                        <>\r\n                            {isIdVirement && !foundUser && (\r\n                                <Form.Group className=\"mb-4\">\r\n                                    <Form.Label className=\"small fw-bold text-muted\">ID DU CLIENT</Form.Label>\r\n                                    <div className=\"position-relative\">\r\n                                        <i className=\"bi bi-person-badge position-absolute top-50 start-0 translate-middle-y ms-3 text-muted\"></i>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Ex: 84930215\"\r\n                                            className=\"ps-5 py-2 border-0 bg-light fw-bold\"\r\n                                            style={{ borderRadius: '10px' }}\r\n                                            value={directUserId}\r\n                                            onChange={(e) => setDirectUserId(e.target.value)}\r\n                                            autoFocus\r\n                                        />\r\n                                    </div>\r\n                                    {directUserId && !foundUser && (\r\n                                        <small className=\"text-danger mt-1 d-block animate__animated animate__shakeX\">\r\n                                            Aucun client trouvÃ© avec cet ID\r\n                                        </small>\r\n                                    )}\r\n                                </Form.Group>\r\n                            )}\r\n\r\n                            {(selectedUser || foundUser) && (\r\n                                <div className=\"bg-light p-3 rounded-4 mb-4 d-flex align-items-center\">\r\n                                    <div className=\"bg-warning text-white rounded-circle d-flex align-items-center justify-content-center me-3\" style={{ width: '45px', height: '45px', fontSize: '1.5rem' }}>\r\n                                        {(isIdVirement ? foundUser.avatar : selectedUser.avatar) || 'ðŸ‘¤'}\r\n                                    </div>\r\n                                    <div className=\"flex-grow-1\">\r\n                                        <div className=\"d-flex justify-content-between align-items-center\">\r\n                                            <h6 className=\"fw-bold mb-0\">{(isIdVirement ? foundUser.name : selectedUser.name)}</h6>\r\n                                            <Badge bg=\"warning\" text=\"dark\" className=\"small\">ID: {(isIdVirement ? foundUser.id : selectedUser.id)}</Badge>\r\n                                        </div>\r\n                                        <div className=\"mt-1\">\r\n                                            <small className=\"fw-bold text-dark\">Solde actuel: {((isIdVirement ? foundUser.balance : selectedUser.balance) || 0).toLocaleString()} FCFA</small>\r\n                                        </div>\r\n                                    </div>\r\n                                    {isIdVirement && (\r\n                                        <Button variant=\"link\" className=\"text-muted p-0 ms-2\" onClick={() => setDirectUserId('')}>\r\n                                            <i className=\"bi bi-pencil-square\"></i>\r\n                                        </Button>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {(selectedUser || foundUser) && (\r\n                                <Form>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label className=\"small fw-bold text-muted\">MONTANT DU VIREMENT (FCFA)</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"number\"\r\n                                            placeholder=\"0.00\"\r\n                                            className=\"py-2 border-0 bg-light fw-bold\"\r\n                                            style={{ borderRadius: '10px', fontSize: '1.2rem' }}\r\n                                            value={virementAmount}\r\n                                            onChange={(e) => setVirementAmount(e.target.value)}\r\n                                            min=\"0\"\r\n                                            step=\"0.01\"\r\n                                            autoFocus={!isIdVirement}\r\n                                        />\r\n                                    </Form.Group>\r\n\r\n                                    <Form.Group className=\"mb-0\">\r\n                                        <Form.Label className=\"small fw-bold text-muted\">DESCRIPTION</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Ex: RÃ©compense fidÃ©litÃ©\"\r\n                                            className=\"py-2 border-0 bg-light\"\r\n                                            style={{ borderRadius: '10px' }}\r\n                                            value={virementDescription}\r\n                                            onChange={(e) => setVirementDescription(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                </Form>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"border-0 pt-0\">\r\n                    <Button variant=\"light\" className=\"fw-bold\" onClick={handleCloseModal} style={{ borderRadius: '10px' }} disabled={isProcessing}>\r\n                        Annuler\r\n                    </Button>\r\n                    {(selectedUser || foundUser) && (\r\n                        <Button\r\n                            variant=\"warning\"\r\n                            className=\"text-white fw-bold px-4\"\r\n                            onClick={handleVirementWallet}\r\n                            style={{ borderRadius: '10px' }}\r\n                            disabled={isProcessing}\r\n                        >\r\n                            {isProcessing ? (\r\n                                <>\r\n                                    <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                    Traitement...\r\n                                </>\r\n                            ) : 'Confirmer le virement'}\r\n                        </Button>\r\n                    )}\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n            {/* Transaction Details Modal */}\r\n            <Modal show={!!selectedTransaction} onHide={() => setSelectedTransaction(null)} centered>\r\n                <Modal.Header closeButton className=\"border-0\">\r\n                    <Modal.Title className=\"fw-bold\">DÃ©tails de la Transaction</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {selectedTransaction && (() => {\r\n                        const u = users.find(usr => usr.email === selectedTransaction.userEmail || usr.id === selectedTransaction.userId);\r\n                        return (\r\n                            <div className=\"d-flex flex-column gap-3\">\r\n                                <div className=\"text-center mb-3\">\r\n                                    <div className={`display-4 fw-bold ${selectedTransaction.type === 'credit' ? 'text-success' : 'text-danger'}`}>\r\n                                        {selectedTransaction.type === 'credit' ? '+' : '-'}{(selectedTransaction.amount || 0).toLocaleString()} FCFA\r\n                                    </div>\r\n                                    <Badge bg={selectedTransaction.status === 'cancelled' ? 'secondary' : (selectedTransaction.type === 'credit' ? 'success' : 'danger')} className=\"px-3 py-2 fs-6 rounded-pill mt-2\">\r\n                                        {selectedTransaction.status === 'cancelled' ? 'ANNULÃ‰E' : (\r\n                                            selectedTransaction.description?.toLowerCase().includes('remboursement') ? 'REMBOURSEMENT' :\r\n                                                selectedTransaction.type === 'credit' ? 'VIREMENT' : 'ACHAT'\r\n                                        )}\r\n                                    </Badge>\r\n                                </div>\r\n\r\n                                <div className=\"bg-light p-3 rounded-3\">\r\n                                    <h6 className=\"fw-bold text-muted small text-uppercase mb-3\">Informations Client</h6>\r\n                                    <div className=\"d-flex align-items-center\">\r\n                                        <div className=\"bg-white rounded-circle d-flex align-items-center justify-content-center me-3 border shadow-sm\" style={{ width: '48px', height: '48px', fontSize: '1.5rem' }}>\r\n                                            {u?.avatar || 'ðŸ‘¤'}\r\n                                        </div>\r\n                                        <div>\r\n                                            <div className=\"fw-bold fs-5\">{u?.name || 'Inconnu'}</div>\r\n                                            <div className=\"text-muted small\">ID: {u?.id || selectedTransaction.userId}</div>\r\n                                            <div className=\"text-muted small\">{u?.email || selectedTransaction.userEmail}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"border rounded-3 p-3\">\r\n                                    <h6 className=\"fw-bold text-muted small text-uppercase mb-3\">DÃ©tails</h6>\r\n                                    <div className=\"d-flex justify-content-between mb-2\">\r\n                                        <span className=\"text-muted\">Date</span>\r\n                                        <span className=\"fw-medium\">\r\n                                            {new Date(selectedTransaction.date).toLocaleDateString('fr-FR', {\r\n                                                weekday: 'long', day: 'numeric', month: 'long', year: 'numeric',\r\n                                                hour: '2-digit', minute: '2-digit'\r\n                                            })}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"d-flex justify-content-between mb-2\">\r\n                                        <span className=\"text-muted\">Description</span>\r\n                                        <span className=\"fw-medium text-end\" style={{ maxWidth: '60%' }}>{selectedTransaction.description}</span>\r\n                                    </div>\r\n                                    <div className=\"d-flex justify-content-between\">\r\n                                        <span className=\"text-muted\">Solde aprÃ¨s tx</span>\r\n                                        <span className=\"fw-bold text-dark\">{(selectedTransaction.balanceAfter || 0).toLocaleString()} FCFA</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {selectedTransaction.status === 'cancelled' && (\r\n                                    <Alert variant=\"secondary\" className=\"mb-0 small\">\r\n                                        <i className=\"bi bi-info-circle me-2\"></i>\r\n                                        Cette transaction a Ã©tÃ© annulÃ©e le {new Date(selectedTransaction.cancelledAt).toLocaleDateString('fr-FR')}.\r\n                                    </Alert>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })()}\r\n                </Modal.Body>\r\n                <Modal.Footer className=\"border-0\">\r\n                    <Button variant=\"light\" onClick={() => setSelectedTransaction(null)}>Fermer</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default AdminWalletManagement;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]